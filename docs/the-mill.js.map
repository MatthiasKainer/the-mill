{"version":3,"file":"the-mill.js","sources":["../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit/node_modules/lit-html/lit-html.js","../node_modules/lit/node_modules/lit-element/lit-element.js","../node_modules/nested-css-to-flat/src/flattener.js","../node_modules/nested-css-to-flat/src/parser.js","../node_modules/nested-css-to-flat/src/index.js","../node_modules/nested-css-to-flat/lit-css.js","../node_modules/organismus/dist/index.js","../node_modules/pure-lit/lib/index.module.js","../src/arrays/index.ts","../src/math/cube/cube.ts","../src/math/position.ts","../src/math/guid.ts","../src/internationalization/texts.ts","../src/internationalization/index.ts","../src/game/player/dices/Dices.ts","../src/game/player/dices/index.ts","../src/game/player/buildings/Castles.ts","../src/game/player/load.ts","../src/game/world/types.ts","../src/game/world/buildings.ts","../src/game/world/terrain.ts","../src/game/world/worldLoader.ts","../src/math/pathfinder/heapify.ts","../src/math/pathfinder/a.ts","../src/game/world/events.ts","../src/game/player/knights/Knight.ts","../src/game/world/navigator.ts","../src/browser/Selector.ts","../src/game/player/wagon/Wagon.ts","../src/game/player/resources/index.ts","../src/game/world/world-state.ts","../src/game/player/Assets.ts","../src/game/player/buildings/Lumberjack.ts","../src/game/player/buildings/Mine.ts","../src/game/world/index.ts","../src/assets/styles.ts","../src/assets/elements/button/ImageButton.ts","../src/assets/elements/button/Button.ts","../src/assets/elements/modal/modal.styles.ts","../src/assets/elements/modal/modal.ts","../src/assets/elements/modal/modalContainer.ts","../src/assets/elements/text/Text.ts","../src/assets/elements/loading-bar/index.ts","../src/assets/elements/loading-bar/loading-bar.styles.ts","../src/assets/elements/dice/dice.ts","../src/assets/elements/dice/dice.style.ts","../src/assets/player/knight.ts","../src/assets/player/wagon.ts","../src/assets/player/dice/index.ts","../node_modules/lit/node_modules/lit-html/directive.js","../node_modules/lit/node_modules/lit-html/directives/unsafe-html.js","../src/assets/sprites.ts","../src/assets/player/fighter-info.ts","../src/assets/map/consts.ts","../src/assets/map/Hexagon.styles.ts","../src/assets/map/Hexagon.ts","../src/assets/map/Hexagon.movement.ts","../src/assets/map/Hexagon.battle.ts","../src/assets/map/World.ts","../src/assets/buildings/mill.ts","../src/assets/buildings/castle-small.ts","../src/assets/buildings/lumberjack-small.ts","../src/assets/buildings/mine-small.ts","../src/game/player/costs.ts","../src/assets/sidebar/sidebar.style.ts","../src/assets/sidebar/controls/health-bar.ts","../src/math/number.ts","../src/assets/sidebar/selectedCastle.ts","../src/assets/sidebar/selectedKnight.ts","../src/assets/sidebar/selectedWagon.ts","../src/assets/sidebar/controls/stats-bar.ts","../src/assets/sidebar/controls/buttons.ts","../src/assets/sidebar/sidebar.ts","../src/assets/modals/Battle.ts","../src/assets/modals/DiceResult.ts","../src/assets/modals/MillTaken.ts","../src/assets/modals/NoMoreTurns.ts","../src/assets/modals/index.ts","../src/assets/footer/index.ts","../src/assets/resources/base.ts","../src/assets/resources/grain.ts","../src/assets/resources/stone.ts","../src/assets/resources/iron.ts","../src/assets/resources/log.ts","../src/assets/resources/hay.ts","../src/assets/resources/ResourceCounter.ts","../src/assets/header/index.ts","../src/assets/index.ts","../src/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,e=Symbol(),n=new Map;class s{constructor(t,n){if(this._$cssResult$=!0,n!==e)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t}get styleSheet(){let e=n.get(this.cssText);return t&&void 0===e&&(n.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const o=t=>new s(\"string\"==typeof t?t:t+\"\",e),r=(t,...n)=>{const o=1===t.length?t[0]:n.reduce(((e,n,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(n)+t[s+1]),t[0]);return new s(o,e)},i=(e,n)=>{t?e.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((t=>{const n=document.createElement(\"style\"),s=window.litNonce;void 0!==s&&n.setAttribute(\"nonce\",s),n.textContent=t.cssText,e.appendChild(n)}))},S=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const n of t.cssRules)e+=n.cssText;return o(e)})(t):t;export{s as CSSResult,i as adoptStyles,r as css,S as getCompatibleStyle,t as supportsAdoptingStyleSheets,o as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as i}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var s;const e=window.trustedTypes,r=e?e.emptyScript:\"\",h=window.reactiveElementPolyfillSupport,o={toAttribute(t,i){switch(i){case Boolean:t=t?r:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},n=(t,i)=>i!==t&&(i==i||t==t),l={attribute:!0,type:String,converter:o,reflect:!1,hasChanged:n};class a extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var i;null!==(i=this.l)&&void 0!==i||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Eh(s,i);void 0!==e&&(this._$Eu.set(e,s),t.push(e))})),t}static createProperty(t,i=l){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s=\"symbol\"==typeof t?Symbol():\"__\"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty(\"finalized\"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(t(i))}else void 0!==i&&s.push(t(i));return s}static _$Eh(t,i){const s=i.attribute;return!1===s?void 0:\"string\"==typeof s?s:\"string\"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,s;(null!==(i=this._$Eg)&&void 0!==i?i:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$Eg)||void 0===i||i.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Et.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$ES(t,i,s=l){var e,r;const h=this.constructor._$Eh(t,s);if(void 0!==h&&!0===s.reflect){const n=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o.toAttribute)(i,s.type);this._$Ei=t,null==n?this.removeAttribute(h):this.setAttribute(h,n),this._$Ei=null}}_$AK(t,i){var s,e,r;const h=this.constructor,n=h._$Eu.get(t);if(void 0!==n&&this._$Ei!==n){const t=h.getPropertyOptions(n),l=t.converter,a=null!==(r=null!==(e=null===(s=l)||void 0===s?void 0:s.fromAttribute)&&void 0!==e?e:\"function\"==typeof l?l:null)&&void 0!==r?r:o.fromAttribute;this._$Ei=n,this[n]=a(i,t.type),this._$Ei=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,i)=>this[i]=t)),this._$Et=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$EU()}catch(t){throw i=!1,this._$EU(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$Eg)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$ES(i,this[i],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}a.finalized=!0,a.elementProperties=new Map,a.elementStyles=[],a.shadowRootOptions={mode:\"open\"},null==h||h({ReactiveElement:a}),(null!==(s=globalThis.reactiveElementVersions)&&void 0!==s?s:globalThis.reactiveElementVersions=[]).push(\"1.3.1\");export{a as ReactiveElement,o as defaultConverter,n as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=globalThis.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=`lit$${(Math.random()+\"\").slice(9)}$`,o=\"?\"+e,n=`<${o}>`,l=document,h=(t=\"\")=>l.createComment(t),r=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,d=Array.isArray,u=t=>{var i;return d(t)||\"function\"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])},c=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,a=/>/g,f=/>|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g,_=/'/g,m=/\"/g,g=/^(?:script|style|textarea|title)$/i,p=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),$=p(1),y=p(2),b=Symbol.for(\"lit-noChange\"),w=Symbol.for(\"lit-nothing\"),T=new WeakMap,x=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(h(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l},A=l.createTreeWalker(l,129,null,!1),C=(t,i)=>{const o=t.length-1,l=[];let h,r=2===i?\"<svg>\":\"\",d=c;for(let i=0;i<o;i++){const s=t[i];let o,u,p=-1,$=0;for(;$<s.length&&(d.lastIndex=$,u=d.exec(s),null!==u);)$=d.lastIndex,d===c?\"!--\"===u[1]?d=v:void 0!==u[1]?d=a:void 0!==u[2]?(g.test(u[2])&&(h=RegExp(\"</\"+u[2],\"g\")),d=f):void 0!==u[3]&&(d=f):d===f?\">\"===u[0]?(d=null!=h?h:c,p=-1):void 0===u[1]?p=-2:(p=d.lastIndex-u[2].length,o=u[1],d=void 0===u[3]?f:'\"'===u[3]?m:_):d===m||d===_?d=f:d===v||d===a?d=c:(d=f,h=void 0);const y=d===f&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=d===c?s+n:p>=0?(l.push(o),s.slice(0,p)+\"$lit$\"+s.slice(p)+e+y):s+e+(-2===p?(l.push(void 0),i):y)}const u=r+(t[o]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==s?s.createHTML(u):u,l]};class E{constructor({strings:t,_$litType$:s},n){let l;this.parts=[];let r=0,d=0;const u=t.length-1,c=this.parts,[v,a]=C(t,s);if(this.el=E.createElement(v,n),A.currentNode=this.el.content,2===s){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith(\"$lit$\")||i.startsWith(e)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+\"$lit$\").split(e),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?M:\"?\"===i[1]?H:\"@\"===i[1]?I:S})}else c.push({type:6,index:r})}for(const i of t)l.removeAttribute(i)}if(g.test(l.tagName)){const t=l.textContent.split(e),s=t.length-1;if(s>0){l.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)l.append(t[i],h()),A.nextNode(),c.push({type:2,index:++r});l.append(t[s],h())}}}else if(8===l.nodeType)if(l.data===o)c.push({type:2,index:r});else{let t=-1;for(;-1!==(t=l.data.indexOf(e,t+1));)c.push({type:7,index:r}),t+=e.length-1}r++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function P(t,i,s=t,e){var o,n,l,h;if(i===b)return i;let d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu;const u=r(i)?void 0:i._$litDirective$;return(null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t),d._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P(t,d._$AS(t,i.values),d,e)),i}class V{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l).importNode(s,!0);A.currentNode=o;let n=A.nextNode(),h=0,r=0,d=e[0];for(;void 0!==d;){if(h===d.index){let i;2===d.type?i=new N(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new L(n,this,t)),this.v.push(i),d=e[++r]}h!==(null==d?void 0:d.index)&&(n=A.nextNode(),h++)}return o}m(t){let i=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class N{constructor(t,i,s,e){var o;this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cg=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=P(this,t,i),r(t)?t===w||null==t||\"\"===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==b&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):u(t)?this.S(t):this.$(t)}A(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==w&&r(this._$AH)?this._$AA.nextSibling.data=t:this.k(l.createTextNode(t)),this._$AH=t}T(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=E.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{const t=new V(o,this),i=t.p(this.options);t.m(s),this.k(i),this._$AH=t}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new E(t)),i}S(t){d(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new N(this.A(h()),this.A(h()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class S{constructor(t,i,s,e,o){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=P(this,t,i,0),n=!r(t)||t!==this._$AH&&t!==b,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=P(this,e[s+l],i,l),h===b&&(h=this._$AH[l]),n||(n=!r(h)||h!==this._$AH[l]),h===w?t=w:t!==w&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.C(t)}C(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class M extends S{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===w?void 0:t}}const k=i?i.emptyScript:\"\";class H extends S{constructor(){super(...arguments),this.type=4}C(t){t&&t!==w?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:w)===b)return;const e=this._$AH,o=t===w&&e!==w||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w&&(e===w||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const R={P:\"$lit$\",L:e,V:o,I:1,N:C,R:V,D:u,j:P,H:N,O:S,F:H,B:I,W:M,Z:L},z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t=globalThis.litHtmlVersions)&&void 0!==t?t:globalThis.litHtmlVersions=[]).push(\"2.2.1\");export{R as _$LH,$ as html,b as noChange,w as nothing,x as render,y as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var l,o;const r=t;class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return i}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;null==n||n({LitElement:s});const h={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push(\"3.2.0\");export{s as LitElement,r as UpdatingElement,h as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","const isObject = (subject) => typeof subject === 'object' && subject !== null\n\nexport const flatten = (data, parent = \"\") => {\n    const atRule = {}\n    const innerFlatten = (data, parent = \"\") => {\n        // This creates an :is block if there are multiple keys in the \n        //  parent. This query is not robust and can be improved\n        parent = (parent.indexOf(\",\") > -1 && parent.indexOf(\":is\") !== 0) ? `:is(${parent})` : parent\n        return Object.entries(data).map(([key, values]) => {\n            // we support nest because we don't disallow arbitrary positions for & yet\n            //  so it's more accidentaly. Remove it without taking action\n            key = key.replace(/\\@nest/gi, \"\")\n            // Replace any occurence of & with the parent in the key\n            key = key.replace(/\\&/gi, parent)\n            if (key.indexOf(\"@media\") === 0) {\n                atRule[key] = atRule[key] || \"\"\n                atRule[key] += values\n                    ? values.filter(isObject).reduce((result, element) =>\n                        (result += `${innerFlatten(element, parent)} `, result),\n                        \"\")\n                    : null\n                return \"\"\n            }\n            if (key.indexOf(\"@\") === 0) {\n                // at blocks are special as they can have\n                //  nested blocks in css already. In our\n                //  default case, we have to create new \n                //  keys for every object\n                return ` ${key} { ${values\n                    .filter(v => !isObject(v))\n                    .join(\";\")\n                    }${values\n                        .filter(isObject)\n                        .map(element => innerFlatten(element, key))\n                        .join(\" \")\n                    } }`\n            }\n            if (!values) {\n                return `${key.trim()};`\n            }\n            return `${key} { ${values\n                .filter(v => !isObject(v))\n                .join(\";\")\n                } } ${\n                // move all objects out of the key and flatten the keys\n                values\n                    .filter(isObject)\n                    .map(element => innerFlatten(element, key))\n                    .join(\" \")\n                }`\n        }).join(\"\").trim()\n    }\n    const innerFun = innerFlatten(data, parent)\n    return innerFun + Object\n        .entries(atRule)\n        .reduce((prev, [key, value]) =>\n            prev += value ? `${key} { ${value.trimEnd()} }` : `${key};`, \" \")\n        .trimEnd()\n\n}","const NODE_STATE_KEY = \"STATE_KEY\"\nconst NODE_STATE_VALUE = \"STATE_VALUE\"\nconst NODE_AT_GROUP_KEY = \"NODE_AT_GROUP_KEY\"\nconst NODE_AT_GROUP_VALUE = \"NODE_AT_GROUP_VALUE\"\n\nconst COMMENT = \"COMMENT_START\"\n\nexport const parseElement = (value, level = 1) => {\n    const val = [];\n\n    let currentVal = \"\"\n    for (let index = 0; index < value.length; index++) {\n        const element = value[index];\n        if (element === \";\") {\n            val.push(currentVal.trim());\n            currentVal = \"\"\n        } else if (element === \"@\" && currentVal.trim() === \"\") {\n            // inside an element, an at-group can create another\n            //  level of nesting\n            const { node, endIndex } = parseNode(value.substr(index), level + 1)\n            val.push(node)\n            index += endIndex;\n        } else if (element === \"&\" && currentVal.trim() === \"\") {\n            // if this is a nested node, parse the element\n            //  as a nested node\n            const { node, endIndex } = parseNode(value.substr(index), level + 1)\n            val.push(node)\n            index += endIndex;\n        } else if (element === \"}\") {\n            if (currentVal.trim() !== \"\") {\n                val.push(currentVal.trim());\n            }\n            return { val, endIndex: index - 1 }\n        } else {\n            currentVal += element\n        }\n    }\n\n    return { val, endIndex: value.length - 1 }\n}\n\nexport const parseNode = (value, level = 0) => {\n    const node = {}\n    // We always start with a key\n    let state = NODE_STATE_KEY;\n    let prevState = NODE_STATE_KEY\n    let currentKey = \"\"\n    let keyStartIndex = 0\n\n    for (let index = 0; index < value.length; index++) {\n        const element = value[index];\n        if (element === \"}\" && level > 0) {\n            // for any non-top level element, bubble up with the current node\n            return { node, endIndex: index }\n        } else if (state !== NODE_AT_GROUP_VALUE && element === \"}\") {\n            // skip top level element \n            continue;\n        }\n\n        // helpers for the current scope - this might look suboptimal \n        //  (creating a function in a loop), but it seems it's inlined\n        //  in all browsers, so no performance impact\n        function atNode_create(element) {\n            node[currentKey.trim()] = [...(node[currentKey] || []), ...(Array.isArray(element.node) ? element.node : [element.node])];\n            index += element.endIndex + 1;\n        }\n\n        if (element === \"/\" && value[index + 1] === \"*\") {\n            // switching to comment state if we have a /* series\n            //  and continue after the *\n            prevState = state\n            state = COMMENT;\n            index += 2\n        }\n        switch (state) {\n            case COMMENT:\n                if (element === \"*\" && value[index + 1] === \"/\") {\n                    state = prevState\n                    index += 2\n                    keyStartIndex = index\n                }\n                break;\n            case NODE_STATE_KEY:\n                if (currentKey.trim() === \"\" && element.trim() === \"@\") {\n                    // if a key is starting with an @\n                    //  this is an at-group\n                    state = NODE_AT_GROUP_KEY;\n                    currentKey += element.trim();\n                } else if (element === \"{\") {\n                    // read the body for the key. In typical elements this \n                    //  can only be one\n                    state = NODE_STATE_VALUE;\n                    currentKey = currentKey.trim();\n                    node[currentKey] = node[currentKey] || [];\n                } else if (element === \":\" && value[index + 1] === \" \") {\n                    // this is when we were thinking this was an object when really this is pair - can only happen in @-blocks\n                    // resetting index, we have to read the key again\n                    index = keyStartIndex\n                    const { val, endIndex } = parseElement(value.substr(index), level + 1)\n                    return { node: val, endIndex: index + endIndex }\n                } else {\n                    currentKey += element;\n                }\n                break;\n            case NODE_STATE_VALUE:\n                const { val, endIndex } = parseElement(value.substr(index), level + 1)\n                index += endIndex;\n                node[currentKey] = [...node[currentKey], ...val]\n                state = NODE_STATE_KEY;\n                currentKey = \"\"\n                keyStartIndex = index;\n                break;\n            case NODE_AT_GROUP_KEY:\n                if (element === \";\") {\n                    // This is for short-at-keys like '@charset \"utf-8\";' only\n                    node[currentKey] = undefined;\n                    currentKey = \"\";\n                    keyStartIndex = index;\n                    state = NODE_STATE_KEY;\n                }\n                else if (element === \"{\") {\n                    currentKey = currentKey.trim();\n                    atNode_create(parseNode(value.substr(index + 1), level + 1))\n                    state = NODE_AT_GROUP_VALUE\n                } else {\n                    currentKey += element;\n                }\n                break;\n            case NODE_AT_GROUP_VALUE:\n                if (element.trim() === \"\") {\n                    break\n                }\n                else if (element !== \"}\") {\n                    // an at-group can have multiple elements\n                    //  so as long as we don't have an '}' continue\n                    //  to read through the nodes \n                    atNode_create(parseNode(value.substr(index), level + 1))\n                } else {\n                    currentKey = \"\";\n                    keyStartIndex = index;\n                    state = NODE_STATE_KEY;\n                }\n                break;\n        }\n    }\n    return { node, endIndex: value.length }\n}\n","import { flatten } from \"./flattener.js\";\nimport { parseNode } from \"./parser.js\";\n\nexport function transform(cssString) {\n    return flatten(\n        parseNode(cssString).node\n    )\n}\n","import {css as litCss, unsafeCSS} from 'lit';\nimport {transform} from \"./src/index.js\"\n\nfunction toString(string, ...tags) {  \n    let str = string[0];\n    for (let i = 0; i < tags.length; i++) {\n      str += tags[i] + string[i + 1];\n    }\n    return transform(str);\n  }\n\nexport const css = (strings, ...values) => {\n    return litCss`${unsafeCSS(toString(strings, ...values))}`;\n}","const e={};var o;!function(e){e[e.SILENT=0]=\"SILENT\",e[e.ERROR=1]=\"ERROR\",e[e.INFO=80]=\"INFO\",e[e.DEBUG=90]=\"DEBUG\",e[e.TRACE=100]=\"TRACE\"}(o||(o={}));let n=o.SILENT;const r=e=>n=e;let t=[];const s=(e,r,...s)=>{t.forEach(n=>n(o.ERROR,e,r,...s)),n>=o.ERROR&&console.error(r,e,...s)},a=(e,r,...s)=>{if(t.forEach(n=>n(o.INFO,e,r,...s)),n>=o.INFO){(n===o.TRACE?console.trace:console.log)(r,e,...s)}},c=(e,r,...s)=>{if(t.forEach(n=>n(o.DEBUG,e,r,...s)),n>=o.DEBUG){(n===o.TRACE?console.trace:console.log)(r,e,...s)}},i={queue:{},list:{}};function l(e){return e.reduce((e,o)=>`${e};${o.name};`,\"\")}const m=new class{constructor(){this.actionDictionary={}}on(e,o){if(Array.isArray(e)){const n=l(e);if(i.list[n])throw s(\"Hypothalamus.on\",new Error(\"Cannot register the same list of hormones twice\"),n),new Error(\"Cannot register the same list of hormones twice\");a(\"[Hypothalamus.on] Adding new action when all in a list of hormones are released\",n,e),i.list[n]={hormones:[...e],callback:o}}else a(\"Hypothalamus.on\",\"Adding new action when a hormone is released\",e.name),this.actionDictionary[e.name]=this.actionDictionary[e.name]||[],this.actionDictionary[e.name].push(o)}drop(e){Array.isArray(e)?(c(\"Hypothalamus.drop\",\"Dropping a list of hormones\",l(e),e),delete i.queue[l(e)],delete i.list[l(e)]):(c(\"Hypothalamus.drop\",\"Dropping a hormone\",e.name),this.actionDictionary[e.name]=[])}dropAll(){c(\"Hypothalamus.dropAll\",\"Dropping all hormones\"),this.actionDictionary={},i.queue={},i.list={}}collect(e,o,n){const r=`collect;;${e.name};${o.name};`;if(i.list[r])throw s(\"Hypothalamus.collect\",new Error(\"Cannot register the same list of hormones twice\"),r),new Error(\"Cannot register the same list of hormones twice\");a(\"[Hypothalamus.collect] Adding new action when collected hormones are released\",r,e,o),i.list[r]={hormones:[o],callback:n}}orchestrate(e,o){this.actionDictionary[e.name]&&this.actionDictionary[e.name].forEach(e=>e(o));const n=Object.keys(i.queue).filter(o=>o.includes(`;${e.name};`)),r=Object.keys(i.list).filter(o=>o.indexOf(`;${e.name};`)>-1&&n.every(e=>e!==o));r.forEach(e=>{i.queue[e]={hormones:[...i.list[e].hormones],values:{},callback:i.list[e].callback}});const t=[...new Set([...n,...r])];for(let n=0;n<t.length;n++){const r=t[n];if(r.startsWith(\"collect;;\")){const[n]=r.replace(\"collect;;\",\"\").split(\";\");e.name===n?i.queue[r].values[e.name]=[...i.queue[r].values[e.name]||[],o]:(i.queue[r].values[e.name]=o,i.queue[r].callback(i.queue[r].values),delete i.queue[r])}else i.queue[r].hormones=i.queue[r].hormones.filter(o=>o.name!==e.name),i.queue[r].values[e.name]=o,i.queue[r].hormones.length<1&&(i.queue[r].callback(i.queue[r].values),delete i.queue[r])}}};function d(e,o={}){return u(e,Object.assign(Object.assign({},o),{readOnce:!0}))}function h(o,n={}){return f(e)(o,Object.assign(Object.assign({},n),{loadIfExists:!0}))}function u(o,n={}){return f(e)(o,n)}const f=e=>(o,n={})=>{if(e[o]&&!n.loadIfExists)throw s(\"hormone.defineHormone\",new Error(\"Hormone already created\"),o),new Error(\"Hormone already created\");if(e[o]&&n.loadIfExists)return c(\"hormone.defineHormone\",\"Hormone already created, reusing existing\",o),{name:o};const{defaultValue:r,transformation:t,readOnce:a}=n;return e[o]={name:o,value:r,defaultValue:r,transformation:t,receptors:[],readOnce:null!=a&&a},{name:o}};async function p(o,n){return w(e)(o,n)}const w=e=>async(o,n)=>{if(!o)throw s(\"hormone.releaseHormone\",new Error(\"Hormone cannot be undefined\")),new Error(\"Hormone cannot be undefined\");const{name:r}=o;if(!e[r])throw s(\"hormone.releaseHormone\",new Error(\"Hormone does not exist\"),r),new Error(\"Hormone does not exist\");var t;t=n,e[r].value=(void 0===t||t instanceof Function)&&n?n(e[r].value):n,a(\"hormone.releaseHormone\",\"Releasing passed hormone\",r,e[r].value);const{receptors:i,transformation:l}=e[r];l&&l(e[r].value);const d=e[r].value;return m.orchestrate({name:r},d),await Promise.all(i.filter(e=>{const o=void 0===e.onlyIf||e.onlyIf(d);return c(\"hormone.releaseHormone\",o?\"Keeping receptor because condition matched or no condition\":\"Filtered receptor from the triggers because condition not matched\",e),o}).map(e=>(null==e?void 0:e.onTriggered)?null==e?void 0:e.onTriggered(d):d)),e[r].readOnce&&(c(\"hormone.releaseHormone\",\"Resetting hormone because it is readOnce\",r),e[r].value=e[r].defaultValue),Object.assign({},e[r])};function H(o,{name:n},r,t){return g(e)(o,{name:n},r,t)}const g=e=>(r,{name:c},i,l)=>{const m=null!=l?l:i,d=l?i:void 0;if(!e[c])throw s(\"receptor.useReceptor\",new Error(\"Hormone is not defined\"),c),new Error(`Hormone \"${c}\" is not defined`);((e,o,n,r)=>{const t=(null==r?void 0:r.toString())||n;return!e[n].receptors.some(e=>e.parent===o&&e.key===t)})(e,r,c,d)?(a(\"receptor.useReceptor\",\"Pushing new receptor to hormone\",c,{parent:r}),e[c].receptors.push({key:(null==d?void 0:d.toString())||c,parent:r,onlyIf:d,onTriggered:m}),void 0!==e[c].value?m(e[c].value):void 0!==e[c].defaultValue&&m(e[c].defaultValue)):((e,r,...s)=>{t.forEach(n=>n(o.TRACE,e,r,...s)),n===o.TRACE&&console.trace(r,e,...s)})(\"receptor.useReceptor\",\"Receptor not pushed because already subscribed\",c,{parent:r})};function b(){const e={};return{defineHormone:f(e),releaseHormone:w(e),useReceptor:g(e)}}export{o as LOGLEVEL,b as Organismus,u as defineHormone,d as defineSingleHormone,h as getOrDefineHormone,m as hypothalamus,p as releaseHormone,r as setLoglevel,H as useReceptor};\n","import{LitElement as e,html as t}from\"lit\";function n(e,[t,n]){return t.toLowerCase()!==t?e[t]=Object.assign(Object.assign({},n),{attribute:t.replace(/[A-Z]/g,\"-$&\").toLowerCase()}):e[t]=n,e}function o(e){return\"boolean\"==typeof e?{type:Boolean}:Array.isArray(e)?{type:Array}:\"object\"==typeof e?{type:Object}:{}}const r=e=>{return t=e||{},Object.entries(t).reduce(((e,[t,r])=>n(e,[t,o(r)])),{});var t},i=e=>(e=>void 0!==e&&void 0!==e.props)(e)?(e.props||[]).reduce(((e,t)=>(Object.entries(t).forEach((t=>e=n(e,t))),e)),{}):r(null==e?void 0:e.defaults),c={},u=(n,o,r)=>{if(c[n])return c[n];customElements.define(n,class extends e{constructor(){super(),this.content=t``,(e=>void 0!==e&&void 0!==e.defaults)(r)&&Object.entries(r.defaults).forEach((([e,t])=>{this[e]=t}))}static get properties(){return i(r)}static get styles(){return null==r?void 0:r.styles}async performUpdate(){return this.content=await Promise.resolve(o(this)).catch((e=>t`<slot name=\"error\">${e}</slot>`)),super.performUpdate()}render(){return this.content}});const u=document.createElement(n);return c[n]=u,u};var s=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},d={},a={},f={};Object.defineProperty(f,\"t\",{value:!0}),f.shallowClone=void 0,f.shallowClone=function(e){return\"object\"!=typeof e||!e||e instanceof Date||e instanceof RegExp?e:Array.isArray(e)?[...e]:Object.assign({},e)};var l={};function v(e){if(!e.dispatchEvent||!e.requestUpdate)throw new Error(\"Element missing required functions (dispatchEvent/requestUpdate)\");return e}Object.defineProperty(l,\"t\",{value:!0}),l.withWorkflow=l.withReducer=l.withState=l.decorate=l.asUpdateableLitElement=void 0,l.asUpdateableLitElement=v;const b=\"__registered_states\";function y(e){const t=e;if(t[b])return t;const n=v(e),o=n.updated;return t[b]={index:0,count:0,states:[],reducers:[],workflows:[]},n.updated=e=>(t[b].index=0,o(e)),t}l.decorate=y,l.withState=function(e,t,n={}){const o=y(e),{index:r,count:i}=o[b];return r===i?(o[b].index++,o[b].count++,o[b].states.push(t),t):(o[b].index++,n.updateDefault&&o[b].states[r].inject(t.get()),o[b].states[r])},l.withReducer=function(e,t){const n=y(e),{index:o,count:r,reducers:i}=n[b];return o!==r||i[o-1]?n[b].reducers[o-1]:(n[b].reducers[o-1]=t,t)},l.withWorkflow=function(e,t){const n=y(e),{index:o,count:r,workflows:i}=n[b];return o!==r||i[o-1]?n[b].workflows[o-1]:(n[b].workflows[o-1]=t,t)};var p=s&&s.o||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(a,\"t\",{value:!0}),a.useState=void 0;const j=f,O=l;a.useState=(e,t,n={})=>{let o=(0,j.shallowClone)(t);const r=[()=>p(void 0,void 0,void 0,(function*(){return e.requestUpdate(),yield e.updateComplete}))],i=e=>p(void 0,void 0,void 0,(function*(){o!==e&&(o=(0,j.shallowClone)(e),yield Promise.all(r.map((e=>e(o)))))}));return(0,O.withState)(e,new class{set value(e){i(e)}get value(){return o}publish(e){i(e)}set(e){return p(this,void 0,void 0,(function*(){yield i(e)}))}subscribe(e){r.push(e)}inject(e){o=e}get(){return o}getState(){return o}},n)};var m={},g=s&&s.o||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(m,\"t\",{value:!0}),m.useReducer=void 0;const _=a,w=l;m.useReducer=(e,t,n,o={})=>{const{get:r,set:i}=(0,_.useState)(e,n,o),c=[],u=(n,u)=>g(void 0,void 0,void 0,(function*(){const s=t(r());return s[n]&&(yield i(yield s[n](u)),c.forEach((e=>e(n,r()))),o.dispatchEvent&&e.dispatchEvent(new CustomEvent(n,{detail:r()}))),r()}));return(0,w.withReducer)(e,{get:r,subscribe:e=>c.push(e),when:(e,t)=>c.push(((n,o)=>n===e&&t(o))),set:u,dispatch:u})};var h={},E=s&&s.o||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(h,\"t\",{value:!0}),h.useWorkflow=void 0;const x=d,M=l;h.useWorkflow=(e,t)=>{const n=Object.entries(t).reduce(((t,[n,{reducer:o,initialState:r}])=>(t[n]=(0,x.useReducer)(e,o,r),t)),{}),o={},r={},i=[],c=e=>(i.push({type:\"projections\",args:[e]}),n[e]?n[e].get():void 0);return(0,M.withWorkflow)(e,{addActivity:(e,t)=>E(void 0,void 0,void 0,(function*(){var r,c;i.push({type:\"addActivity\",args:[e,t]}),yield Promise.all(null!==(c=null===(r=o[e])||void 0===r?void 0:r.map((e=>e(t))))&&void 0!==c?c:[]);for(const o of Object.values(n))yield o.dispatch(e,t)})),addSideeffect:(e,t)=>{i.push({type:\"addSideeffect\",args:[e,t]}),o[e]=[...o[e]||[],t]},projections:c,addCompensation:(e,t)=>{i.push({type:\"addCompensation\",args:[e,t]}),r[e]=[...r[e]||[],t]},compensate:()=>E(void 0,void 0,void 0,(function*(){i.push({type:\"compensate\",args:[]});for(const[e,t]of Object.entries(r))for(const o of t)for(const t of Object.values(n))yield t.dispatch(e,o)})),after:(e,t,n)=>{i.push({type:\"after\",args:[e,t,n]});const o=()=>E(void 0,void 0,void 0,(function*(){i.some((e=>((e,t)=>{if(e.type!==t.type)return!1;for(let n=0;n<t.args.length;n++)if(e.args[n]!==t.args[n])return!1;return!0})(e,t)))||(new Date(Date.now())>e?yield n():setTimeout(o,100))}));o()},plan:e=>E(void 0,void 0,void 0,(function*(){for(const[n,o]of Object.entries(e))if(t[n]&&JSON.stringify(c(n))===JSON.stringify(t[n].initialState))return yield o();return e[\"\"]?yield e[\"\"]():Promise.resolve(null)})),history:()=>[...i]})},function(e){Object.defineProperty(e,\"t\",{value:!0}),e.useWorkflow=e.useReducer=e.useState=void 0;var t=a;Object.defineProperty(e,\"useState\",{enumerable:!0,get:function(){return t.useState}});var n=m;Object.defineProperty(e,\"useReducer\",{enumerable:!0,get:function(){return n.useReducer}});var o=h;Object.defineProperty(e,\"useWorkflow\",{enumerable:!0,get:function(){return o.useWorkflow}})}(d);var S={},P={},A={};function k(e){if(!e.dispatchEvent||!e.requestUpdate)throw new Error(\"Element missing required functions (dispatchEvent/requestUpdate)\");return e}Object.defineProperty(A,\"t\",{value:!0}),A.withEffect=A.decorate=A.asUpdateableLitElement=void 0,A.asUpdateableLitElement=k;const q=\"__registered_effects\";function C(e){const t=e;if(t[q])return t;const n=k(e),o=n.updated;return t[q]={index:0,count:0,effects:[]},n.updated=e=>(t[q].index=0,o(e)),t}A.decorate=C,A.withEffect=function(e,t){const n=C(e),{index:o,count:r}=n[q];return o===r?(n[q].index++,n[q].count++,n[q].effects.push(t),t):(n[q].index++,n[q].effects[o])},Object.defineProperty(P,\"t\",{value:!0}),P.useOnce=P.useEffect=void 0;const D=A;function R(e,t,n){const o=(0,D.withEffect)(e,{on:t,observe:[\"__initial__dirty\"]});o.observe.some(((e,t)=>n[t]!==e))&&o.on(),o.observe=n}P.useEffect=R;P.useOnce=(e,t)=>R(e,t,[]),function(e){Object.defineProperty(e,\"t\",{value:!0}),e.useOnce=e.useEffect=void 0;var t=P;Object.defineProperty(e,\"useEffect\",{enumerable:!0,get:function(){return t.useEffect}}),Object.defineProperty(e,\"useOnce\",{enumerable:!0,get:function(){return t.useOnce}})}(S);const T=(e,t,n,o)=>e.dispatchEvent(new CustomEvent(t.trim(),Object.assign(Object.assign({},o),{detail:n})));var U=S.useEffect,J=S.useOnce,N=d.useReducer,W=d.useState,$=d.useWorkflow;export{T as dispatch,u as pureLit,U as useEffect,J as useOnce,N as useReducer,W as useState,$ as useWorkflow};\n//# sourceMappingURL=index.module.js.map\n","export function range(start: number, end: number): number[] {\n    return Array.from({ length: end - start + 1 }, (_, i) => i);\n  }\n  ","import { range as r } from \"../../arrays\";\nimport { Position } from \"../position\";\n\nexport class Cube {\n  equals(other: Cube) {\n    return other !== null &&\n      this.x === other.x &&\n      this.y === other.y &&\n      this.z === other.z\n  }\n  add(transpose: Cube) {\n    const { x, y, z } = this;\n    return new Cube(x + transpose.x, y + transpose.y, z + transpose.z);\n  }\n  remove(cube: Cube) {\n    const { x, y, z } = this;\n    return new Cube(x - cube.x, y - cube.y, z - cube.z);\n  }\n  vector(to: Cube) {\n    return new Cube(\n      to.x - this.x,\n      to.y - this.y,\n      to.z - this.z,\n    )\n  }\n\n  distance(other: Cube) {\n    return Math.max(\n      Math.abs(this.x - other.x),\n      Math.abs(this.y - other.y),\n      Math.abs(this.z - other.z)\n    );\n  }\n  heuristic(other: Cube) {\n    return Math.abs(this.x - other.x) +\n      Math.abs(this.y - other.y) +\n      Math.abs(this.z - other.z)\n  }\n\n  range(distance: number) {\n    const results: Cube[] = [];\n    for (let x = -distance; x <= distance; x++) {\n      for (\n        let y = Math.max(-distance, -x - distance);\n        y <= Math.min(distance, -x + distance);\n        y++\n      ) {\n        results.push(this.add(new Cube(x, y, -x - y)));\n      }\n    }\n    return results;\n  }\n\n  direction(direction: number) {\n    return cubeDirections[direction];\n  }\n\n  directionTo(neighbor: Cube): Cube | null {\n    const dir = r(0, 5)\n      .find((dir) => this.neighbor(dir).equals(neighbor))\n    return (dir !== undefined && dir >= 0) ? this.direction(dir) : null;\n  }\n\n  neighbor(direction: number) {\n    return this.add(this.direction(direction));\n  }\n\n  neighbors(map: Cube[]) {\n    return r(0, 5)\n      .map((dir) => this.neighbor(dir))\n      .filter(neighbor => map.some(cube => cube.equals(neighbor)));\n  }\n\n  ring(radius: number) {\n    const results: Cube[] = []\n    const negRadius = radius * -1\n    // var results = []\n    for (const x of r(negRadius, radius)) {\n      for (const y of r(Math.max(negRadius, (x * -1) - negRadius), Math.min(radius, (x * -1) + radius))) {\n        const z = -x - y;\n        results.push(this.add(new Cube(x, y, z)))\n      }\n    }\n    return results\n  }\n\n  cost() {\n    return this.costs;\n  }\n\n  toPosition() {\n    //const col = this.x;\n    //const row = this.z + (this.x + (this.x & 1)) / 2;\n    const col = this.x + (this.z + (this.z & 1)) / 2\n    const row = this.z\n    return new Position(row, col);\n  }\n\n  toCoords() {\n    return this.toPosition().toCoords();\n  }\n\n  toString() {\n    return `${this.x}:${this.y}:${this.z}`\n  }\n\n  constructor(public x: number, public y: number, public z: number, public costs = 1) { }\n}\n\nconst cubeDirections = [\n  new Cube(+1, -1, 0),\n  new Cube(+1, 0, -1),\n  new Cube(0, +1, -1),\n  new Cube(-1, +1, 0),\n  new Cube(-1, 0, +1),\n  new Cube(0, -1, +1),\n];\n","import {Cube} from './cube/cube';\nimport {range as r} from '../arrays';\nimport { SimpleCoords } from '../game';\n\nexport interface Coords {\n  row: number;\n  col: number;\n}\nexport interface FuzzyCoords {\n  row?: number;\n  col?: number;\n}\n\nexport function overlappingCoord(a: Coords, b: FuzzyCoords | null) {\n  if (!b) return false;\n  if (a.col === b.col || !b.col) {\n    if (a.row === b.row) return true;\n  }\n  if (a.row === b.row || !b.row) {\n    if (a.col === b.col) return true;\n  }\n\n  return false;\n}\n\nexport function euclidPointDistance(a: Coords, b: Coords) {\n  return Math.sqrt(Math.pow(b.col - a.col, 2) + Math.pow(b.row - a.row, 2));\n}\n\nexport function manhattanPointDistance(a: Coords, b: Coords) {\n  return Math.abs(Math.abs(a.col - b.col) + Math.abs(a.row - b.row));\n}\n\n\nconst neigboursMaps = {\n  manhattan: [\n    { row: +0, col: -1 },\n    { row: +1, col: +0 },\n    { row: +0, col: +1 },\n    { row: -1, col: +0 },\n  ],\n  euclid: [\n    { row: +1, col: -1 },\n    { row: -1, col: +1 },\n    { row: +1, col: +0 },\n    { row: +0, col: +1 },\n    { row: -1, col: +0 },\n    { row: +0, col: -1 },\n    { row: -1, col: -1 },\n    { row: +1, col: +1 },\n  ]\n}\n\nexport const SimpleCoordsEquals = (a: SimpleCoords, b: SimpleCoords) =>\n  a.col.toString() === b.col.toString() && a.row.toString() === b.row.toString()\n\nexport class Position implements Coords {\n  vector(to: Position) {\n    return new Position(to.row - this.row, to.col - this.col);\n  }\n  toCube() {\n    //const x = this.col;\n    //const z = this.row - (this.col + (this.col & 1)) / 2;\n    //const y = -x - z;\n    const x = this.col - (this.row + (this.row&1)) / 2\n    const z = this.row\n    const y = -x - z;\n    return new Cube(x, y, z);\n  }\n\n  toCoords() {\n    const {row, col} = this;\n    return {col, row};\n  }\n\n  neighbor(direction: number) {\n    const neighbour = p(neigboursMaps[this.system][direction]);\n    neighbour.system = this.system;\n    return this.add(neighbour);\n  }\n\n  neighbors() {\n    return r(0, neigboursMaps[this.system].length - 1).map((dir) => this.neighbor(dir));\n  }\n\n  distance(other: Position) {\n    return euclidPointDistance(this, other);\n  }\n  manhattanDistance(other: Position) {\n    return manhattanPointDistance(this, other);\n  }\n\n  add(transpose: Position) {\n    const {col, row} = this;\n    return new Position(row + transpose.row, col + transpose.col, this.system);\n  }\n  remove(prevPosition: Position) {\n    const {col, row} = this;\n    return new Position(row - prevPosition.row, col - prevPosition.col, this.system);\n  }\n\n  equals(other?: Position | null) {\n    return (other !== undefined && other !== null) && other.col.toString() === this.col.toString() && other.row.toString() === this.row.toString();\n  }\n\n  toString() {\n    return `${this.col}:${this.row}`;\n  }\n\n  toEuclidPosition() {\n    return new Position(this.row, this.col, \"euclid\");\n  }\n  toManhattanPosition() {\n    return new Position(this.row, this.col, \"manhattan\");\n  }\n\n  static fromString(val?: string | null) {\n    if (!val) return null;\n    const [col, row] = val.split(':').map((i) => parseInt(i, 10));\n    return new Position(row, col);\n  }\n\n  constructor(\n    public row: number,\n    public col: number,\n    public system: \"manhattan\" | \"euclid\" = \"manhattan\"\n  ) {}\n}\n\nexport const p = ({row, col}: {row: number; col: number}) =>\n  new Position(row, col);\n\nexport const positionFromAnyPosition = ({\n  row,\n  col,\n}: {\n  row: number;\n  col: number;\n}) => new Position(row, col);\n\n\n","export function generateUUID() { // Public Domain/MIT\n    var d = new Date().getTime();//Timestamp\n    var d2 = (performance && performance.now && (performance.now()*1000)) || 0; //Time in microseconds since page-load or 0 if unsupported\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random() * 16;//random number between 0 and 16\n        if(d > 0){//Use timestamp until depleted\n            r = (d + r)%16 | 0;\n            d = Math.floor(d/16);\n        } else {//Use microseconds since page-load if supported\n            r = (d2 + r)%16 | 0;\n            d2 = Math.floor(d2/16);\n        }\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n}","\n\nexport const texts = {\n    resources: {\n        stone: {\n            default: \"resources.stone\",\n            de: \"Stein\",\n            en: \"Stone\",\n        },\n        log: {\n            default: \"resources.log\",\n            de: \"Holz\",\n            en: \"Wood\",\n        },\n        grain: {\n            default: \"resources.grain\",\n            de: \"Mehl\",\n            en: \"Flour\",\n        },\n        hay: {\n            default: \"resources.hay\",\n            de: \"Getreide\",\n            en: \"Hay\",\n        },\n        iron: {\n            default: \"resources.iron\",\n            de: \"Eisen\",\n            en: \"Iron\",\n        },\n    },\n    assets: {\n        wagon: {\n            default: \"assets.wagon\",\n            de: \"Wagen\",\n            en: \"Wagon\"\n        },\n        knight: {\n            default: \"assets.knight\",\n            de: \"Ritter\",\n            en: \"Knight\",\n        },\n        castle: {\n            build: {\n                default: \"assets.castle.build\",\n                de: \"Bauen\",\n                en: \"Build\",\n            }\n        },\n        dices: {\n            standard: {\n                name: {\n                    default: \"assets.dices.standard.name\",\n                    de: \"Standardwaffe\",\n                    en: \"Standardweapon\",\n                },\n                story: {\n                    default: \"assets.dices.standard.story\",\n                    de: \"Eine faire, ausgewogene Waffe die jeder Ritter haben sollte\",\n                    en: \"A fair, well-balanced weapon that every knight should have\",\n                }\n            },\n            mightyBlowOfBetrayal: {\n                name: {\n                    default: \"assets.dices.mightyBlowOfBetrayal.name\",\n                    de: \"Mchtiger Schlag des Betrugs\",\n                    en: \"Mighty blow of betrayal\",\n                },\n                story: {\n                    default: \"assets.dices.mightyBlowOfBetrayal.story\",\n                    de: \"Eine Waffe, die bis zu 12 Schaden verursachen kann, doch auch eine hohe Wahrscheinlichkeit hat gar keinen Schaden zu verursachen, oder sogar den Ritter selbst zu verletzen!\",\n                    en: \"A weapon that can inflict up to 12 damage, but also has a high chance of inflicting no damage, or even injuring the knight himself\",\n                }\n            },\n            smallCastleDefence: {\n                name: {\n                    default: \"assets.dices.smallCastleDefence.name\",\n                    de: \"Verteidigungswaffen der kleinen Burg\",\n                    en: \"Defensive weapons of the small castle\",\n                },\n                story: {\n                    default: \"assets.dices.smallCastleDefence.story\",\n                    de: \"Schon die kleine Burg hat mchtige Verteidigungswaffen, die viele Angriffe abwehren kann. Nur eine mchtige Armee wird es schaffen, diese Verteidigung zu berwinden.\",\n                    en: \"The small castle has mighty defensive weapons so that many attacks can be thwarted. Only a mighty army can defeat it.\",\n                }\n            }\n        },\n        properties: {\n            life: {\n                default: \"assets.properties.life\",\n                de: \"<strong>Leben</strong> ${0} von ${1}\",\n                en: \"<strong>Life</strong> ${0} of ${1}\",\n            },\n            actions: {\n                default: \"assets.properties.actions\",\n                de: \"<strong>Aktionen</strong> ${0} von ${1}\",\n                en: \"<strong>Actions</strong> ${0} of ${1}\",\n                move: {\n                    default: \"assets.properties.actions.move\",\n                    de: \"Bewegen\",\n                    en: \"Move\",\n                },\n                attack: {\n                    default: \"assets.properties.actions.attack\",\n                    de: \"Angreifen\",\n                    en: \"Attack\",\n                },\n                fortify: {\n                    default: \"assets.properties.actions.fortify\",\n                    de: \"Verteidigen\",\n                    en: \"Fortify\",\n                },\n                load: {\n                    default: \"assets.properties.actions.load\",\n                    de: \"Laden/Entladen\",\n                    en: \"Load/Unload\",\n                },\n                build: {\n                    knight: {\n                        default: \"assets.properties.actions.build.knight\",\n                        de: \"Ritter bauen\",\n                        en: \"Build knight\",\n                    },\n                    wagon: {\n                        default: \"assets.properties.actions.build.wagon\",\n                        de: \"Wagen bauen\",\n                        en: \"Build wagon\",\n                    },\n                    iron: {\n                        default: \"assets.properties.actions.build.iron\",\n                        de: \"Eisen bauen\",\n                        en: \"Build iron\",\n                    },\n                    castle_medium: {\n                        default: \"assets.properties.actions.build.castle_medium\",\n                        de: \"Mittlere Burg bauen\",\n                        en: \"Build medium castle\",\n                    },\n                    castle_large: {\n                        default: \"assets.properties.actions.build.castle_large\",\n                        de: \"Groe Burg bauen\",\n                        en: \"Build large castle\",\n                    },\n                    lumberjack_small: {\n                        default: \"assets.properties.actions.build.lumberjack_small\",\n                        de: \"Baue einen Holzfller (klein)\",\n                        en: \"Build Lumberjack (small)\",\n                    },\n                    mine_small: {\n                        default: \"assets.properties.actions.build.mine_small\",\n                        de: \"Baue eine Mine (klein)\",\n                        en: \"Build Mine (small)\",\n                    }\n                }\n            }\n        }\n    }\n}","import {texts} from \"./texts\"\n\ntype Text = {\n    default: string;\n    de: string;\n    en: string;\n    [key: string]: any;\n};\n\nexport function getLang() {\n    return document.documentElement.lang || \"en\";\n}\n\nexport type Language = \"de\" | \"en\";\n\nexport function setLanguage(language: Language) {\n    document.documentElement.lang = language;\n}\n\nfunction selectElementInObjectByArray(object: {[key: string]: any}, array: string[]): Text | undefined {\n    if (array.length === 0) {\n        return object as Text;\n    } else if (object[array[0]] === undefined) {\n        return undefined;\n    } else {\n        return selectElementInObjectByArray(object[array[0]], array.slice(1));\n    }\n}\n\nexport function getText(key: string[], ...args: string[]): string {\n    const text = selectElementInObjectByArray(texts, key)?.[getLang()] as string;\n    if (!text) {\n        return key.join(\".\");\n    }\n    return text.replace(/\\$\\{(\\d+)\\}/g, (_, index) => args[index]);\n}\n\nexport function text(key: Text, ...args: any[]): string {\n    const text = key[getLang()] as string;\n    if (!text) {\n        return key.default;\n    }\n    return text.replace(/\\$\\{(\\d+)\\}/g, (_, index) => args[index] as string);\n}\n\nexport {texts}","import { text, texts } from \"../../../internationalization\";\nimport { Dice } from \"./dice\";\n\ntype TranslationElement = {\n    default: string,\n    de: string,\n    en: string,\n    [key: string]: string\n}\ntype DiceStory = {\n    name: TranslationElement,\n    story: TranslationElement,\n}\n\nfunction getTexts(key: DiceStory): {name: string, story: string} {\n    return {\n        name: text(key.name),\n        story: text(key.story),\n    }\n}\n\nexport function Standard(): Dice {\n    return {\n        ...getTexts(texts.assets.dices.standard),\n        sides: [\n            { value: 3 },\n            { value: 3 },\n            { value: 3 },\n            { value: 4 },\n            { value: 5 },\n            { value: 6 },\n        ]\n    }\n}\n\nexport function MightyBlowOfBetrayal(): Dice {\n    return {\n        ...getTexts(texts.assets.dices.mightyBlowOfBetrayal),\n        sides: [\n            { value: -3 },\n            { value: 0 },\n            { value: 0 },\n            { value: 6 },\n            { value: 12 },\n        ]\n    }\n}\n\nexport function SmallCastleDefence(): Dice {\n    return {\n        ...getTexts(texts.assets.dices.smallCastleDefence),\n        sides: [\n            { value: 12 },\n            { value: 12 },\n            { value: 16 },\n            { value: 16 },\n            { value: 21 },\n        ]\n    }\n\n}","import { Dice } from \"./dice\";\n\nexport * from \"./Dices\"\n\nfunction r(d: Dice) {\n    return d.sides[Math.floor(Math.random() * d.sides.length)].value\n}\n\nexport function roll(dices: Dice[]) {\n    return dices.reduce((sum, dice) => sum + r(dice), 0)\n}","import { ActionableAsset, FightingAsset, HealthyAsset, PositionedAsset, ResourceGeneratingBuilding, SimpleCoords, Team } from \"../../world\";\nimport { SpriteSet } from \"../../world/sprite\";\nimport * as dices from \"../dices\"\n\ntype Castle = SpriteSet & ResourceGeneratingBuilding & FightingAsset & HealthyAsset & ActionableAsset\ntype PositionedCastle = Castle & PositionedAsset\n\nexport const SmallCastle: Castle = {\n    id: \"building-castle-small\",\n    name: \"Small Castle\",\n    team: \"\" as Team,\n    occurences: {\n        min: 1\n    },\n    dices: [dices.SmallCastleDefence()],\n    health: {\n        current: 60,\n        max: 60,\n    },\n    actions: {\n        current: 2,\n        max: 2\n    },\n    resources: {\n        grain: {generatedResource: 10},\n        hay: { generatedResource: 10 },\n        stone: { generatedResource: 10 },\n        iron: { generatedResource: 10 },\n    }\n}\n\nexport const CreateSmallCastle = ({ team, row, col }: {team: Team} & SimpleCoords): PositionedCastle => ({\n    ...SmallCastle,\n    health: {...SmallCastle.health},\n    team,\n    row, \n    col,\n    actions: {...SmallCastle.actions},\n    resources: {\n        grain: {...SmallCastle.resources.grain!},\n        hay: { ...SmallCastle.resources.hay! },\n        stone: { ...SmallCastle.resources.stone! },\n        iron: { ...SmallCastle.resources.iron! },\n    },\n})","import { PlayerAsset } from \"..\";\nimport { generateUUID } from \"../../math/guid\";\nimport { Team } from \"../world\";\nimport { SmallCastle } from \"./buildings/Castles\"\n\ntype Props = {\n    rows: number,\n    cols: number\n}\nconst region: {[key:string]: (array: PlayerAsset[][]) => number} = {\n    \"green\": (array) => \n        Math.max(array.length * 0.75,  Math.round(Math.random() * (array.length - 1))),\n    \"red\": (array) => \n    Math.min(array.length * 0.25, Math.round(Math.random() * (array.length - 1)))\n}\n\nexport const getPlayerStartAssets = (team: Team, props: Props) => {\n    const arrayForBuildings: PlayerAsset[][] = new Array(props.rows * props.cols).map(() => []);\n    ([SmallCastle]).forEach(building => {\n        let buildings =\n            building.occurences.factor\n                ? Math.max(building.occurences.min, arrayForBuildings.length / building.occurences.factor)\n                : building.occurences.min\n        while (buildings > 0) {\n            const nextIndex = region[team](arrayForBuildings)\n            arrayForBuildings[nextIndex] = [\n                ...(arrayForBuildings[nextIndex] ?? []),\n                { \n                    ...building,\n                    name: building.id, \n                    team, \n                    id: generateUUID(), \n                }\n            ]\n            buildings--\n        }\n    })\n    return arrayForBuildings\n}\n\nexport const getPlayerStartResources = () => {\n    return [SmallCastle]\n}","import { Dice } from \"../player/dices/dice\"\n\nexport const teams = (): Team[] => [\"green\", \"red\"]\nexport type Team = \"green\" | \"red\"\n\nexport type Players = {\n    [team in Team]: Player\n}\n\nexport const RESOURCES = [\"hay\", \"grain\", \"iron\", \"wood\", \"stone\"]\n\ntype ResourcesGenerator = {\n    hay?: number\n    grain?: number\n    iron?: number\n    wood?: number\n    stone?: number\n    generatedResource: number\n}\n\nexport type Resources = {\n    hay: number\n    grain: number\n    iron: number\n    wood: number\n    stone: number\n}\n\nexport type ResourceGenerator = {\n    hay?: ResourcesGenerator\n    grain?: ResourcesGenerator\n    iron?: ResourcesGenerator\n    wood?: ResourcesGenerator\n    stone?: ResourcesGenerator\n}\n\nexport type ResourceGeneratingBuilding = {\n    resources: ResourceGenerator\n} & Asset\nexport type PotentiallyResourceGeneratingBuilding = {\n    resources?: ResourceGenerator\n} & Asset\n\nexport function isResourceGeneratingAsset(asset?: Asset): asset is ResourceGeneratingBuilding {\n    return (asset !== undefined\n        && (asset as ResourceGeneratingBuilding)?.resources !== undefined)\n}\n\n\nexport type Player = {\n    resources: Resources\n}\n\nexport type Asset = {\n    /**\n     * The unique id of the asset in the world\n     */\n    id: string\n    /**\n     * The name of the asset/sprite\n     */\n    name: string\n    team?: Team\n}\n\nexport type PositionedAsset = Asset & SimpleCoords\n\nexport function isPositionedAsset(asset?: Asset): asset is PositionedAsset {\n    return (asset !== undefined && (asset as PositionedAsset)?.row >= 0 && (asset as PositionedAsset)?.col >= 0)\n}\n\nexport type PlayerAsset = PotentiallyResourceGeneratingBuilding & {\n    team: Team\n}\n\nexport type Health = {\n    current: number\n    max: number\n}\nexport type Actions = {\n    current: number\n    max: number\n}\n\nexport type Movement = {\n    points: number\n}\n\nexport type ActionableAsset = PlayerAsset & {\n    actions: Actions\n}\n\nexport function isActionableAsset(asset?: Asset): asset is ActionableAsset {\n    return (asset !== undefined && (asset as ActionableAsset)?.actions !== undefined)\n}\n\nexport type HealthyAsset = PlayerAsset & {\n    health: Health\n}\n\nexport function isHealthyAsset(asset?: Asset): asset is HealthyAsset {\n    return (asset !== undefined && (asset as HealthyAsset)?.health !== undefined)\n}\n\nexport type MoveableAsset = PlayerAsset & ActionableAsset & HealthyAsset & {\n    movement: Movement\n}\n\nexport function isMoveableAsset(asset: Asset): asset is MoveableAsset {\n    return (asset && (asset as MoveableAsset)?.actions?.max > 0)\n}\n\nexport type FightingAsset = {\n    dices: Dice[]\n}\n\nexport type FigherAsset = MoveableAsset & FightingAsset\n\nexport function isFighterAsset(asset: Asset): asset is FigherAsset {\n    return (asset && (asset as FigherAsset)?.dices?.length > 0)\n}\nexport function isFightingAsset(asset: Asset): asset is FigherAsset {\n    return (asset && (asset as FigherAsset)?.dices?.length > 0)\n}\n\nexport type SimpleCoords = {\n    row: number\n    col: number\n}","import { Tile, World } from \".\"\nimport { generateUUID } from \"../../math/guid\"\nimport { SpriteSet } from \"./sprite\"\nimport { Asset, isResourceGeneratingAsset, ResourceGeneratingBuilding, ResourceGenerator, Team } from \"./types\"\n\nexport const Mill: SpriteSet & BuildingAsset & ResourceGeneratingBuilding = {\n    id: \"building-mill\",\n    name: \"Mill\",\n    occurences: {\n        min: 1\n    },\n    resources: {\n        grain: {hay: 100, generatedResource: 50},\n        hay: { generatedResource: 50 }\n    }\n}\n\n\ntype DistributedSpriteSet = SpriteSet & {\n    min: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9,\n    max: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10\n}\n\nfunction isDistributedSpriteSet(sprite: SpriteSet): sprite is DistributedSpriteSet {\n    return sprite !== undefined && (sprite as DistributedSpriteSet).max > 0\n}\n\nexport type BuildingAsset = Asset\n\nconst buildings: SpriteSet[] | DistributedSpriteSet[] = [\n    {...Mill, min: 0, max: 2},\n    {...Mill, min: 8, max: 10},\n]\n\ntype Props = {\n    rows: number,\n    cols: number\n}\n\nconst lazyRandom = (size: number) => Math.round(Math.random() * (size - 1))\n\nexport const getRandomLocation = ({min, max}: DistributedSpriteSet, rows: number, cols: number) => {\n    const rel = (number: number) => rows * cols * (number / 10)\n    return Math.floor(Math.random() * (rel(max) - rel(min)) + rel(min))\n}\n\nexport const getBuildingsForMap = (props: Props) => {\n    const arrayForBuildings: BuildingAsset[][] = new Array(props.rows * props.cols).map(() => [])\n    buildings.forEach(building => {\n        let buildings =\n            building.occurences.factor\n                ? Math.max(building.occurences.min, arrayForBuildings.length / building.occurences.factor)\n                : building.occurences.min\n        while (buildings > 0) {\n            const position = isDistributedSpriteSet(building) \n                ? getRandomLocation(building, props.rows, props.cols)\n                : lazyRandom(arrayForBuildings.length)\n            arrayForBuildings[position] = [\n                ...(arrayForBuildings[position] ?? []),\n                { ...building, name: building.id, id: generateUUID() }\n            ]\n            buildings--\n        }\n    })\n    return arrayForBuildings;\n}\n\nexport const getResourceGeneratingBuildings = (world: World, team: Team): ResourceGeneratingBuilding[] => \n    world?.map?.reduce((into: ResourceGeneratingBuilding[], row: Tile[]) => \n        [\n            ...into,\n            ...row.reduce((into, col) => [\n                ...into, \n                ...col.elements\n                    .filter(isResourceGeneratingAsset)\n                    .filter((building: Asset) => building.team === team)\n            ], [] as ResourceGeneratingBuilding[])\n        ]\n    , [] as ResourceGeneratingBuilding[])\n\n\nexport const generateResources = (...buildings: (BuildingAsset & ResourceGeneratingBuilding)[]) => {\n    return buildings.reduce((result, building) => {\n        result.push(...Object.entries(building.resources).map(([resource, {generatedResource, ...resources}]) => {\n            let resourceGenerator: ResourceGenerator = {};\n            (resourceGenerator as any)[resource] = {...resources, generatedResource};\n            const result: ResourceGeneratingBuilding = {\n                ...building,\n                resources: resourceGenerator\n            } as ResourceGeneratingBuilding;\n            return result;\n        }));\n        return result;\n    }, [] as ResourceGeneratingBuilding[]).filter(Boolean);\n}","import { Sprite } from \"./sprite\"\n\nexport type Terrain = {\n    sprite: Sprite, \n    movementCosts: number | undefined,\n    defense: number\n}\n\n// x=122\n// y=122\n\nexport const TerrainPresets: {[key:string]: Terrain} = {\n    \"gras\" : {\n        sprite: {\n            name: \"gras\",\n            file: \"hexagonTerrain_sheet\",\n            x: 414,\n            y: 1906\n        },\n        movementCosts: 1,\n        defense: 0\n    },\n    \"desert\" : {\n        sprite: {\n            name: \"desert\",\n            file: \"hexagonTerrain_sheet\",\n            x: 902,\n            y: 627\n        },\n        movementCosts: 4,\n        defense: 0\n    },\n    \"mud\" : {\n        sprite: {\n            name: \"mud\",\n            file: \"hexagonTerrain_sheet\",\n            x: 658,\n            y: 912\n        },\n        movementCosts: 4,\n        defense: 1\n    },\n    \"muddyHills\" : {\n        sprite: {\n            name: \"muddyHills\",\n            file: \"hexagonTerrain_sheet\",\n            x: 780,\n            y: 627\n        },\n        movementCosts: 8,\n        defense: 3\n    },\n    \"forest\" : {\n        sprite: {\n            name: \"forest\",\n            file: \"hexagonTerrain_sheet\",\n            x: 536,\n            y: 912\n        },\n        movementCosts: 8,\n        defense: 3\n    },\n    \"mountain\" : {\n        sprite: {\n            name: \"mountain\",\n            file: \"hexagonTerrain_sheet\",\n            x: 536,\n            y: 1195\n        },\n        movementCosts: 10,\n        defense: 9\n    }\n}\n\nexport const randomTerrain = () => {\n    const keys = Object.keys(TerrainPresets)\n    return TerrainPresets[keys[Math.floor(Math.random() * (keys.length))]] ?? TerrainPresets.mountain\n}","import { defineHormone, releaseHormone } from \"organismus\";\nimport { range } from \"../../arrays\";\nimport { Position } from \"../../math/position\";\nimport { getPlayerStartAssets } from \"../player/load\";\nimport { getBuildingsForMap } from \"./buildings\";\nimport { randomTerrain, Terrain } from \"./terrain\";\nimport { Asset, Team } from \"./types\";\n\ntype Props = {\n    rows: number,\n    cols: number\n}\n\nexport type Tile = {\n    position: Position,\n    terrain: Terrain,\n    elements: Asset[]\n}\n\ntype Map = Tile[][]\n\nexport type World = {\n    map: Map,\n    teams: Team[]\n}\n\nexport const WorldLoaded = defineHormone<World>(\"game/world/worldLoaded\")\n\nexport const StartGame = defineHormone(\"game/start\")\nexport const SidebarLoaded = defineHormone(\"game/load/sidebar\")\n\nconst loadMapAssets = ({rows, cols}: Props) => {\n    const buildings = getBuildingsForMap({ rows, cols })\n    return buildings\n}\n\nconst loadPlayerAssets = (team: Team, {rows, cols}: Props) => {\n    return getPlayerStartAssets(team, { rows, cols })\n}\n\nconst getNextElement = (array: Asset[][], row: number, col: number) => {\n    const results = array.pop() ?? []\n    return results.map(result => ({...result, row, col})) as Asset[]\n}\n\nexport const load = async ({rows, cols}: Props) => {\n    const mapAssets = loadMapAssets({ rows, cols })\n    const playerAssets = loadPlayerAssets(\"green\", { rows, cols })\n    const redAssets = loadPlayerAssets(\"red\", { rows, cols })\n    const map = range(0, rows - 1)\n        .map((row) => \n            range(0, cols - 1)\n                .map((col) => ({ \n                    position: new Position(row, col), \n                    terrain: randomTerrain(),\n                    elements: [\n                        ...(getNextElement(mapAssets, row, col)), \n                        ...(getNextElement(playerAssets, row, col)),\n                        ...(getNextElement(redAssets, row, col)),\n                    ]\n                }))\n        ) as Map;\n    await releaseHormone(WorldLoaded, {map, teams: [\"red\", \"green\"]});\n    return map\n}","// this is just to make it clear that we are using a 1-based array; changing it to zero won't work without code changes\nconst ROOT_INDEX = 1;\n\nexport default class Heapify<T> {\n    _keys: T[];\n    _priorities: Uint32Array;\n\n    length: number;\n\n    constructor(private capacity = 4086,\n        PrioritiesBackingArrayType = Uint32Array) {\n\n        this.capacity = capacity;\n        this._keys = [];\n        this._priorities = new PrioritiesBackingArrayType(capacity + ROOT_INDEX);\n        this.length = 0;\n    }\n\n    clear() {\n        this.length = 0;\n    }\n\n    /**\n     * Bubble an item up until its heap property is satisfied.\n     *\n     * @param {Number} index\n     * @private\n     */\n    bubbleUp(index: number) {\n        const key = this._keys[index];\n        const priority = this._priorities[index];\n\n        while (index > ROOT_INDEX) {\n            // get its parent item\n            const parentIndex = index >>> 1;\n            if (this._priorities[parentIndex] <= priority) {\n                break;  // if parent priority is smaller, heap property is satisfied\n            }\n            // bubble parent down so the item can go up\n            this._keys[index] = this._keys[parentIndex];\n            this._priorities[index] = this._priorities[parentIndex];\n\n            // repeat for the next level\n            index = parentIndex;\n        }\n\n        // we finally found the place where the initial item should be; write it there\n        this._keys[index] = key;\n        this._priorities[index] = priority;\n    }\n\n    /**\n     * Bubble an item down until its heap property is satisfied.\n     *\n     * @param {Number} index\n     * @private\n     */\n    bubbleDown(index: number) {\n        const key = this._keys[index];\n        const priority = this._priorities[index];\n\n        const halfLength = ROOT_INDEX + (this.length >>> 1);  // no need to check the last level\n        const lastIndex = this.length + ROOT_INDEX;\n        while (index < halfLength) {\n            const left = index << 1;\n            if (left >= lastIndex) {\n                break;  // index is a leaf node, no way to bubble down any further\n            }\n\n            // pick the left child\n            let childPriority = this._priorities[left];\n            let childKey = this._keys[left];\n            let childIndex = left;\n\n            // if there's a right child, choose the child with the smallest priority\n            const right = left + 1;\n            if (right < lastIndex) {\n                const rightPriority = this._priorities[right];\n                if (rightPriority < childPriority) {\n                    childPriority = rightPriority;\n                    childKey = this._keys[right];\n                    childIndex = right;\n                }\n            }\n\n            if (childPriority >= priority) {\n                break;  // if children have higher priority, heap property is satisfied\n            }\n\n            // bubble the child up to where the parent is\n            this._keys[index] = childKey;\n            this._priorities[index] = childPriority;\n\n            // repeat for the next level\n            index = childIndex;\n        }\n\n        // we finally found the place where the initial item should be; write it there\n        this._keys[index] = key;\n        this._priorities[index] = priority;\n    }\n\n    /**\n     * @param {*} key the identifier of the object to be pushed into the heap\n     * @param {Number} priority 32-bit value corresponding to the priority of this key\n     */\n    push(key: T, priority = 0) {\n        if (this.length === this.capacity) {\n            throw new Error(\"Heap has reached capacity, can't push new items\");\n        }\n        const pos = this.length + ROOT_INDEX;\n        this._keys[pos] = key;\n        this._priorities[pos] = priority;\n        this.bubbleUp(pos);\n        this.length++;\n    }\n\n    pop(): T {\n        const key = this._keys[ROOT_INDEX];\n\n        this.length--;\n\n        if (this.length > 0) {\n            this._keys[ROOT_INDEX] = this._keys[this.length + ROOT_INDEX];\n            this._priorities[ROOT_INDEX] = this._priorities[this.length + ROOT_INDEX];\n\n            this.bubbleDown(ROOT_INDEX);\n        }\n\n        return key;\n    }\n\n    peekPriority() {\n        return this._priorities[ROOT_INDEX];\n    }\n\n    peek() {\n        return this._keys[ROOT_INDEX];\n    }\n\n    toString() {\n        if (this.length === 0) {\n            return \"(empty queue)\";\n        }\n\n        const result = Array(this.length - ROOT_INDEX);\n        for (let i = 0; i < this.length; i++) {\n            result[i] = this._priorities[i + ROOT_INDEX];\n        }\n        return `[${result.join(\" \")}]`;\n    \n    }\n\n    get [Symbol.toStringTag]() {\n        return \"Heapify\";\n    }\n\n    * [Symbol.iterator]() {\n        for (let i = 0; i < this.length; i++) {\n            const priority = this._priorities[i + ROOT_INDEX];\n            const key = this._keys[i + ROOT_INDEX];\n            yield [key, priority];\n        }\n    }\n\n    * keys() {\n        for (let i = 0; i < this.length; i++) {\n            yield this._keys[i + ROOT_INDEX];\n        }\n    }\n\n    * priorities() {\n        for (let i = 0; i < this.length; i++) {\n            yield this._priorities[i + ROOT_INDEX];\n        }\n    }\n}","import Heapify from \"./heapify\";\nimport { Cube } from \"../cube/cube\";\nimport { Position } from \"../position\";\nimport { PathResult } from \"./type\";\n\nconst id = (c: Cube) =>  c.toPosition().toString();\n\nexport function isReachable(start: Cube, goal: Cube, map: Cube[], isBlocked: (p: Cube) => boolean, range: number) {\n  return shortestPath(start, goal, map, isBlocked, range).path.length > 0;\n}\n\nexport const shortestPath = (start: Cube, goal: Cube, map: Cube[], isBlocked: (p: Cube) => boolean, range: number): PathResult => {\n  const frontier = new Heapify();\n  frontier.push(start, 0);\n  const cameFrom: { [key: string]: string | undefined } = {};\n  const costSoFar: { [key: string]: number } = {};\n  const visited: string[] = [];\n  let foundPath = false;\n  cameFrom[id(start)] = id(start);\n  costSoFar[id(start)] = 0;\n\n  if(start.equals(goal)) return {\n    path: []\n  }\n\n  if (isBlocked(goal)) return {\n    path : []\n  } \n\n  while (frontier.length > 0) {\n    const current = frontier.pop() as Cube;\n    if (current.equals(goal)){ foundPath = true; break; }\n    if (frontier.length > 1000) {\n      throw new Error(\"No what kinda path are you searching for?!\")\n    }\n\n    visited.push(current.toPosition().toString())\n\n    for (const next of current.neighbors(map).filter(neighbour => !cameFrom[id(neighbour)]).map(neighbour => \n        map.find(i => i.equals(neighbour)) ?? neighbour)) {\n      if (isBlocked(next)) continue;\n      if (!visited.some(i => i === id(next))) visited.push(id(next))\n\n      const newCost = costSoFar[id(current)] + next.cost();\n      if (range < newCost) continue;\n      if (!costSoFar[id(next)] || newCost < costSoFar[id(next)]) {\n        costSoFar[id(next)] = newCost;\n        frontier.push(next, newCost + goal.heuristic(next));\n        cameFrom[id(next)] = current.toPosition().toString();\n      }\n    }\n  }\n\n  const startPosition = start.toPosition();\n  if (!foundPath) return { path: [], visited}\n  let current: Position | null = goal.toPosition();\n  const path: Position[] = [];\n  do {\n    path.push(current)\n    current = Position.fromString(cameFrom[current.toString()])\n  } while (current !== null && !current.equals(startPosition))\n\n  return {path : path.reverse(), visited};\n};\n\nexport const CubeAStarPathTo = shortestPath\n\nexport const CubeAStarDistance = (start: Cube, goal: Cube, map: Cube[], isBlocked: (p: Cube) => boolean, range: number) => {\n  return shortestPath(start, goal, map, isBlocked, range).path.length\n}\n","import { defineHormone, defineSingleHormone } from \"organismus\";\nimport { Asset } from \".\";\nimport { Dice } from \"../player/dices/dice\";\nimport { BuildingAsset } from \"./buildings\";\nimport { ActionableAsset, FigherAsset, MoveableAsset, Player, ResourceGeneratingBuilding, Resources, SimpleCoords, Team } from \"./types\";\n\nexport type Abort = boolean\nexport const Abort = defineSingleHormone<Abort>(\"action/abort\")\n\nexport type PlayerUpdate = Player\nexport const PlayerUpdate = defineHormone<PlayerUpdate>(\"player/update\")\n\nexport type RequestSelectCoords = SimpleCoords & {\n    item: string,\n    payload?: Asset\n};\nexport const RequestSelectCoords = defineSingleHormone<RequestSelectCoords>(\"player/request/select\")\n\nexport type SelectedItem<T> = SimpleCoords & {\n    item: string,\n    payload?: T\n}\nexport const ItemSelected = defineHormone<SelectedItem<unknown>>(\"player/buildings/item/selected\")\n\nexport type ItemMovedAsset = {\n    asset: MoveableAsset\n    location: SimpleCoords\n}\nexport const ItemMoved = defineHormone<ItemMovedAsset>(\"player/item/moved\")\n\nexport type AssetCreated = SimpleCoords & {\n    origin: BuildingAsset & ActionableAsset\n    team: Team\n}\nexport const KnightCreated = defineHormone<AssetCreated>(\"player/knights/created\")\nexport const WagonCreated = defineHormone<AssetCreated>(\"player/wagon/created\")\n\nexport const UpdateAllPlayerElements = defineHormone<Asset[]>(\"player/assets/loaded\")\n\nexport type PerformedAction = { item: ActionableAsset & SimpleCoords }\nexport const ActionPerformed = defineHormone<PerformedAction>(\"player/action/performed\")\n\nexport type CheckPlayerHasActionsLeft = {}\nexport const CheckPlayerHasActionsLeft = defineHormone<CheckPlayerHasActionsLeft>(\"turn/player/actions/hasLeft\")\nexport type PlayerNoActionsLeft = boolean\nexport const PlayerNoActionsLeft = defineSingleHormone<PlayerNoActionsLeft>(\"turn/player/actions/none\")\n\nexport type HexagonUpdatedPayload = SimpleCoords & {\n    elements: Asset[]\n}\nexport const HexagonUpdated = defineSingleHormone<HexagonUpdatedPayload>(\"map/hexagon/updated\", { readOnce: true })\n\nexport type MoveModeData = {\n    asset: MoveableAsset\n    start: SimpleCoords\n    inReach?: SimpleCoords[]\n    trail?: SimpleCoords[]\n    end?: SimpleCoords\n}\nexport const MoveModeActivate = defineHormone<MoveModeData>(\"modes/move/activate\")\nexport const MoveModeActivated = defineHormone<MoveModeData>(\"modes/move/activated\")\nexport const MoveModeDeactivate = defineHormone(\"modes/move/deactivate\")\nexport type MoveModeHovered = SimpleCoords\nexport const MoveModeTargetHovered = defineHormone<MoveModeHovered>(\"modes/move/hovered-target\")\nexport type MoveModeEndElement = SimpleCoords\nexport const MoveModeEnd = defineHormone<MoveModeEndElement>(\"modes/move/end\")\n\nexport type BuildWithWagon = {\n    asset: Asset | ResourceGeneratingBuilding\n    position: SimpleCoords\n}\nexport type BuildFailed = {\n    asset: Asset | ResourceGeneratingBuilding\n    position: SimpleCoords\n    reason: string\n}\nexport const BuildLumberjackSmall = defineHormone<BuildWithWagon>(\"modes/build/lumberjack-small\");\nexport const BuildLumberjackSmallSuccess = defineHormone<BuildWithWagon>(\"modes/build/lumberjack-small/success\");\nexport const BuildLumberjackSmallFailed = defineHormone<BuildFailed>(\"modes/build/lumberjack-small/failed\");\nexport const BuildMineSmall = defineHormone<BuildWithWagon>(\"modes/build/mine-small\");\nexport const BuildMineSmallSuccess = defineHormone<BuildWithWagon>(\"modes/build/mine-small/success\");\nexport const BuildMineSmallFailed = defineHormone<BuildFailed>(\"modes/build/mine-small/failed\");\n\nexport type BattleModeData = {\n    asset: MoveableAsset\n    start: SimpleCoords\n    range?: SimpleCoords[]\n    end?: SimpleCoords\n}\nexport const BattleModeActivate = defineHormone<BattleModeData>(\"modes/battle/activate\")\nexport const BattleModeActive = defineHormone<BattleModeData>(\"modes/battle/active\")\nexport type BattleModeEndElement = SimpleCoords\nexport const BattleModeEnd = defineHormone<BattleModeEndElement>(\"modes/battle/end\")\nexport const BattleModeDeactivate = defineHormone<BattleModeData>(\"modes/battle/deactivate\")\n\nexport type BattleStarted = {\n    location: SimpleCoords\n    attacker: FigherAsset[]\n    defender: FigherAsset[]\n}\nexport const BattleStarted = defineHormone<BattleStarted>(\"battle/started\")\n\ntype FigherInBattle = {\n    asset: FigherAsset,\n    dices: Dice[]\n}\nexport type BattleThrowDices = {\n    location: SimpleCoords\n    attacker: FigherInBattle\n    defender: FigherAsset\n}\nexport const BattleThrowDice = defineHormone<BattleThrowDices>(\"battle/dice/thrown\")\nexport type BattlePlayerAttacked = {\n    location: SimpleCoords\n    damage: number\n    attacker: FigherAsset\n    defender: FigherAsset\n}\nexport const BattlePlayerAttacked = defineHormone<BattlePlayerAttacked>(\"battle/player/attacked\")\n\nexport type AssetTaken = {\n    asset: Asset\n    transfered: {\n        from?: Team,\n        to: Team\n    }\n    by: FigherAsset\n    location: SimpleCoords\n    team: Team\n}\nexport const MillTakeover = defineHormone<AssetTaken>(\"mill/takeover\")\nexport const LumberjackTakeover = defineHormone<AssetTaken>(\"lumberjack/takeover\")\nexport const MineTakeover = defineHormone<AssetTaken>(\"mine/takeover\")\n\nexport type ModalBattleOpen = BattleStarted\nexport const ModalBattleOpen = defineHormone<ModalBattleOpen>(\"modal/battle/open\")\n\nexport type ModalDiceResultOpen = BattleStarted & {\n    defender_after: FigherAsset[]\n    attacker_after: FigherAsset[]\n    result: number\n}\nexport const ModalDiceResultOpen = defineHormone<ModalDiceResultOpen>(\"modal/dice-result/open\")\n\nexport type TurnStarted = {}\nexport const TurnStarted = defineHormone<TurnStarted>(\"turn/world/started\")\n\nexport type TurnAccepted = Team\nexport const TurnAccepted = defineHormone<TurnAccepted>(\"turn/world/accepted\")\n\nexport type TurnPlayerComplete = {}\nexport const TurnPlayerComplete = defineHormone<TurnPlayerComplete>(\"turn/player/complete\")\n\nexport type TurnsComplete = {}\nexport const TurnsComplete = defineHormone<TurnsComplete>(\"turn/world/complete\")\n\nexport type ResourcesGenerated = ResourceGeneratingBuilding\nexport const ResourcesGenerated = defineHormone<ResourcesGenerated>(\"resources/generated\")\n\nexport type ResourceGenerationComplete = { \n    team: Team \n    before: Resources,\n    after: Resources\n}\nexport const ResourceGenerationComplete = defineHormone<ResourceGenerationComplete>(\"resources/generation/complete\");\n\nexport type ResourceSummary = any;\nexport const ResourceSummary = defineHormone<ResourceSummary>(\"resources/summary\");\n\nexport type DistributeResources = {\n    team: Team,\n    resourcesToGenerate: ResourceGeneratingBuilding[]\n}\nexport const DistributeResources = defineHormone<DistributeResources>(\"resources/distribute\")\nexport const RequestUpdatedResources = defineHormone<{ team: Team }>(\"resources/distribute/request\")\nexport const UpdatedResources = defineHormone<DistributeResources>(\"resources/distribute/updated\")","import { player } from \"../../..\";\nimport { generateUUID } from \"../../../math/guid\";\nimport { FigherAsset, Resources, SimpleCoords, Team } from \"../../world\";\nimport { SpriteSet } from \"../../world/sprite\";\nimport * as dices from \"../dices\"\n\nexport const Knight: SpriteSet = {\n    id: \"player-knight\",\n    occurences: {\n        min: 0\n    }\n}\n\nexport const CreateKnight = ({ team, row, col }: {team: Team} & SimpleCoords): FigherAsset & SimpleCoords => ({ \n    id: generateUUID(), \n    name: player.knight.name, \n    team, \n    row, \n    col,\n    movement: {\n        points: 10\n    },\n    actions: {\n        current: 2,\n        max: 2\n    },\n    health: {\n        current: 10,\n        max: 10\n    },\n    dices: [ dices.Standard(), dices.MightyBlowOfBetrayal() ]\n})\n\nexport const costs = (): Resources => ({\n    grain: 100,\n    iron: 200,\n    hay: 0,\n    wood: 0,\n    stone: 0\n})\n","import { World, Team } from \".\";\nimport { Asset } from \"./types\";\n\nexport function findCoords(world: World, search: { name: string, team?: Team }) {\n    for (const row of world.map) {\n        const element = row.find(col => \n            col.elements.some(element => \n                element.name === search.name &&\n                (search.team === undefined || search.team === element.team)\n            )\n        )\n        if (element) return element.position\n    }\n    return null;\n}\n\nexport function findElement(world: World, search: { name: string, team?: Team }) {\n    if (!world || !world.map) return null;\n    const findElement = (element: Asset) => \n        element.name === search.name &&\n        (search.team === undefined || search.team === element.team)\n    \n    for (const row of world.map) {\n        const element = row.find(col => \n            col.elements.some(findElement)\n        )\n        if (element) return { ...element.position, element: element.elements.find(findElement)! }\n    }\n    return null;\n}\nexport function findAllElementsFromTeam(world: World, team: Team) {\n    if (!world || !world.map) return [];\n    const findElement = (element: Asset) => \n        team === element.team\n    \n    const results: Asset[] = []\n\n    for (const row of world.map) {\n        for (const col of row) {\n            results.push(...col.elements.filter(findElement))\n        }\n    }\n    return results;\n}","import { Asset } from \"../game\";\n\nexport function deepQuerySelector(element: Asset | undefined) {\n    if (!element) return undefined;\n    const hexagons = [...(document?.querySelector(\"the-mill\")?.shadowRoot?.\n        querySelector(\"world-map\")?.shadowRoot?.\n        querySelectorAll(\"hexagon-element\")\n        ?? [])\n    ]\n    return hexagons.find(hexagon =>\n        hexagon.shadowRoot?.querySelector(\"sprite-set\")?.querySelector(`[id=\"${element.id}\"]`));\n}\n\n(document as any).deepQuerySelector = deepQuerySelector;","import { player } from \"../../..\";\nimport { generateUUID } from \"../../../math/guid\";\nimport { MoveableAsset, Resources, SimpleCoords, Team } from \"../../world\";\nimport { SpriteSet } from \"../../world/sprite\";\n\nexport const Wagon: SpriteSet = {\n    id: \"player-wagon\",\n    occurences: {\n        min: 0\n    }\n}\n\nexport const costs = (): Resources => ({\n    grain: 50,\n    iron: 0,\n    hay: 0,\n    wood: 50,\n    stone: 0\n})\n\nexport const CreateWagon = ({ team, row, col }: {team: Team} & SimpleCoords): MoveableAsset & SimpleCoords => ({ \n    id: generateUUID(), \n    name: player.wagon.name, \n    team, \n    row, \n    col,\n    movement: {\n        points: 10\n    },\n    actions: {\n        current: 2,\n        max: 2\n    },\n    health: {\n        current: 10,\n        max: 10\n    }\n})\n","import { Terrain } from \"../../world/terrain\"\n\nexport function isTerrain(resource: Terrain, type: \"forest\" | \"mountain\"): boolean {\n    return resource.sprite.name === type;\n}","import { hypothalamus, releaseHormone } from \"organismus\";\nimport { PlayerAsset } from \".\";\nimport { buildings } from \"../../assets\";\nimport { Cube } from \"../../math/cube/cube\";\nimport { isReachable, shortestPath } from \"../../math/pathfinder/a\";\nimport { Position, SimpleCoordsEquals } from \"../../math/position\";\nimport { MoveModeActivate, HexagonUpdated, KnightCreated, MoveModeTargetHovered, MoveModeData, MoveModeEnd, MoveModeDeactivate, ItemMoved, BattleStarted, MillTakeover, ModalBattleOpen, BattleThrowDice, BattlePlayerAttacked, ModalDiceResultOpen, TurnStarted, TurnsComplete, TurnPlayerComplete, TurnAccepted, RequestSelectCoords, ItemSelected, BattleModeData, BattleModeActivate, BattleModeActive, BattleModeDeactivate, BattleModeEnd, CheckPlayerHasActionsLeft, PlayerNoActionsLeft, AssetTaken, UpdateAllPlayerElements, Abort, PlayerUpdate, WagonCreated, DistributeResources, ResourcesGenerated, ResourceGenerationComplete, ResourceSummary, BuildLumberjackSmall, BuildLumberjackSmallFailed, BuildLumberjackSmallSuccess, UpdatedResources, RequestUpdatedResources, MoveModeActivated, BuildMineSmall, BuildMineSmallFailed, BuildMineSmallSuccess, LumberjackTakeover, MineTakeover, ActionPerformed } from \"./events\";\nimport { SidebarLoaded, StartGame, Tile, World, WorldLoaded } from \"./worldLoader\";\nimport { roll } from \"../player/dices\";\nimport { CreateKnight, costs as knightCosts } from \"../player/knights/Knight\";\nimport { Asset, isActionableAsset, isFighterAsset, isFightingAsset, isMoveableAsset, isPositionedAsset, isResourceGeneratingAsset, MoveableAsset, Players, ResourceGeneratingBuilding, Resources, Team, teams } from \"./types\";\nimport { findNextPlayerWithAction, TurnComplete } from \"../player/Assets\";\nimport { findAllElementsFromTeam } from \"./navigator\";\nimport { deepQuerySelector } from \"../../browser/Selector\";\nimport { CreateWagon, costs as wagonCosts } from \"../player/wagon/Wagon\";\nimport { generateResources, getResourceGeneratingBuildings } from \"./buildings\";\nimport { CreateSmallLumberjack } from \"../player/buildings/Lumberjack\";\nimport { isTerrain } from \"../player/resources\";\nimport { CreateSmallMine } from \"../player/buildings/Mine\";\n\nlet world: World = {} as any as World\nlet worldAsCube: Cube[] = []\n\nlet currentTurn: Team\nlet turns: Team[] = []\n\nlet players: Players = {} as any as Players\n\nexport const getCurrentWorld = () => ({ ...world });\nexport const getCurrentTeam = () => currentTurn;\nexport const setCurrentTeam = (team: Team) => currentTurn = team;\nexport const getPlayer = (team: Team) => ({ ...players[team] })\nexport const getActivePlayer = () => players[currentTurn]\nconst hasActionsLeft = (asset: MoveableAsset) => asset.actions.current > 0;\nconst isOnTurn = ({ team }: { team: Team | undefined }) => team === currentTurn;\n\nhypothalamus.on(WorldLoaded, async (newWorld) => {\n    worldAsCube = []\n    newWorld.map.forEach((row, rowIndex) => {\n        row.forEach((_, colIndex) => {\n            const cube = new Position(rowIndex, colIndex).toCube()\n            if (_.terrain.movementCosts) {\n                cube.costs = _.terrain.movementCosts\n            }\n            worldAsCube.push(cube)\n        })\n    })\n    world = newWorld;\n    teams().forEach(team => {\n        players[team] = {\n            resources: {\n                hay: 100,\n                grain: 200,\n                iron: 200,\n                wood: 100,\n                stone: 100\n            }\n        }\n    })\n    await releaseHormone(StartGame)\n})\n\nhypothalamus.on(Abort, async (abort) => {\n    if (!abort) return;\n    releaseHormone(MoveModeDeactivate)\n    releaseHormone(BattleModeDeactivate)\n})\n\nhypothalamus.on([StartGame, SidebarLoaded], async () => {\n    await releaseHormone(TurnStarted)\n})\n\nhypothalamus.on(TurnStarted, async () => {\n    turns = [...world.teams]\n    currentTurn = turns.pop()!\n    await releaseHormone(TurnAccepted, currentTurn)\n})\n\nexport function allocateResources(initialResources: Resources, resourcesToGenerate: ResourceGeneratingBuilding[]) {\n    let availableResources: any = { ...initialResources };\n    let resourceGeneratingBuildings: ResourceGeneratingBuilding[] = [...resourcesToGenerate];\n    let touched = true;\n\n    while (touched) {\n        touched = false;\n        resourceGeneratingBuildings = resourceGeneratingBuildings.map((resourceGeneratingBuilding) => {\n            let result: ResourceGeneratingBuilding | undefined = resourceGeneratingBuilding;\n            Object.entries(resourceGeneratingBuilding.resources).forEach(([source, { generatedResource, ...costs }]) => {\n                if (Object.entries(costs).every(([resource, cost]) => availableResources[resource] <= cost)) {\n                    touched = true;\n                    result = undefined;\n                    Object.entries(costs).forEach(([resource, cost]) => {\n                        availableResources[resource] -= cost;\n                    })\n                    availableResources[source] += generatedResource;\n                    releaseHormone(ResourcesGenerated, resourceGeneratingBuilding);\n                }\n            })\n            return result;\n        }).filter(Boolean)\n    }\n    return availableResources\n}\n\nhypothalamus.on(DistributeResources, async ({ team, resourcesToGenerate }: DistributeResources) => {\n    if (getPlayer(team)?.resources) {\n        const before = { ...getPlayer(team).resources };\n        players[team].resources = allocateResources(players[team].resources, resourcesToGenerate);\n        releaseHormone(ResourceGenerationComplete, { team, before, after: players[team].resources });\n    }\n})\n\nhypothalamus.collect(ResourcesGenerated, ResourceGenerationComplete, (values) => {\n    releaseHormone(ResourceSummary, (values[ResourcesGenerated.name] as ResourceGeneratingBuilding[])?.map(generator => {\n        return {\n            name: generator.name,\n            from: Object.values(generator.resources).map(({ generatedResource, ...costs }) => ({ ...costs })),\n            to: Object.keys(generator.resources)\n        }\n    }));\n})\n\nhypothalamus.on(TurnAccepted, async (team) => {\n    const playerAssets = findAllElementsFromTeam(world, team)\n    await releaseHormone(UpdateAllPlayerElements, playerAssets)\n\n    const playerCastle = playerAssets?.find(element => element.name === buildings.castleSmall.name)\n    if (isPositionedAsset(playerCastle)) {\n        releaseHormone(RequestSelectCoords, {\n            item: buildings.castleSmall.name,\n            row: playerCastle.row,\n            col: playerCastle.col,\n            payload: playerCastle,\n        })\n    }\n    setTimeout(() => {\n        deepQuerySelector(playerCastle)?.scrollIntoView({ behavior: \"smooth\", block: \"center\", inline: \"center\" });\n    }, 2)\n\n    releaseHormone(PlayerUpdate, getPlayer(team))\n\n    // refill all resources and movements\n    const resourceMap: ResourceGeneratingBuilding[] =\n        getResourceGeneratingBuildings(world, team)\n            .reduce((into, building) => [...into, ...generateResources(building)], [] as ResourceGeneratingBuilding[])\n    // distribute resources\n    releaseHormone(UpdatedResources, { team, resourcesToGenerate: resourceMap });\n    await releaseHormone(DistributeResources, { team, resourcesToGenerate: resourceMap });\n})\n\n\nhypothalamus.on(RequestUpdatedResources, ({ team }) => {\n    // refill all resources and movements\n    const resourceMap: ResourceGeneratingBuilding[] =\n        getResourceGeneratingBuildings(world, team)?.reduce((into, building) => [...into, ...generateResources(building)], [] as ResourceGeneratingBuilding[])\n    // distribute resources\n    releaseHormone(UpdatedResources, { team, resourcesToGenerate: resourceMap });\n})\n\nhypothalamus.on(RequestSelectCoords, async (data) => {\n    await releaseHormone(ItemSelected, { ...data, item: \"hexagon\" })\n    await releaseHormone(ItemSelected, { ...data })\n    await releaseHormone(ItemSelected, { ...data, item: \"hexagon\" })\n})\n\nhypothalamus.on(TurnPlayerComplete, () => {\n    currentTurn = turns.pop()!\n    if (currentTurn === undefined) {\n        releaseHormone(TurnsComplete)\n    } else {\n        releaseHormone(TurnAccepted, currentTurn)\n    }\n})\n\nhypothalamus.on(TurnsComplete, () => {\n    // refill all movements\n    world.map.forEach((row) => {\n        row.forEach(({ elements }) => {\n            // For moveable assets, reset their movement\n            TurnComplete(...elements\n                .filter(isMoveableAsset)\n            )\n        })\n    })\n    releaseHormone(TurnStarted)\n})\n\nconst tryPay = (team: Team, costs: Resources): boolean => {\n    const availableResources: any = { ...players[team].resources };\n    for (const [resource, cost] of Object.entries(costs)) {\n        if (availableResources[resource] < cost) {\n            return false;\n        }\n        availableResources[resource] -= cost\n    }\n\n    players[team].resources = availableResources\n    return true;\n}\n\nhypothalamus.on(KnightCreated, async ({ row, col, team, origin }) => {\n    if (!isOnTurn({ team })) return;\n    if (!tryPay(team, knightCosts())) return;\n    if (origin.actions.current < 1) return;\n    const knight = CreateKnight({ row, col, team })\n    world.map[row][col].elements.push(knight)\n    \n    await Promise.all([\n        releaseHormone(ActionPerformed, { item: origin }),\n        releaseHormone(HexagonUpdated, { row, col, elements: [...world.map[row][col].elements] }),\n        releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, team)),\n        releaseHormone(PlayerUpdate, getActivePlayer()),\n    ])\n\n    releaseHormone(RequestSelectCoords, {\n        item: knight.name,\n        row, col,\n        payload: knight,\n    })\n})\nhypothalamus.on(WagonCreated, async ({ row, col, team }) => {\n    if (!isOnTurn({ team })) return;\n    if (!tryPay(team, wagonCosts())) return;\n    const wagon = CreateWagon({ row, col, team })\n    world.map[row][col].elements.push(wagon)\n\n    await Promise.all([\n        releaseHormone(HexagonUpdated, { row, col, elements: [...world.map[row][col].elements] }),\n        releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, team)),\n        releaseHormone(PlayerUpdate, getActivePlayer())\n    ])\n    releaseHormone(RequestSelectCoords, {\n        item: wagon.name,\n        row, col,\n        payload: wagon,\n    })\n})\n\nhypothalamus.on(ActionPerformed, ({item}) => {\n    world.map[item.row][item.col].elements\n        .filter(element => element.id === item.id)\n        .filter(isActionableAsset)\n        .forEach(element => element.actions.current--)\n})\n\nhypothalamus.on(CheckPlayerHasActionsLeft, () => {\n    const playerWithActionsLeft = findNextPlayerWithAction(world, currentTurn)\n\n    if (playerWithActionsLeft === undefined) {\n        releaseHormone(PlayerNoActionsLeft, true)\n    }\n})\n\n\nhypothalamus.on(BuildLumberjackSmall, async ({ position, asset }) => {\n    const { elements, terrain } = world.map[position.row][position.col]\n    const { team } = asset\n    const firstWagonIndex = elements.findIndex(element => element.name === \"player-wagon\")\n    if (!isOnTurn({ team: asset.team })) await releaseHormone(BuildLumberjackSmallFailed, { position, asset, reason: `Not the turn of the team ${asset.team}` });\n    else if (asset.name !== \"player-wagon\" || firstWagonIndex < 0) await releaseHormone(BuildLumberjackSmallFailed, { position, asset, reason: \"No wagon on field\" });\n    else if (!isTerrain(terrain, \"forest\")) await releaseHormone(BuildLumberjackSmallFailed, { position, asset, reason: `No wood on field but ${terrain.sprite.name}` });\n    else if (elements.some(isResourceGeneratingAsset)) await releaseHormone(BuildLumberjackSmallFailed, { position, asset, reason: \"There is already a building on the field\" });\n    else {\n        const lumberjack = CreateSmallLumberjack({ position, asset })\n        elements.splice(firstWagonIndex, 1)\n        elements.unshift(lumberjack)\n        await Promise.all([\n            releaseHormone(HexagonUpdated, {\n                ...position,\n                elements: [\n                    ...elements\n                ]\n            }),\n            releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, asset.team!)),\n            releaseHormone(PlayerUpdate, getActivePlayer()),\n            releaseHormone(BuildLumberjackSmallSuccess, { position, asset: lumberjack })\n        ])\n        // notify whoever interested in the lumberjack resource creation that it was created\n        releaseHormone(RequestUpdatedResources, { team })\n    }\n})\nhypothalamus.on(BuildMineSmall, async ({ position, asset }) => {\n    const { elements, terrain } = world.map[position.row][position.col]\n    const { team } = asset\n    const firstWagonIndex = elements.findIndex(element => element.name === \"player-wagon\")\n    if (!isOnTurn({ team: asset.team })) await releaseHormone(BuildMineSmallFailed, { position, asset, reason: `Not the turn of the team ${asset.team}` });\n    else if (asset.name !== \"player-wagon\" || firstWagonIndex < 0) await releaseHormone(BuildMineSmallFailed, { position, asset, reason: \"No wagon on field\" });\n    else if (!isTerrain(terrain, \"mountain\")) await releaseHormone(BuildMineSmallFailed, { position, asset, reason: `No mountain on field but ${terrain.sprite.name}` });\n    else if (elements.some(isResourceGeneratingAsset)) await releaseHormone(BuildMineSmallFailed, { position, asset, reason: \"There is already a building on the field\" });\n    else {\n        const mine = CreateSmallMine({ position, asset })\n        elements.splice(firstWagonIndex, 1)\n        elements.unshift(mine)\n        await Promise.all([\n            releaseHormone(HexagonUpdated, {\n                ...position,\n                elements: [\n                    ...elements\n                ]\n            }),\n            releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, asset.team!)),\n            releaseHormone(PlayerUpdate, getActivePlayer()),\n            releaseHormone(BuildMineSmallSuccess, { position, asset: mine })\n        ])\n        // notify whoever interested in the lumberjack resource creation that it was created\n        releaseHormone(RequestUpdatedResources, { team })\n    }\n})\n\nconst safeNumber = (n: number) => {\n    return Number.parseInt(n.toString(), 10)\n}\nconst isBlocked = (cube: Cube) => {\n    const { row, col } = cube.toCoords()\n    const sameTeam = (element: Asset) => element.team !== moveModeState?.asset.name\n    return world.map[row][col].elements\n        .filter(sameTeam)\n        .some(isFightingAsset)\n}\n\nlet moveModeState: MoveModeData | undefined = undefined\nhypothalamus.on(MoveModeActivate, async data => {\n    if (battleModeState) {\n        await releaseHormone(BattleModeDeactivate)\n    }\n    if (!isOnTurn(data.asset)) return;\n    // calculate reachable tiles\n    function isInReach(hexagon: Tile): boolean {\n        const start = new Position(safeNumber(data.start.row), safeNumber(data.start.col)).toCube()\n        const end = new Position(safeNumber(hexagon.position.row), safeNumber(hexagon.position.col)).toCube()\n\n        return isReachable(start, end, worldAsCube, isBlocked, data.asset.movement.points)\n    }\n\n    moveModeState = {\n        ...data,\n        inReach: world.map.reduce((acc, row) =>\n            [...acc, ...row.filter(isInReach).map(tile => tile!.position)]\n            , [] as Position[])\n    }\n    await releaseHormone(MoveModeActivated, data)\n})\nhypothalamus.on(MoveModeDeactivate, () => {\n    moveModeState = undefined\n})\nhypothalamus.on(MoveModeTargetHovered, async data => {\n    if (!moveModeState) {\n        return\n    }\n\n    const start = new Position(safeNumber(moveModeState.start.row), safeNumber(moveModeState.start.col)).toCube()\n    const end = new Position(safeNumber(data.row), safeNumber(data.col)).toCube()\n\n    const trail = shortestPath(start, end, worldAsCube, isBlocked, moveModeState.asset.movement.points)\n        .path;\n    let actualEnd = data\n    if (isBlocked(end)) {\n        actualEnd = [...trail].pop()?.toCoords() ?? moveModeState.start\n    }\n\n    await releaseHormone(MoveModeActivate, { ...moveModeState, trail, end: actualEnd })\n})\nhypothalamus.on(MoveModeEnd, async data => {\n    if (!moveModeState) {\n        return\n    }\n    if ((moveModeState.trail?.length ?? 0) < 1) {\n        return;\n    }\n\n    const { start, asset } = moveModeState;\n    if (!isOnTurn(asset)) { return }\n    if (asset.actions === undefined) console.error(\"asset.actions undefined\", asset)\n    if (!hasActionsLeft(asset)) { return; }\n    if (SimpleCoordsEquals(moveModeState.start, data)) {\n        releaseHormone(MoveModeDeactivate)\n        return;\n    }\n    asset.actions.current -= 1\n    const elements = [...world.map[start.row][start.col].elements];\n    world.map[start.row][start.col].elements = []\n    elements.forEach((element) => {\n        if (element.id !== asset.id)\n            world.map[start.row][start.col].elements.push({ ...element, row: start.row, col: start.col } as Asset)\n        else {\n            world.map[data.row][data.col].elements.push({ ...element, row: data.row, col: data.col } as Asset)\n        }\n    })\n    await releaseHormone(HexagonUpdated, { row: start.row, col: start.col, elements: [...world.map[start.row][start.col].elements] })\n    await releaseHormone(HexagonUpdated, { row: data.row, col: data.col, elements: [...world.map[data.row][data.col].elements] })\n    await releaseHormone(MoveModeDeactivate)\n    await releaseHormone(ItemMoved, { asset, location: data })\n    await releaseHormone(CheckPlayerHasActionsLeft)\n})\n\nlet battleModeState: BattleModeData | undefined = undefined\nhypothalamus.on(BattleModeActivate, async data => {\n    if (!isOnTurn(data.asset)) return;\n    if (moveModeState) {\n        await releaseHormone(MoveModeDeactivate)\n    }\n    battleModeState = {\n        ...data,\n        range: new Position(data.start.row, data.start.col)\n            .toCube()\n            .range(1)\n            .map(c => c.toPosition().toCoords())\n    }\n    releaseHormone(BattleModeActive, battleModeState)\n})\nhypothalamus.on(BattleModeEnd, async data => {\n    if (!battleModeState || !isOnTurn(battleModeState.asset)) return;\n    if (SimpleCoordsEquals(battleModeState.start, data)) {\n        releaseHormone(BattleModeDeactivate)\n        return;\n    }\n    const { row, col } = data\n    const { asset } = battleModeState;\n    const otherKnights = [...world.map[row][col].elements]\n        .filter(item => isFighterAsset(item) && (item as PlayerAsset).team !== asset.team)\n    if (hasActionsLeft(asset) && otherKnights.length > 0) {\n        asset.actions.current -= 1;\n        await releaseHormone(BattleStarted, {\n            location: data,\n            attacker: [asset],\n            defender: [...otherKnights]\n        })\n    }\n    releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, asset.team))\n    releaseHormone(BattleModeDeactivate)\n    await releaseHormone(CheckPlayerHasActionsLeft)\n})\nhypothalamus.on(BattleModeDeactivate, () => battleModeState = undefined)\n\nhypothalamus.on(ItemMoved, async ({ asset, location }) => {\n    if (!isOnTurn(asset)) { return }\n    const { row, col } = location;\n    const otherElements = [...world.map[row][col].elements]\n        .filter(item => item.id !== asset.id);\n    for (const { building, hormone } of [\n        { building: buildings.mill.name, hormone: MillTakeover },\n        { building: buildings.lumberjackSmall.name, hormone: LumberjackTakeover },\n        { building: buildings.mineSmall.name, hormone: MineTakeover },\n    ]) {\n        const assetToTake = otherElements\n            .filter(item => item.name === building && (item as PlayerAsset).team !== asset.team)\n        if (assetToTake.length > 0 && isFighterAsset(asset)) {\n            const assetTaken: AssetTaken = {\n                asset: assetToTake[0],\n                transfered: {\n                    from: assetToTake[0].team!,\n                    to: asset.team\n                },\n                location,\n                by: asset,\n                team: asset.team\n            }\n            await releaseHormone(hormone, assetTaken)\n        }\n    }\n    releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, asset.team))\n    await releaseHormone(CheckPlayerHasActionsLeft)\n});\n\n([MillTakeover, LumberjackTakeover, MineTakeover]).forEach(hormone => {\n    hypothalamus.on(hormone, ({ location, team, asset }) => {\n        if (!isOnTurn({ team })) { return }\n        const { row, col } = location\n        const elements = [...world.map[row][col].elements];\n        world.map[row][col].elements = []\n        elements.forEach((element) => {\n            if (element.id !== asset.id) {\n                world.map[row][col].elements.push(element)\n            } else {\n                world.map[row][col].elements.push({ ...element, team } as PlayerAsset)\n            }\n        })\n        releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, team))\n        releaseHormone(RequestUpdatedResources, { team })\n    })\n})\n\nhypothalamus.on(BattleStarted, (data) => {\n    releaseHormone(ModalBattleOpen, data)\n})\n\nhypothalamus.on(BattleThrowDice, (data) => {\n    if (!isOnTurn(data.attacker.asset)) { return }\n    const damage = roll(data.attacker.dices)\n    releaseHormone(BattlePlayerAttacked, {\n        attacker: data.attacker.asset,\n        defender: data.defender,\n        damage,\n        location: data.location\n    })\n})\n\nhypothalamus.on(BattlePlayerAttacked, (data) => {\n    const { defender, damage, attacker } = data\n    const attacker_after = {\n        ...attacker,\n        health: {\n            ...attacker.health,\n            current: (damage < 0) ? attacker.health.current + damage : attacker.health.current\n        }\n    }\n    const defender_after = {\n        ...defender, health: {\n            ...defender.health,\n            current: (damage > 0) ? defender.health.current - damage : defender.health.current\n        }\n    }\n\n    const { row, col } = data.location\n    const elements = [...world.map[row][col].elements];\n    world.map[row][col].elements = []\n    elements.forEach((element) => {\n        if (element.id === defender_after.id) {\n            if (defender_after.health.current > 0) {\n                world.map[row][col].elements.push(defender_after)\n            }\n        } else if (element.id === attacker_after.id) {\n            if (attacker_after.health.current > 0) {\n                world.map[row][col].elements.push(attacker_after)\n            }\n        } else {\n            world.map[row][col].elements.push(element)\n        }\n    })\n    releaseHormone(HexagonUpdated, { row, col, elements: [...world.map[row][col].elements] })\n    releaseHormone(ModalBattleOpen, undefined)\n    releaseHormone(ModalDiceResultOpen, {\n        attacker: [attacker],\n        defender: [defender],\n        defender_after: [defender_after],\n        attacker_after: [attacker_after],\n        location: data.location,\n        result: damage\n    })\n})\n","import { isMoveableAsset, MoveableAsset, Player, Team, World } from \"..\";\n\nexport const TurnComplete = (...assets: MoveableAsset[]) => {\n    assets.forEach(asset => {\n        asset.actions.current = asset.actions.max\n    })\n}\n\n\nexport const findNextPlayerWithAction = (world: World, currentTeam: Team) => {\n    for (const row of world.map) {\n        for (const col of row) {\n            const playerWithActionsLeft = col.elements\n                .filter(isMoveableAsset)\n                .map(element => element as MoveableAsset)\n                .find(element => element.team === currentTeam && element.actions.current > 0);\n            \n            if (playerWithActionsLeft) {\n                return playerWithActionsLeft;\n            }\n        }\n    }\n\n    return undefined\n}\n\nexport function getPlayerResources(player: Player) {\n    return { ...player.resources };\n}","import { Asset, ResourceGeneratingBuilding, SimpleCoords } from \"../../world\"\nimport { SpriteSet } from \"../../world/sprite\"\n\nexport const CreateSmallLumberjack = ({position, asset}: {position: SimpleCoords, asset: Asset}): SpriteSet & ResourceGeneratingBuilding & SimpleCoords => ({\n    id: \"lumberjack-small\",\n    name: \"lumberjack-small\",\n    team: asset.team,\n    ...position,\n    occurences: {\n        min: 1\n    },\n    resources: {\n        wood: { generatedResource: 50 },\n    }\n})","import { Asset, ResourceGeneratingBuilding, SimpleCoords } from \"../../world\"\nimport { SpriteSet } from \"../../world/sprite\"\n\nexport const CreateSmallMine = ({position, asset}: {position: SimpleCoords, asset: Asset}): SpriteSet & ResourceGeneratingBuilding & SimpleCoords => ({\n    id: \"mine-small\",\n    name: \"mine-small\",\n    team: asset.team,\n    ...position,\n    occurences: {\n        min: 1\n    },\n    resources: {\n        stone: { generatedResource: 50 },\n        iron: { generatedResource: 50 },\n    }\n})","import { setLoglevel, LOGLEVEL } from \"organismus\"\n\nif (window.location.hash.indexOf(\"log\") >= 0) {\n    setLoglevel(LOGLEVEL.INFO)\n}\nif (window.location.hash.indexOf(\"trace\") >= 0) {\n    setLoglevel(LOGLEVEL.TRACE)\n}\n\nexport * from \"./worldLoader\"\nexport * from \"./types\"\nexport * from \"./world-state\"","import { css } from \"nested-css-to-flat/lit-css\";\n\nexport const sprite = css`\n    :host {\n        position: absolute;\n        width: 120px;\n        height: 140px;\n        background-repeat: no-repeat;\n        background-position: center center;\n    }\n    div {\n        width: 80%;\n        height: 80%;\n        margin: 10%;\n        background-size: contain;\n        background-repeat: no-repeat;\n        background-position: center center;\n    }\n`\n\nexport const inactive = css`\n.inactive {\n    opacity: 0.8;\n    filter: grayscale(100%);\n}`\n\nexport const sidebar = css`\n    ::-webkit-scrollbar {\n      width: 10px;\n      height: 10px;\n      cursor: pointer;\n    }\n    ::-webkit-scrollbar-track {\n      background: #f1f1f1;\n    }\n    ::-webkit-scrollbar-thumb {\n      background: #888;\n    }\n    ::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }\n`\nexport const sidebarFor = (element: string) => css`\n     ${element} {\n        scrollbar-color:  #888 #f1f1f1;\n        scrollbar-width: thin;\n     }\n`","import { css, html } from \"lit\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\n\ntype Props = {\n    src: string\n    height: string\n}\n\nexport default pureLit(\"button-image\", (el: LitElementWithProps<Props>) => {\n    const style = el.height ? `height:${el.height};` : \"\"\n    return html`<button style=\"${style}; background-image: url('${el.src}'), url('/assets/sidebar/btn_1.png')\">\n        <slot></slot>\n    </button>`\n}, {\n    styles: css`\n    button {\n        background: none;\n        border: none;\n        margin: 0;\n        padding: 0;\n        background-image: url('/assets/sidebar/btn_1.png');\n        background-size: contain;\n        height: 70px;\n        background-repeat: no-repeat;\n        cursor: pointer;\n        padding-left: 33%; \n        width: 85%;\n    }\n    slot {\n        display: flex;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n    }\n    `,\n    defaults: {\n        src: \"\",\n        height: \"\"\n    }\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\n\nexport default pureLit(\"button-pure\", () => {\n    return html`<button>\n        <slot></slot>\n    </button>`\n}, {\n    styles: css`\n    \n    button {\n        background: none;\n        border: none;\n        margin: 0;\n        padding: 0;\n        cursor: pointer;\n    }\n     img {\n        margin: 3px;\n        width: 64px;\n        height: 64px;\n    }\n    `\n})","import { css } from \"lit\";\n\nexport const modalCoreCss =  css`\n#background {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background-color: var(--colorContrast);\n    opacity: 0.7;\n    z-index: 1000;\n}\n#modal {\n    position: absolute;\n    left: 20%;\n    top: 20%;\n    width: 60%;\n    height: 60%;\n    padding: 12px;\n    background-color: var(--colorMain);\n    opacity: 1;\n    z-index: 1001;\n}\n`\n\nexport const modalHeaderCss = css`\n    header {\n        position: relative;\n        height: 2rem;\n    }\n    #close {\n        position: absolute;\n        right: 12px;\n        font-size: 2rem;\n    }\n`","import { html, LitElement } from \"lit\"\nimport { LitElementWithProps, pureLit } from \"pure-lit\"\nimport { modalCoreCss, modalHeaderCss } from \"./modal.styles\"\n\ntype Prop = {\n    open: boolean\n    preventClose: boolean\n}\n\nconst trigger = (el: LitElement, event: string) => {\n    el.dispatchEvent(new CustomEvent(event))\n}\n\nexport default pureLit(\"modal-window\", (el: LitElementWithProps<Prop>) => {\n    return el.open ? html`\n    <div id=\"background\" @click=\"${() => el.preventClose && trigger(el, \"close\")}\"></div>\n    <div id=\"modal\">\n        <header>\n            ${el.preventClose ? html`` : html`<button-pure id=\"close\" @click=\"${() => trigger(el, \"close\")}\"><text-block size=\"large\">X</text-block></button-pure>`}\n            <slot name=\"header\"></slot>\n        </header>\n        <div>\n            <slot></slot>\n        </div>\n        <slot name=\"footer\"></slot>\n    </div>\n    ` : html``\n}, {\n    styles: [modalCoreCss, modalHeaderCss],\n    defaults: {\n        open: false,\n        preventClose: false\n    }\n})\n","import { html } from \"lit\"\nimport { pureLit, useState } from \"pure-lit\"\n\nexport default pureLit(\"modal-container\", (el) => {\n    const { getState: modalOpen, publish: modalSetOpen } = useState(el, false)\n    return html`\n        <button-pure @click=\"${() => modalSetOpen(true)}\"><slot></slot></button-pure>\n        <modal-window .open=${modalOpen()} @close=${() => modalSetOpen(false)}>\n            <slot slot=\"header\" name=\"header\"></slot>\n            <slot name=\"body\"></slot>\n            <slot slot=\"footer\" name=\"footer\"></slot>\n        </modal-window>\n    `\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\n\ntype Props = {\n    size: \"small\" | \"medium\" | \"large\"| \"x-large\"\n    type: \"inline\" | \"paragraph\"\n}\n\nconst sizes = css`\n    .small {\n        font-size: 0.75rem;\n    }\n    .medium {\n        font-size: 1rem;\n    }\n    .large {\n        font-size: 1.5rem;\n    }\n    .x-large {\n        font-size: 2rem;\n    }\n`\nconst type = css`\n    .inline {\n        display: inline;\n    }\n    .paragraph {\n        display: block;\n    }\n`\n\nexport default pureLit(\"text-block\", ({size, type}: Props) => {\n    return html`<span class=\"${size} ${type}\"><slot></slot></span>`\n}, {\n    styles: [sizes, type],\n    defaults: {\n        size: \"medium\",\n        type: \"inline\"\n    }\n})","import { html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { style } from \"./loading-bar.styles\";\n\ntype Prop = {\n    width: string\n}\n\nexport default pureLit(\"loading-bar\", ({width}: Prop) => {\n    return html`\n    <div class=\"progress-bar\">\n        <span class=\"bar\">\n            ${(width.trim() === \"0%\" || width.trim().indexOf(\"-\") === 0) ? html`<span></span>` : html`<span class=\"progress\" style=\"width: ${width};\"></span>`}\n        </span>\n    </div>\n    `\n}, {\n    styles: [style],\n    defaults: {\n        width: \"100%\"\n    }\n})","import { css } from \"nested-css-to-flat/lit-css\";\n\nexport const style = css`    \n.progress-bar {\n    border-radius: 60px;\n    overflow: hidden;\n    width: 100%;\n    & .bar {\n        background: rgba(0,0,0,0.075);\n        & span {\n            padding: 5px;\n        }\n        & .progress {\n            background: #75b800;\n            color: #fff;\n            width: 0;\n            transition: width 1s ease-in-out;\n        }\n    }\n}\n\nspan {\n    display: block;\n}\n`","import { html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { styles } from \"./dice.style\";\n\ntype Prop = {\n    result: number\n}\n\nexport default pureLit(\"dice-roll\", ({result}: Prop) => \n    html`<div id=\"cube\">\n        <div id=\"side1\"></div>\n        <div id=\"side2\"></div>\n        <div id=\"side3\">${result}</div>\n        <div id=\"side4\"></div>\n        <div id=\"side5\"></div>\n        <div id=\"side6\"></div>\n    </div>`\n, {\n    styles,\n    props: [{\n        result: {type: Number}\n    }]\n})","import { css } from \"nested-css-to-flat/lit-css\";\n\nexport const styles = css`\n:host {\n    width: 250px;\n    height: 213px;\n    margin: 20px auto;\n}\n#cube {\n    width: 112px;\n    height: 112px;\n    top: 50px;\n    transform-style: preserve-3d;\n    transform: rotateX(-22deg) rotateY(1083deg) rotateZ(0deg);\n    margin: auto;\n    position: relative;\n    transform-style: preserve-3d;\n    transition: all 0.5s ease-in-out;\n    animation: cubeRotation 5s 1;\n    animation-fill-mode: forwards;\n    & > div {\n        position: absolute;\n        transition: all 0.5s ease-in-out;\n        width: 112px;\n        height: 112px;\n        float: left;\n        overflow: hidden;\n        background-color:white;\n\t    border:1px solid black;\n        \n        line-height: 112px;\n        text-align: center;\n        font-size: 5rem;\n    }\n}\n@keyframes cubeRotation {\n    0%   {\ttransform: rotateX(-22deg) rotateY(1083deg) rotateZ(0deg);\t}\n    100%   {\ttransform: rotateX(-382deg) rotateY(3deg) rotateZ(1080deg);\t}\n}\n@keyframes reveal {\n    0%   {\tcolor:white;\t}\n    80%   {\tcolor:white;\t}\n    100%   {\tcolor:black;\t}  \n}\n#side1 {\n  transform: rotatex(90deg) translateX(0px) translateY(0px) translateZ(56px);\n}\n#side2 {\n    transform: rotateY(-90deg) translateX(0px) translateY(0px) translateZ(56px);\n}\n#side3 {\n    transform: translateX(0px) translateY(0px) translateZ(56px);\n    color:white;\n    animation: reveal 5s 1;\n    animation-fill-mode: forwards;\n}\n#side4 {\n    transform: rotateY(90deg) translateX(0px) translateY(0px) translateZ(56px);\n}\n#side5 {\n    transform: rotateY(180deg) translateX(0px) translateY(0px) translateZ(56px);\n}\n#side6 {\n    transform: rotateX(-90deg) translateX(0px) translateY(0px) translateZ(56px);\n}\n`","import { css, html } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"player-knight\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { get: getState, set: publish } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, publish)\n    return html`<div class=\"${getState() === el.team ? \"active\" : \"inactive\"}\" style=\"background-image:url('/assets/knight_${el.team}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        div {\n            background-size: contain;\n            opacity: 1;\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n    }\n})","import { css, html } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"player-wagon\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { getState, publish } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, publish)\n    return html`<div class=\"${getState() === el.team ? \"active\" : \"inactive\"}\" style=\"background-image:url('/assets/wagon_${el.team}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        div {\n            background-size: contain;\n            opacity: 1;\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n    }\n})","import { css, html } from \"lit\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\nimport { Dice } from \"../../../game/player/dices/dice\";\n\ntype Props = {\n    dices?: Dice[]\n}\n\nexport default pureLit(\"dice-selector\", (el: LitElementWithProps<Props>) => {\n    return html`${el.dices?.map(dice => html`<div>\n        <input type=\"radio\" \n            @click=${() => el.dispatchEvent(new CustomEvent(\"select\", { detail: dice }))}\n            id=\"${dice.name}\" \n            name=\"dice\" \n            value=\"${dice.name}\">\n        <label for=\"${dice.name}\">\n            <strong>${dice.name}</strong> - ${dice.story}\n            <div class=\"sides\" style=\"grid-template-columns: 1fr ${dice.sides.map(() => \"1fr\").join(\" \")};\">\n                <h5>Wrfelergebnisse</h5>\n                ${dice.sides.map(side => html`<div class=\"side\">${side.value}</div>`)}\n            </div>\n        </label>\n    </div>`)}`\n},\n    {\n        styles: css`\n        .sides {\n            display: grid;\n            padding: 0.5rem;\n        }\n        h5 {\n            margin: 0;\n        }\n        .side {\n            background-image: url(\"/assets/dice.png\");\n            background-size: contain;\n            height: 1rem;\n            background-repeat: no-repeat;\n            background-position: center;\n            text-align: center;\n            padding-top: 0.25rem;\n            font-size: 0.75rem;\n        }\n     `\n    })","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{nothing as t,noChange as i}from\"../lit-html.js\";import{Directive as r,PartType as s,directive as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends r{constructor(i){if(super(i),this.it=t,i.type!==s.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this.ft=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this.ft;this.it=r;const s=[r];return s.raw=s,this.ft={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=n(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","import { css, html } from \"lit\"\nimport {unsafeHTML} from 'lit/directives/unsafe-html.js';\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { LitElementWithProps, pureLit, useOnce, useState } from \"pure-lit\";\n\nimport { buildings, player } from \".\"\nimport { Asset, isPositionedAsset, Team } from \"../game\";\nimport { HexagonUpdated, HexagonUpdatedPayload, ItemSelected, RequestSelectCoords, TurnAccepted } from \"../game/world/events\";\nimport { deepQuerySelector } from \"../browser/Selector\";\n\ntype Props = {\n    row: number,\n    col: number,\n    triggers: { [team: string]: (() => Promise<unknown>)[] }\n}\n\nasync function doTrigger(triggers: (() => Promise<unknown>)[]) {\n    for (const trigger of triggers) {\n        await trigger()\n    }\n} \n\nconst getFilteredTriggers = (team: Team, triggers: { [team: string]: (() => Promise<unknown>)[] }) => {\n    return [\n        ...(triggers.none ?? []),\n        ...(triggers[team] ?? [])\n    ]\n}\n\npureLit(\"sprite-set\", (el: LitElementWithProps<Props>) => {\n    const { getState: getUpdated, publish: setUpdated } \n        = useState<HexagonUpdatedPayload | undefined>(el, undefined)\n    const { getState: getCurrentTeam, publish: setCurrentTeam }\n        = useState<Team | undefined>(el, undefined)\n\n    useReceptor(el, \n        HexagonUpdated, \n        (u) => el.row.toString() === u?.row.toString() && el.col.toString() === u?.col.toString(), \n        setUpdated\n    )\n    useReceptor(el,\n        TurnAccepted,\n        setCurrentTeam\n    )\n\n    if (getUpdated()) {\n        doTrigger(getFilteredTriggers(getCurrentTeam()!, el.triggers))\n            .then(() => releaseHormone(ItemSelected, { item: \"hexagon\", row: el.row, col: el.col }))\n    }\n    useOnce(el, () => {\n        el.addEventListener(\"click\", async () => {\n            doTrigger(getFilteredTriggers(getCurrentTeam()!, el.triggers))\n        })\n    })\n\n    return html`<slot></slot>`\n}, {\n    defaults: {\n        row: 0,\n        col: 0,\n        triggers: {}\n    }\n})\n\npureLit(\"sprite-player-elements-grid\", () => {\n    return html`<slot></slot>`\n},\n{\n    styles: css`\n    slot {\n        display: grid;\n        align-items: center;\n        grid-template-columns: repeat(6, 1fr);\n    }\n    `\n})\n\nexport const spriteFactory = (elements: Asset[] | undefined, row: number, col: number) => {\n    const triggers: { [team: string]: (() => Promise<unknown>)[] } = {}\n    const assets = elements?.map((element) => {\n        const entry = Object.entries({ ...buildings, ...player }).find(([_, value]) => value.name === element.name)\n        const payload = Object.entries({ ...element, name: undefined })\n            .filter(([_, values]) => values !== undefined)\n        const attributes = payload\n            .map(([key, value]) => `${key}=\"${value}\"`)\n            .join(\" \")\n        const team = element.team ?? \"none\";\n        triggers[team] = triggers[team] ?? []\n        triggers[team].push(() => releaseHormone(ItemSelected, { item: entry?.[1].name ?? \"\", row, col, payload: {...element} }))\n        return html`${unsafeHTML(`<${entry?.[1].name ?? \"span\" } ${attributes}></${entry?.[1].name ?? \"span\" }>`)}`\n    })\n    return html`<sprite-set .triggers=${triggers} col=\"${col}\" row=\"${row}\">${assets}</sprite-set>`\n}\n\nexport const spriteGridFactory = (elements: Asset[] | undefined, elementStyle: string = \"\") => {\n    const assets = elements?.map((element) => {\n        const entry = Object.entries({ ...buildings, ...player }).find(([_, value]) => value.name === element.name)\n        const payload = Object.entries({ ...element, name: undefined })\n            .filter(([_, values]) => values !== undefined)\n        const attributes = payload\n            .map(([key, value]) => `${key}=\"${value}\"`)\n            .join(\" \")\n        const position = isPositionedAsset(element) ? { row: element.row, col: element.col } : { row: 0, col: 0}\n        const onClick = () => {\n            releaseHormone(RequestSelectCoords, {\n                item: element.name,\n                ...position,\n                payload: element,\n            })\n            setTimeout(() => {\n                deepQuerySelector(element)?.scrollIntoView({behavior: \"smooth\", block: \"center\", inline: \"center\"});\n            }, 2)\n        }\n        const onHover = () => {\n            setTimeout(() => {\n                deepQuerySelector(element)?.scrollIntoView({behavior: \"smooth\", block: \"center\", inline: \"center\"});\n            }, 2)\n        }\n        return html`<div\n            @click=\"${onClick}\"\n            @mouseover=\"${onHover}\"\n            style=\"position:relative; cursor: pointer; width: 120px;${elementStyle};\">\n                ${unsafeHTML(`<${entry?.[1].name ?? \"span\" } ${attributes} style=\"${elementStyle};\"></${entry?.[1].name ?? \"span\" }>`)}\n        </div>`\n    })\n    return html`<sprite-player-elements-grid>${assets}</sprite-player-elements-grid>`\n}","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { FigherAsset } from \"../../game\";\nimport { spriteFactory } from \"../sprites\";\n\ntype Props = {\n    player: FigherAsset,\n    row: number,\n    col: number\n}\n\nexport default pureLit(\"fighter-info\", ({player, row, col}: Props) => {\n    return html`<div class=\"sprite ${player?.health.current < 1 ? \"dead\" : \"alive\"}\">\n            ${spriteFactory(player ? [player] : [], row, col)}\n        </div>\n        <div class=\"info\">\n            <h3>Gesundheit</h3>\n            <loading-bar width=\"${(player?.health.current / player?.health.max) * 100}%\"></loading-bar>\n            <p>${player?.health.current} von ${player?.health.max}</p>\n        </div>`;\n}, {\n    styles: [\n        css`\n        :host {\n            display: grid;\n            grid-template-columns: 1fr 3fr;\n        }\n        .sprite {\n            height: 140px;\n        }\n        @keyframes rotation {\n            from {\n                transform: rotate(0deg);\n            }\n            to {\n                transform: rotate(-90deg);\n            }\n        }\n        .dead {\n            animation: rotation 5s 1;\n            animation-fill-mode: forwards;\n        }\n        `\n    ],\n    props: [{\n        player: { type: Object },\n        row: {type: Number},\n        col: {type: Number}\n    }]\n})","export const HEXAGON_WIDTH = 120","import { css } from 'nested-css-to-flat/lit-css';\nimport { HEXAGON_WIDTH } from './consts';\n\nexport const cssHexagon =  css`\n:host {\n  display: inline-block;\n}\n.hexagon {\n  position: relative;\n  cursor: pointer;\n  display: inline-block;\n  background-color: var(--colorShow);\n  width: ${HEXAGON_WIDTH}px;\n  height: 140px;\n  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);\n  transition: all 500ms linear;\n  z-index: 1;\n  &:hover {\n    background: var(--colorFocus);\n  }\n}`\n\nexport const cssHexagonMovement = css`\n    .inactive {\n        opacity: 0.8;\n        cursor: not-allowed;\n    }\n    .active {\n      &.start, &,trail, &.end {\n        filter: brightness(1.5);\n      }\n    }\n    .unreachable {\n        cursor: not-allowed;\n        filter: saturate(0) hue-rotate(217deg);\n    }\n    .inactive.unreachable {\n      opacity: 0.1;\n    }\n`","import { html } from 'lit';\nimport { releaseHormone, useReceptor } from 'organismus';\nimport { LitElementWithProps, pureLit, useOnce, useState } from 'pure-lit';\nimport { MoveModeEnd, HexagonUpdated, HexagonUpdatedPayload, ItemSelected, MoveModeData, MoveModeTargetHovered, BattleModeActive, BattleModeDeactivate, MoveModeDeactivate, BattleModeData, MoveModeActivated } from '../../game/world/events';\nimport { Sprite } from '../../game/world/sprite';\nimport { spriteFactory } from '../sprites';\nimport { Asset, SimpleCoords } from '../../game';\nimport * as movement from './Hexagon.movement';\nimport * as battle from './Hexagon.battle';\nimport { cssHexagon, cssHexagonMovement } from './Hexagon.styles';\nimport { SimpleCoordsEquals } from '../../math/position';\n\ntype Props = {\n    background: Sprite | undefined\n    elements: Asset[]\n    row: number\n    col: number\n}\n\nconst getCssClass = (hexagon: SimpleCoords, moveMode: MoveModeData | undefined, battleMode: BattleModeData | undefined) => {\n    return `${movement.getCssClass(hexagon, moveMode)} ${battle.getCssClass(hexagon, battleMode)}`\n}\nconst click = (hexagon: SimpleCoords, moveMode: MoveModeData | undefined, battleMode: BattleModeData | undefined) => {\n    if (moveMode && moveMode.end && SimpleCoordsEquals(moveMode.end, hexagon)) {\n        movement.click(hexagon, moveMode)\n    } else if (battleMode) {\n        battle.click(hexagon, battleMode)\n    }\n}\n\nexport default pureLit('hexagon-element', (el: LitElementWithProps<Props>) => {\n    useOnce(el, () => {\n      el.addEventListener(\"click\", () => releaseHormone(ItemSelected, {item: \"hexagon\", row: el.row, col: el.col}))\n    })\n\n    const {row, col} = el;\n    const { get: getElements, set: setElements } = useState<HexagonUpdatedPayload>(el, {elements: el.elements, row, col})\n    const { get: getMovementMode, set: setMovementMode } = useState<MoveModeData | undefined>(el, undefined)\n    const { get: getBattleMode, set: setBattleMode } = useState<BattleModeData | undefined>(el, undefined)\n    useReceptor(el, HexagonUpdated, (h) => (h?.row.toString() === row.toString() && h?.col.toString() === col.toString()), setElements)\n    useReceptor(el, MoveModeActivated, setMovementMode)\n    useReceptor(el, BattleModeActive, setBattleMode)\n    useReceptor(el, MoveModeEnd, () => setMovementMode(undefined))\n    useReceptor(el, MoveModeDeactivate, () => setMovementMode(undefined))\n    useReceptor(el, BattleModeDeactivate, () => setBattleMode(undefined))\n\n    const update = getElements()\n    \n    return html`<div \n      class=\"hexagon ${getCssClass(el, getMovementMode(), getBattleMode())}\" \n      @mouseover=${() => { if (getMovementMode()) {releaseHormone(MoveModeTargetHovered, {row, col})} }}\n      @click=${() => (click(el, getMovementMode(), getBattleMode()), document.dispatchEvent(new CustomEvent(\"hello-world\", { detail: { hello: \"world\"}})))}\n      style=\"background-image:url(/assets/${el.background?.file}.png); background-position: ${el.background?.x}px ${el.background?.y}px;\">\n      ${spriteFactory(update.elements, el.row, el.col)}</div>`\n}, {\n    styles: [cssHexagon, cssHexagonMovement],\n    defaults: {\n        background: undefined,\n        elements: [],\n        col: 0,\n        row: 0\n    }\n}\n\n)\n","import { SimpleCoords } from \"../../game\";\nimport { MoveModeData, MoveModeEnd } from \"../../game/world/events\";\nimport { SimpleCoordsEquals } from \"../../math/position\";\nimport { releaseHormone } from 'organismus';\n\nexport function getCssClass(hexagon: SimpleCoords, data: MoveModeData | undefined) {\n    if (!data) {\n        return \"\"\n    }\n\n    if (SimpleCoordsEquals(data.start, hexagon)) return \"active start\"\n    if (data.end && ((data.trail?.length ?? 0) < 1) && SimpleCoordsEquals(data.end, hexagon)) return \"active unreachable\"\n    if (data.end && SimpleCoordsEquals(data.end, hexagon)) return \"active end\"\n    if (data.trail && data.trail.some(coord => SimpleCoordsEquals(coord, hexagon))) return \"active trail\"\n    if (!data.inReach?.some(coord => SimpleCoordsEquals(coord, hexagon))) return \"inactive unreachable\"\n    return \"inactive\"\n}\n\nexport function click(hexagon: SimpleCoords, data: MoveModeData | undefined) {\n    if (!data) {\n        return\n    }\n\n    releaseHormone(MoveModeEnd, hexagon)\n}","import { SimpleCoords } from \"../../game\";\nimport { BattleModeData, BattleModeEnd } from \"../../game/world/events\";\nimport { SimpleCoordsEquals } from \"../../math/position\";\nimport { releaseHormone } from 'organismus';\n\nexport function getCssClass(hexagon: SimpleCoords, data: BattleModeData | undefined) {\n    if (!data) {\n        return \"\"\n    }\n\n    if (SimpleCoordsEquals(data.start, hexagon)) return \"active start\"\n    if (data.end && SimpleCoordsEquals(data.end, hexagon)) return \"active end\"\n    if (data.range && data.range.some(coord => SimpleCoordsEquals(coord, hexagon))) return \"active trail\"\n    return \"inactive\"\n}\n\nexport function click(hexagon: SimpleCoords, data: BattleModeData | undefined) {\n    if (!data) {\n        return\n    }\n\n    releaseHormone(BattleModeEnd, hexagon)\n}","import { css, html, LitElement } from \"lit\";\nimport { useReceptor } from \"organismus\";\nimport { pureLit, useState } from \"pure-lit\";\nimport { World, WorldLoaded } from \"../../game\";\nimport { HEXAGON_WIDTH } from \"./consts\";\n\nexport default pureLit(\"world-map\", (el: LitElement) => {\n    const { get: getWorld, set: setWorld } = useState<World | undefined>(el, undefined)\n    useReceptor(el, WorldLoaded, setWorld)\n\n    return html`<div id=\"globe\">${\n        getWorld()?.map.map((rows, row) => \n            html`<div class=\"row ${row % 2 === 0 ? \"push\" : \"\"}\" style=\"width: calc(${HEXAGON_WIDTH * rows.length}px + 20rem)\">\n                ${rows.map((tile, col) => \n                    html`<hexagon-element \n                        .background=${tile.terrain.sprite} \n                        .elements=\"${tile.elements}\" \n                        row=\"${row}\" col=\"${col}\">\n                    </hexagon-element>`)}\n            </div>\n            `\n        )\n    }</div>`\n}, {\n    styles: css`\n    :host {\n        display:block;\n    }\n    #globe {\n        padding: 20rem;\n    }\n    .row {\n        margin-bottom: -41px;\n        white-space: nowrap;\n    }\n    .push {\n        margin-left: 60px;\n    }`\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { sprite } from \"../styles\";\n\nexport const name = \"building-mill\"\n\ntype Props = {\n    team?: string\n}\n\nexport default pureLit(name, ({ team }: Props) => {\n    return html`<div style=\"background-image:url('/assets/windmill_complete_${team ?? \"none\"}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        css`\n        div {\n            width: 80%;\n            height: 80%;\n        }\n        `\n    ],\n    defaults: {\n        team: undefined\n    }\n})","import { html, css } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"building-castle-small\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { get, set } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, set)\n    return html`<div class=\"${get() === el.team ? \"active\" : \"inactive\"}\" style=\"background-image:url('/assets/castle_small_${el.team}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        :host {\n            filter: hue-rotate(0deg);\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n        row: undefined,\n        col: undefined\n    }\n})","import { html, css } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"lumberjack-small\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { get, set } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, set)\n    return html`<div class=\"${get() === el.team ? \"active\" : \"inactive\"}\" style=\"margin: 0; background-image:url('/assets/lumberjack_small_${el.team}.png'); background-size: auto; width: 100%; height: 100%;\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        :host {\n            filter: hue-rotate(0deg);\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n        row: undefined,\n        col: undefined\n    }\n})","import { html, css } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"mine-small\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { get, set } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, set)\n    return html`<div class=\"${get() === el.team ? \"active\" : \"inactive\"}\" style=\"margin: 0; background-image:url('/assets/mine_small_${el.team}.png'); background-size: auto; width: 100%; height: 100%;\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        :host {\n            filter: hue-rotate(0deg);\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n        row: undefined,\n        col: undefined\n    }\n})","import { Resources } from \"../world\";\nimport { costs as knightCosts } from \"./knights/Knight\";\nimport { costs as wagonCosts } from \"./wagon/Wagon\";\n\nconst resources: Resources = {\n    hay: 0,\n    iron: 0,\n    grain: 0,\n    wood: 0,\n    stone: 0\n}\n\nexport default {\n    wagon: wagonCosts,\n    knight: knightCosts,\n    iron: () => ({...resources, stone: 4, wood: 2, grain: 1 }),\n    castle_medium: () => ({...resources, wood: 500, grain: 500, stone: 500 }),\n    castle_large: () => ({...resources, stone: 1000, iron: 1000, grain: 1000 }),\n}","import { css } from \"lit\";\n\nexport const sidebarBaseCSS = css`\n  :host {\n    display: block;\n    background-image: url(\"/assets/sidebar/bg.png\");\n    background-repeat: no-repeat;\n    padding: 15px;\n    background-size: 100% 100%;\n  }\n  .container {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: auto;\n    column-gap: 10px;\n    row-gap: 15px;\n    margin: 15px 15px 25px 15px;\n  }\n  button {\n        cursor: pointer;\n    }\n    img {\n        width: 100%;\n    }\n    h3 {\n        color: var(--colorMain)\n    }\n  `;","import { html } from \"lit\"\nimport { pureLit } from \"pure-lit\"\nimport { Health } from \"../../../game\"\n\nexport default pureLit(\"health-bar\", ({ health: {current, max}}: {health: Health}) => \n    html`<loading-bar id=\"health\" width=\"${(current / max) * 100}%\"></loading-bar>`\n)","export const asNumber = (number: Number) => {\n    return parseInt(number.toString(), 10)\n}","import { html } from \"lit\";\nimport { css } from \"nested-css-to-flat/lit-css\"\n\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\";\nimport { buildings } from \"..\";\nimport { ActionableAsset, HealthyAsset, Player, Resources, Team } from \"../../game\";\nimport costs from \"../../game/player/costs\";\nimport {\n  KnightCreated,\n  PlayerUpdate,\n  WagonCreated,\n} from \"../../game/world/events\";\nimport { text, texts } from \"../../internationalization\";\nimport { sidebarBaseCSS } from \"./sidebar.style\";\n\nimport \"./controls/health-bar\"\nimport { asNumber } from \"../../math/number\";\n\ntype Props = {\n  selected: {\n    payload: HealthyAsset & ActionableAsset;\n    col: number;\n    row: number;\n  };\n};\n\nconst style = css`\n  header {\n    display: grid;\n    grid-template-areas: \n        \"castle castle health health health\"\n        \"castle castle stats stats stats\"\n        \"castle castle attack none none\";\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n    \n    & #castle {\n      grid-area: castle;\n      position: relative;\n      width: 4em;\n      height: 4em;\n    }\n    & #health {\n      grid-area: health;\n    }\n    & #stats {\n      grid-area: stats;\n    }\n  }\n  h3 {\n    text-align: center;\n    margin-top: 0;\n  }\n  resource-counter {\n    display: grid;\n    grid-template-columns: 1fr;\n    font-size: 0.7rem;\n    \n    &.enough {\n      color: var(--colorMain);\n    }\n    &.lack {\n      color: var(--colorHighlight);\n    }\n  }\n`;\n\nconst costList = (resources: Resources, costs: Resources) => {\n  return html`\n    ${costs.hay > 0\n      ? html`<resource-counter\n          count=\"${costs.hay}\"\n          class=\"${resources.hay >= costs.hay ? \"enough\" : \"lack\"}\"\n        >\n          <resource-hay></resource-hay>\n        </resource-counter>`\n      : html``}\n    ${costs.grain > 0\n      ? html`<resource-counter\n          count=\"${costs.grain}\"\n          class=\"${resources.grain >= costs.grain ? \"enough\" : \"lack\"}\"\n        >\n          <resource-grain></resource-grain>\n        </resource-counter>`\n      : html``}\n    ${costs.wood > 0\n      ? html`<resource-counter\n          count=\"${costs.wood}\"\n          class=\"${resources.wood >= costs.wood ? \"enough\" : \"lack\"}\"\n        >\n          <resource-wood></resource-wood>\n        </resource-counter>`\n      : html``}\n    ${costs.stone > 0\n      ? html`<resource-counter\n          count=\"${costs.stone}\"\n          class=\"${resources.stone >= costs.stone ? \"enough\" : \"lack\"}\"\n        >\n          <resource-stone></resource-stone>\n        </resource-counter>`\n      : html``}\n    ${costs.iron > 0\n      ? html`<resource-counter\n          count=\"${costs.iron}\"\n          class=\"${resources.iron >= costs.iron ? \"enough\" : \"lack\"}\"\n        >\n          <resource-iron></resource-iron>\n        </resource-counter>`\n      : html``}\n  `;\n};\n\nexport default pureLit(\n  \"sidebar-castle\",\n  (el: LitElementWithProps<Props>) => {\n    const {\n      selected: {\n        payload,\n        row,\n        col,\n      },\n    } = el;\n    const { team, health, actions } = payload\n    const start = {\n      row: asNumber(row),\n      col: asNumber(col)\n    }\n    const { get: getCurrentPlayer, set: setCurrentPlayer } = useState<\n      Player | undefined\n    >(el, undefined);\n    useReceptor(el, PlayerUpdate, setCurrentPlayer);\n    const { resources } = getCurrentPlayer() ?? ({ resources: {} } as Player);\n    return html`\n      <header>\n        <building-castle-small id=\"castle\" team=\"${team}\"></building-castle-small>\n        <health-bar id=\"health\" .health=\"${health}\"></health-bar>\n        <stats-bar id=\"stats\" .health=\"${health}\" .actions=\"${actions}\"></stats-bar>\n        <button-attack id=\"attack\" .actions=\"${actions}\" .asset=\"${payload}\" .position=\"${start}\"></button-attack>\n      </header>\n      <h3>${text(texts.assets.castle.build)}</h3>\n      <div class=\"container\">\n        <button-image\n          height=\"35px\"\n          src=\"/assets/knight_${team}.png\"\n          title=\"${text(texts.assets.properties.actions.build.knight)}\"\n          @click=${async () =>\n        await releaseHormone(KnightCreated, { team, row, col, origin: payload })}\n        >\n          ${costList(resources, costs.knight())}\n        </button-image>\n        <button-image\n          height=\"35px\"\n          src=\"/assets/wagon_${team}.png\"\n          title=\"${text(texts.assets.properties.actions.build.wagon)}\"\n          @click=${async () =>\n        await releaseHormone(WagonCreated, { team, row, col, origin: payload })}\n        >\n          ${costList(resources, costs.wagon())}\n        </button-image>\n        <button-image height=\"35px\" \n          title=\"${text(texts.assets.properties.actions.build.iron)}\"\n          src=\"/assets/resources/iron.png\">\n          ${costList(resources, costs.iron())}\n        </button-image>\n        <button-image height=\"35px\" \n          title=\"${text(texts.assets.properties.actions.build.castle_medium)}\"\n          src=\"/assets/castle_medium_${team}.png\">\n          ${costList(resources, costs.castle_medium())}\n        </button-image>\n        <button-image height=\"35px\" \n          title=\"${text(texts.assets.properties.actions.build.castle_large)}\"\n          src=\"/assets/castle_large_${team}.png\">\n          ${costList(resources, costs.castle_large())}\n        </button-image>\n      </div>`;\n  },\n  {\n    styles: [sidebarBaseCSS, style],\n    defaults: {\n      selected: {\n        payload: {\n          id: \"\",\n          name: buildings.castleSmall.name,\n          team: \"\" as Team,\n          health: { current: 0, max: 0 },\n          actions: { current: 0, max: 0 },\n        },\n\n        col: 0,\n        row: 0,\n      },\n    },\n  }\n);\n","import { css, html } from \"lit\";\nimport { releaseHormone } from \"organismus\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\nimport { FigherAsset } from \"../../game\";\nimport { MoveModeActivate } from \"../../game/world/events\";\nimport { text, texts } from \"../../internationalization\";\nimport { asNumber } from \"../../math/number\";\nimport { sidebarBaseCSS } from \"./sidebar.style\";\n\ntype Props = {\n    selected : { \n        payload: FigherAsset\n        col: number\n        row: number\n    }\n}\n\nconst style = css`\n    .container {\n        grid-template-areas: \n            \"knight knight health health health\"\n            \"knight knight stats stats stats\"\n            \"knight knight move attack fortify\";\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n    }\n    #knight {\n        grid-area: knight;\n    }\n    #health {\n        grid-area: health;\n    }\n    #attack {\n        grid-area: attack;\n    }\n    #stats {\n        grid-area: stats;\n    }\n`\nexport default pureLit(\"sidebar-knight\", (_: LitElementWithProps<Props>) => {\n    const { selected: { payload, row, col } } = _;\n    const {health, actions} = payload\n    const start = {\n        row: asNumber(row),\n        col: asNumber(col)\n    }\n    return html`\n    <h3>${text(texts.assets.knight)}</h3>\n    <div class=\"container\">\n        <img id=\"knight\" src=\"/assets/knight_${payload.team}.png\">\n        <health-bar id=\"health\" .health=\"${health}\"></health-bar>\n        <stats-bar id=\"stats\" .health=\"${health}\" .actions=\"${actions}\"></stats-bar>\n        <button ?disabled=${actions.current < 1} id=\"move\" title=\"${text(texts.assets.properties.actions.move)}\" @click=${() => releaseHormone(MoveModeActivate, { asset: { ...payload }, start })}></button>\n        <button-attack id=\"attack\" .actions=\"${actions}\" .asset=\"${payload}\" .position=\"${start}\"></button-attack>\n        <button ?disabled=${actions.current < 1} id=\"fortify\" title=\"${text(texts.assets.properties.actions.fortify)}\" ></button>\n    </div>`\n},\n    {\n        styles: [\n            sidebarBaseCSS,\n            style\n        ],\n        props: [\n            { \"selected\" : {type: Object}}\n        ]\n    })","import { css, html } from \"lit\";\nimport { hypothalamus, releaseHormone } from \"organismus\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\nimport { FigherAsset } from \"../../game\";\nimport { BuildLumberjackSmall, BuildLumberjackSmallFailed, BuildLumberjackSmallSuccess, BuildMineSmall, MoveModeActivate } from \"../../game/world/events\";\nimport { text, texts } from \"../../internationalization\";\nimport { asNumber } from \"../../math/number\";\n\ntype Props = {\n    selected: {\n        payload: FigherAsset\n        col: number\n        row: number\n    }\n}\n\nconst style = css`\n    :host {\n        display: block;\n        background-image: url('/assets/sidebar/bg.png');\n        background-size: 100% 100%;\n        background-repeat: no-repeat;\n        padding: 15px;\n    }\n    .container {\n        display: grid;\n        grid-template-areas: \n            \"wagon wagon health health health\"\n            \"wagon wagon stats stats stats\"\n            \"move build_1 build_2 build_3 load\";\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n        column-gap: 10px;\n        row-gap: 15px;\n        margin: 15px;\n    }\n    button {\n        cursor: pointer;\n    }\n    #knight {\n        grid-area: knight;\n    }\n    #health {\n        grid-area: health;\n    }\n    #move {\n        grid-area: move;\n    }\n    #load {\n        grid-area: load;\n    }\n    #build_lumberjack {\n        grid-area: build_1;\n    }\n    #build_mine {\n        grid-area: build_2;\n    }\n    #stats {\n        grid-area: stats;\n    }\n    img {\n        width: 100%;\n    }\n    h3 {\n        color: var(--colorMain)\n    }\n`\n\nhypothalamus.on(BuildLumberjackSmallSuccess, (...args) => console.log(\"BuildLumberjackSmallSuccess\", ...args))\nhypothalamus.on(BuildLumberjackSmallFailed, console.error)\nhypothalamus.on(BuildLumberjackSmall, (...args) => console.log(\"BuildLumberjackSmall\", ...args))\n\nexport default pureLit(\"sidebar-wagon\", (_: LitElementWithProps<Props>) => {\n    const { selected: { payload, row, col } } = _;\n    const { health, actions } = payload\n    const start = {\n        row: asNumber(row),\n        col: asNumber(col)\n    }\n    return html`\n    <h3>${text(texts.assets.wagon)}</h3>\n    <div class=\"container\">\n        <img id=\"wagon\" src=\"/assets/wagon_${payload.team}.png\">\n        <health-bar id=\"health\" .health=\"${health}\"></health-bar>\n        <stats-bar id=\"stats\" .health=\"${health}\" .actions=\"${actions}\"></stats-bar>\n        <button ?disabled=${actions.current < 1} id=\"move\"  title=\"${text(texts.assets.properties.actions.move)}\" @click=${() => releaseHormone(MoveModeActivate, { asset: { ...payload }, start })}></button>\n        <button ?disabled=${actions.current < 1} id=\"build_lumberjack\" title=\"${text(texts.assets.properties.actions.build.lumberjack_small)}\" @click=${() => releaseHormone(BuildLumberjackSmall, { asset: { ...payload }, position: start })}>\n            <img id=\"build_lumberjack_small\" src=\"/assets/lumberjack_small_${payload.team}.png\">\n        </button>\n        <button ?disabled=${actions.current < 1} id=\"build_mine\" title=\"${text(texts.assets.properties.actions.build.mine_small)}\" @click=${() => releaseHormone(BuildMineSmall, { asset: { ...payload }, position: start })}>\n            <img id=\"build_mine_small\" src=\"/assets/mine_small_${payload.team}.png\">\n        </button>\n        <button ?disabled=${actions.current < 1} id=\"load\"  title=\"${text(texts.assets.properties.actions.load)}\"></button>\n    </div>`\n},\n    {\n        styles: [style],\n        props: [\n            { \"selected\": { type: Object } }\n        ]\n    })","import { html } from \"lit\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html\";\nimport { pureLit } from \"pure-lit\";\nimport { Actions, Health } from \"../../../game\";\nimport { text, texts } from \"../../../internationalization\";\n\ntype Props = { \n    health: Health\n    actions: Actions\n}\n\nexport default pureLit(\"stats-bar\", ({health, actions}: Props) => \n    html`${unsafeHTML(text(texts.assets.properties.life, health.current, health.max))}<br>\n    ${unsafeHTML(text(texts.assets.properties.actions, actions.current, actions.max))}`\n)","import { html } from \"lit\"\nimport { releaseHormone } from \"organismus\"\nimport { pureLit } from \"pure-lit\"\nimport { Actions, MoveableAsset, SimpleCoords } from \"../../../game\"\nimport { BattleModeActivate } from \"../../../game/world/events\"\nimport { text, texts } from \"../../../internationalization\"\n\ntype Props = {\n    actions: Actions,\n    asset: MoveableAsset,\n    position: SimpleCoords,\n}\n\nexport const buttonAttack = pureLit(\"button-attack\", ({actions, asset, position}: Props) => {\n    return html`<button ?disabled=${actions.current < 1} id=\"attack\" title=\"${text(texts.assets.properties.actions.attack)}\" @click=${() => releaseHormone(BattleModeActivate, { asset: { ...asset }, start: position })}></button>\n    `\n})","import { css, html } from \"lit\";\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { pureLit, useState, useOnce } from \"pure-lit\";\nimport { ItemSelected, SelectedItem } from \"../../game/world/events\";\n\nimport \"./selectedCastle\"\nimport \"./selectedKnight\"\nimport \"./selectedWagon\"\nimport { Position } from \"../../math/position\";\nimport { buildings, player } from \"..\";\nimport { SidebarLoaded } from \"../../game\";\nimport \"./controls/\"\n\ntype SelectionState = {\n    dirty: boolean\n    position?: Position\n    elements: {item: string, payload?: unknown}[]\n}\n\nconst newState = (element: { row: number, col: number, item: string, payload?: unknown } | undefined) => ({\n    position: element ? new Position(element?.row, element?.col) : undefined,\n    elements: element ? [{item: element.item, payload: element.payload}] : [],\n    dirty: false\n})\n\nexport default pureLit(\"controls-sidebar\", async  (el) => {\n    const { get: getSelectedElement, set: setSelectedElement } = useState<SelectedItem<unknown> | undefined>(el, undefined)\n    useReceptor(el, ItemSelected, setSelectedElement)\n    const selectedElement = getSelectedElement()\n    const {get, set} = useState<SelectionState>(el, newState(selectedElement))\n    const current = get()\n    if (!current.dirty && selectedElement && new Position(selectedElement.row, selectedElement.col).equals(current.position)) {\n        set({ \n            ...current, \n            elements: [...current.elements, {item: selectedElement.item, payload: selectedElement.payload}],\n            dirty: selectedElement.item === \"hexagon\"\n        })\n    } else {\n        set(newState(selectedElement))\n    }\n\n    useOnce(el, () => {\n        setTimeout(() => {\n            releaseHormone(SidebarLoaded)\n        }, 1)\n    })\n\n    return html`\n        ${get().elements.map(element => {\n            switch (element.item) {\n                case buildings.castleSmall.name:\n                    return html`<sidebar-castle \n                        .selected=\"${{row: get().position?.row, col: get().position?.col, payload: element.payload}}\">\n                    </sidebar-castle>`\n                case player.knight.name:\n                    return html`<sidebar-knight\n                        .selected=\"${{row: get().position?.row, col: get().position?.col, payload: element.payload}}\">\n                    </sidebar-knight>`\n                case player.wagon.name:\n                    return html`<sidebar-wagon\n                        .selected=\"${{row: get().position?.row, col: get().position?.col, payload: element.payload}}\">\n                    </sidebar-wagon>`\n                default:\n                    case buildings.castleSmall.name:\n                    return html``\n            }\n        })}\n    `\n}, {\n    styles: css`:host { \n        position: absolute;\n        display: block;\n        min-width: 200px;\n        width: 20%;\n        right: 20px;\n        top: 20px;\n        z-index: 2;\n    }`\n})","import { html } from \"lit\"\n\nimport { css } from \"nested-css-to-flat/lit-css\"\nimport { releaseHormone, useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { FigherAsset } from \"../../game\"\nimport { Dice } from \"../../game/player/dices/dice\"\nimport { BattleThrowDice, ModalBattleOpen } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-battle\", (el) => {\n    const { get, set } = useState<ModalBattleOpen | undefined>(el, undefined)\n    const { get: getSelectedDice, set: setSelectedDice } = useState<Dice | undefined>(el, undefined)\n    useReceptor(el, ModalBattleOpen, set)\n    return html`\n   <modal-window \n        .open=${get() ? true : false} \n        preventClose>\n        <h1 slot=\"header\">Kampf beginnt!</h1>\n        <div class=\"body\">\n        ${get()?.attacker.map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div>\n                        <fighter-info \n                            .player=${player} \n                            row=\"${get()!.location.row}\" \n                            col=\"${get()!.location.col}\">\n                        </fighter-info>\n                        <h3>Whle deine Waffe</h3>\n                        <div class=\"dices\">\n                            <dice-selector .dices=\"${player.dices}\" @select=\"${(dice: CustomEvent<Dice>) => setSelectedDice(dice.detail)}\"></dice-selector>\n                        </div>\n                    </div>\n                `\n        })\n        }${get()?.defender.map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div>\n                        <fighter-info \n                            .player=${player} \n                            row=\"${get()!.location.row}\" \n                            col=\"${get()!.location.col}\">\n                        </fighter-info>\n                    </div>\n                `\n        })\n        }\n        </div>\n        <p slot=\"footer\">\n            <button @click=\"${() => releaseHormone(BattleThrowDice, {\n                attacker: {\n                    asset: get()?.attacker[0],\n                    dices: [getSelectedDice()]\n                },\n                defender: get()?.defender[0],                \n                location: {row: get()!.location.row, col: get()!.location.col},\n            })}\" ?disabled=\"${getSelectedDice() === undefined}\">Wrfeln</button>\n        </p>\n    </modal-window>`\n}, {\n    styles: [\n        css`.body {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            grid-template-rows: auto;\n            & > * {\n                display: block;\n            }\n        }\n        .player-info {\n            display: grid;\n            grid-template-columns: 1fr 3fr;\n        }\n        .sprite {\n            height: 140px;\n        }\n        .health-bar {\n            background-image: url('/assets/knight/health-bg.png');\n            background-size: contain;\n            background-repeat: no-repeat;\n            height: 15px;\n            & .current {\n                background-image: url('/assets/knight/health.png');\n                background-size: contain;\n                background-repeat: no-repeat;\n                height: 15px;\n            }\n        }\n        `\n    ]\n})","import { html, css } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { FigherAsset } from \"../../game\"\nimport { ModalDiceResultOpen } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-dice-result\", (el) => {\n    const { get, set } = useState<ModalDiceResultOpen | undefined>(el, undefined)\n    const attacker = useState<FigherAsset[]>(el, [])\n    const defender = useState<FigherAsset[]>(el, [])\n    let timeout = setTimeout(() => undefined, 1)\n    useReceptor(el, ModalDiceResultOpen, (data) => {\n        set(data);\n        attacker.set(data.attacker);\n        defender.set(data.defender);\n        clearTimeout(timeout)\n        timeout = setTimeout(() => {\n            attacker.set(data.attacker_after)\n            defender.set(data.defender_after)\n        }, 5000)\n    })\n    return html`\n   <modal-window \n        .open=${get() ? true : false} \n        @close=${() => set(undefined)}>\n        <h1 slot=\"header\">Gewrfelt!</h1>\n        <div class=\"body\">\n        ${attacker.get().map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div class=\"attacker\">\n                        <fighter-info \n                            .player=${player} \n                            row=\"${get()?.location.row ?? 0}\" \n                            col=\"${get()?.location.col ?? 0}\">\n                        </fighter-info>\n                    </div>\n                `\n        })\n        }${defender.get().map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div class=\"defender\">\n                        <fighter-info \n                            .player=${player} \n                            row=\"${get()?.location.row ?? 0}\" \n                            col=\"${get()?.location.col ?? 0}\">\n                        </fighter-info>\n                    </div>\n                `\n        })\n        }\n        ${get() ? html`<dice-roll class=\"dice\" result=\"${get()!.result}\"></dice-roll>` : html``}\n        </div>\n\n        <p slot=\"footer\">\n        </p>\n    </modal-window>`\n}, {\n    styles: [\n        css`\n        .body {\n            display: grid;\n            grid-template-areas: \n                \"attacker defender\"\n                \"dice dice\";\n        }\n        .body > * {\n            display: block;\n        }\n        .attacker {\n            grid-area: attacker;\n        }\n        .defender {\n            grid-area: defender;\n        }\n        .dice {\n            grid-area: dice;\n        }\n        `\n    ]\n})","import { css, html } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { AssetTaken, MillTakeover } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-mill-taken\", (el) => {\n    const { get, set } = useState<AssetTaken | undefined>(el, undefined)\n    useReceptor(el, MillTakeover, set)\n    return html`\n    <modal-window \n         .open=${get() ? true : false} \n         @close=${() => set(undefined)}>\n         <h1 slot=\"header\">Mhle bernommen!</h1>\n         <div class=\"body\">\n            <div class=\"by\">\n                <fighter-info \n                    .player=${get()?.by} \n                    .row=\"${get()?.location.row}\" \n                    .col=\"${get()?.location.col}\">\n                </fighter-info>\n            </div>\n            <div class=\"mills\">\n                <building-mill .team=\"${get()?.transfered.to}\" class=\"after\"></building-mill>\n                <building-mill .team=\"${get()?.transfered.from}\" class=\"before\"></building-mill>\n            </div>\n         </div>\n         <p slot=\"footer\">\n         </p>\n     </modal-window>`\n}, {\n    styles: css`\n    .body {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n    }\n\n    .mills {\n        position: relative;\n        justify-self: center;\n    }\n    .after {\n        z-index: 1;\n    }\n    .before {\n        z-index: 2;\n        animation: fadeOut 5s 1;\n        animation-fill-mode: forwards;\n    }\n    \n    @keyframes fadeOut {\n        0%   {\topacity: 1;\t}\n        100%   {\topacity: 0;\t}\n    }\n    `\n})","import { html, css } from \"lit\"\nimport { releaseHormone, useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { PlayerNoActionsLeft, TurnPlayerComplete } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-no-more-turns\", (el) => {\n    const { getState, publish } = useState<boolean | undefined>(el, undefined)\n    useReceptor(el, PlayerNoActionsLeft, publish)\n    return html`\n   <modal-window \n        .open=${getState() ? true : false} \n        preventClose>\n        <h1 slot=\"header\">Keine Aktionen brig.</h1>\n        <div class=\"body\">\n            Du hast keine Aktionen mehr brig. Willst du weiter geben, oder noch rum schauen?\n        </div>\n        <p slot=\"footer\">\n            <button @click=\"${() => (releaseHormone(TurnPlayerComplete), publish(false))}\">Zug beenden</button>\n            <button @click=\"${() => publish(false)}\">Noch rumschauen</button>\n        </p>\n    </modal-window>`\n}, {\n    styles: [\n        css`\n        .body {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            grid-template-rows: auto;\n        }\n        .body > * {\n            display: block;\n        }\n        .player-info {\n            display: grid;\n            grid-template-columns: 1fr 3fr;\n        }\n        .sprite {\n            height: 140px;\n        }\n        .health-bar {\n            background-image: url('/assets/knight/health-bg.png');\n            background-size: contain;\n            background-repeat: no-repeat;\n            height: 15px;\n        }\n        .health-bar .current {\n            background-image: url('/assets/knight/health.png');\n            background-size: contain;\n            background-repeat: no-repeat;\n            height: 15px;\n        }\n        `\n    ]\n})","import { html } from \"lit\"\nimport { pureLit } from \"pure-lit\"\n\nexport * from \"./Battle\"\nexport * from \"./DiceResult\"\nexport * from \"./MillTaken\"\nexport * from \"./NoMoreTurns\"\n\nexport default pureLit(\"modals-all\", () => {\n    return html`\n    <modal-no-more-turns></modal-no-more-turns>\n    <modal-battle></modal-battle>\n    <modal-dice-result></modal-dice-result>\n    <modal-mill-taken></modal-mill-taken>`\n})","import { html } from \"lit\";\nimport { css } from \"nested-css-to-flat/lit-css\";\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { pureLit, useState } from \"pure-lit\";\nimport { Asset, isMoveableAsset, Team } from \"../../game\";\nimport { UpdateAllPlayerElements, TurnAccepted, TurnPlayerComplete } from \"../../game/world/events\";\nimport { spriteGridFactory } from \"../sprites\";\nimport { sidebar, sidebarFor } from \"../styles\";\n\nexport default pureLit(\"footer-element\", (el) => {\n    const {get: getTeam, set: setTeam} = useState<Team | undefined>(el, undefined)\n    const {get: getAssets, set: setAssets} = useState<Asset[]>(el, [])\n    useReceptor(el, TurnAccepted, setTeam)\n    useReceptor(el, UpdateAllPlayerElements, setAssets)\n    return html`<footer class=\"${getTeam()!}\">\n    <div class=\"main \">\n        ${spriteGridFactory(getAssets()\n            .sort((a, b) => a.name.localeCompare(b.name))\n            .filter(asset => isMoveableAsset(asset) && asset.actions.current > 0), \n            \"width: 10vh; height: 10vh;\")}\n    </div>\n    <div class=\"action\">\n        <button-pure @click=\"${() => releaseHormone(TurnPlayerComplete)}\">\n            <text-block type=\"paragraph\" size=\"x-large\"></text-block> Zug beenden\n        </button-pure>\n    </div>\n</footer>`\n}, {\n    styles: [\n        sidebar,\n        sidebarFor(\"footer .main\"),\n        css`\n    footer {\n        min-height: 10vh;\n        max-height: 10vh;\n        display: grid;\n        grid-template-columns: 3fr 1fr;\n        grid-template-rows: auto;\n        grid-template-areas: \n            \"main action\";\n        padding-left: 5vw;\n        padding-right: 5vw;\n        & .main {\n            grid-area: main;\n            transition: background-color 2s;\n            min-height: 10vh;\n            max-height: 10vh;\n            overflow-x: auto;\n        }        \n        &.red {\n            background-color: #A95C44;\n        }\n        &.green {\n            background-color: #178044;\n        }\n        & .action {\n            grid-area: action;\n            place-self: center;\n        }\n    }`]\n})","import { css } from \"lit\";\n\nexport const baseResource = css`\n  :host {\n    display: inline-block;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    width: 3vh;\n    height: 3vh;\n  }\n  div {\n    width: 100%;\n    height: 100%;\n  }\n`;\n","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { text, texts } from \"../../internationalization\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\n  \"resource-grain\",\n  () => {\n    return html`<div title=\"${text(texts.resources.grain)}\"></div>`;\n  },\n  {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/grain.png\");\n        }\n      `,\n      baseResource,\n    ]\n  }\n);\n","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { text, texts } from \"../../internationalization\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\"resource-stone\", () => {\n  return html`<div title=\"${text(texts.resources.stone)}\"></div>`\n}, {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/stone.png\");\n        }\n      `,\n      baseResource,\n    ]\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { text, texts } from \"../../internationalization\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\"resource-iron\", () => {\n    return html`<div title=\"${text(texts.resources.iron)}\"></div>`\n}, {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/iron.png\");\n        }\n      `,\n      baseResource,\n    ]\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { text, texts } from \"../../internationalization\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\"resource-wood\", () => {\n  return html`<div title=\"${text(texts.resources.log)}\"></div>`\n}, {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/log.png\");\n        }\n      `,\n      baseResource,\n    ]\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { text, texts } from \"../../internationalization\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\n  \"resource-hay\",\n  () => {\n    return html`<div title=\"${text(texts.resources.hay)}\"></div>`;\n  },\n  {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/hay.png\");\n        }\n      `,\n      baseResource,\n    ]\n  }\n);\n","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\n\ntype Props = {\n    count: number,\n    collect: number | undefined,\n}\n\nexport default pureLit(\"resource-counter\", ({count, collect}: Props) => {\n    return html`\n        <slot></slot>\n        ${count} ${collect ? html`<span>(+${collect})</span>` : \"\"}\n    `\n}, {\n    styles: [\n        css`\n        :host {\n            font-size: 4vh;\n        }\n        span {\n            font-size: smaller;\n        }\n        `\n    ],\n    defaults : {\n        count: 0,\n        collect: undefined,\n    }\n})","import { html } from \"lit\";\nimport { css } from \"nested-css-to-flat/lit-css\"\n\nimport { useReceptor } from \"organismus\";\nimport { pureLit, useState } from \"pure-lit\";\nimport { Player, ResourceGeneratingBuilding, ResourceGenerator, RESOURCES, Team } from \"../../game\";\nimport { DistributeResources, PlayerUpdate, TurnAccepted, UpdatedResources } from \"../../game/world/events\";\nimport { text, texts } from \"../../internationalization\";\n\nimport '../resources'\n\nexport default pureLit(\"header-element\", (el) => {\n    const {get: getCurrentTeam, set: setCurrentTeam} = useState<Team | undefined>(el, undefined)\n    const {get: getCurrentPlayer, set: setCurrentPlayer} = useState<Player | undefined>(el, undefined)\n    const {get: getResources, set: setResources} = useState<DistributeResources | undefined>(el, undefined)\n    useReceptor(el, TurnAccepted, setCurrentTeam)\n    useReceptor(el, PlayerUpdate, setCurrentPlayer)\n    useReceptor(el, UpdatedResources, setResources)\n    const player = getCurrentPlayer() ?? { resources: {}} as Player\n    const applyResource = (map: any, resource: string, amount: number) => {\n        map[resource] = (map[resource] || 0) + amount\n        return map\n    }\n    const applyAllResources = (map: any, generator: ResourceGeneratingBuilding) => {\n        for (const resource of RESOURCES) {\n            map = applyResource(map, resource, (generator.resources as any)[resource]?.generatedResource ?? 0)\n        }\n        return map\n    }\n    const resources: ResourceGenerator = getResources()?.resourcesToGenerate.reduce(applyAllResources, {}) ?? {}\n    return html`<header class=\"${getCurrentTeam()!}\">\n        <resource-counter title=\"${text(texts.resources.hay)}\" count=\"${player.resources.hay}\" collect=${resources.hay ?? 0}>\n            <resource-hay></resource-hay>\n        </resource-counter>\n        <resource-counter title=\"${text(texts.resources.grain)}\" count=\"${player.resources.grain}\" collect=${resources.grain ?? 0}>\n            <resource-grain></resource-grain>\n        </resource-counter>\n        <resource-counter title=\"${text(texts.resources.stone)}\" count=\"${player.resources.stone}\" collect=${resources.stone ?? 0}>\n            <resource-stone></resource-stone>\n        </resource-counter>\n        <resource-counter title=\"${text(texts.resources.iron)}\" count=\"${player.resources.iron}\" collect=${resources.iron ?? 0}>\n            <resource-iron></resource-iron>\n        </resource-counter>\n        <resource-counter title=\"${text(texts.resources.log)}\" count=\"${player.resources.wood}\" collect=${resources.wood ?? 0}>\n            <resource-wood></resource-wood>\n        </resource-counter>\n    </header>`\n}, {\n    styles: css`\n    header {\n        min-height: 5vh;\n        max-height: 5vh;\n        background-size: 200% 100%;\n        transition: background-position 2s;\n        background-image: \n            linear-gradient(to right, #178044 0%, white 50%, #A95C44 100%);\n    }\n    .green {\n        background-position: 0% 0%;\n    }\n    .red {\n        background-position: 100% 0%;\n    }`\n})","import { html } from \"lit\"\nimport { css } from \"nested-css-to-flat/lit-css\"\nimport { releaseHormone } from \"organismus\"\nimport { pureLit } from \"pure-lit\"\nimport { load } from \"../game\"\nimport { Abort } from \"../game/world/events\"\nimport { sidebar, sidebarFor } from \"./styles\"\n\nexport * from \"./elements\"\nexport * from \"./player/\"\nexport * from \"./map/\"\nexport * as buildings from \"./buildings/\"\nexport * as player from \"./player/\"\nexport * from \"./sidebar/sidebar\"\nexport * from \"./modals\"\nexport * from \"./footer\"\nexport * from \"./header\"\n\ndocument.querySelector(\"body\")?.addEventListener(\"keyup\", function (e) {\n    if (e.key === \"Escape\") {\n        releaseHormone(Abort, true)\n    }\n})\n\nexport default pureLit(\"the-mill\", () => {\n    load({ rows: 10, cols: 10 })\n    return html`\n    <controls-sidebar>sidebar</controls-sidebar>\n    <map>\n        <header-element>header</header-element>\n        <world-map></world-map>\n        <footer-element>\n        </footer-element>\n        <modals-all></modals-all>\n    </map>\n\n    `\n}, {\n    styles: [\n        sidebar,\n        sidebarFor(`world-map`),\n        sidebarFor(`controls-sidebar`),\n        css`\n    header-element {\n        grid-area: header;\n    }\n    world-map {\n        grid-area: main;\n        min-height: 85vh;\n        max-height: 85vh;\n        overflow: auto;\n        scroll-behavior: smooth;\n        background-color: #87CEFA;\n    }\n    \n    footer-element {\n        grid-area: footer;\n    }\n    \n    map {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n        grid-template-rows: auto;\n        grid-template-areas: \n            \"header header header header header\"\n            \"main main main main main\"\n            \"footer footer footer footer footer\";\n        }\n    :host {\n        position: relative;\n        display: block;\n    }\n    `]\n})","// get the query string for the language\nconst search = window.location.search.substring(1);\nconst queryString = search.split(\"&\").reduce((query, part) => {\n    const [key, value] = part.split(\"=\");\n    query[key] = value;\n    return query\n}, {} as { [key: string]: string });\ndocument.documentElement.lang = queryString.lang || \"en\";\n\nexport * from \"./assets\""],"names":["t","window","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","e","Symbol","n","Map","s","[object Object]","this","_$cssResult$","Error","cssText","styleSheet","get","set","replaceSync","o","r","length","reduce","S","cssRules","trustedTypes","emptyScript","h","reactiveElementPolyfillSupport","i","Boolean","Object","Array","JSON","stringify","Number","parse","l","attribute","type","String","converter","reflect","hasChanged","a","HTMLElement","super","_$Et","isUpdatePending","hasUpdated","_$Ei","push","observedAttributes","finalize","elementProperties","forEach","_$Eh","_$Eu","state","noAccessor","hasOwnProperty","getPropertyDescriptor","defineProperty","requestUpdate","configurable","enumerable","finalized","getPrototypeOf","properties","getOwnPropertyNames","getOwnPropertySymbols","createProperty","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","_$Ep","Promise","enableUpdating","_$AL","_$Em","constructor","_$Eg","renderRoot","isConnected","hostConnected","call","splice","indexOf","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","map","document","createElement","litNonce","setAttribute","textContent","appendChild","createRenderRoot","hostDisconnected","_$AK","toAttribute","removeAttribute","getPropertyOptions","fromAttribute","has","_$EC","_$E_","reject","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$EU","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","_$ES","mode","ReactiveElement","globalThis","reactiveElementVersions","createPolicy","createHTML","Math","random","slice","createComment","d","c","v","f","_","m","g","$","_$litType$","strings","values","p","b","for","w","T","WeakMap","A","createTreeWalker","E","parts","u","lastIndex","exec","test","RegExp","y","startsWith","C","el","currentNode","content","firstChild","remove","append","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","split","index","name","ctor","M","H","I","tagName","data","innerHTML","P","_$Cl","_$Cu","_$litDirective$","_$AO","_$AT","_$AS","V","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","N","nextSibling","L","_$AI","_$AH","_$AA","_$AB","options","_$Cg","startNode","endNode","_$AR","k","iterator","insertBefore","createTextNode","_$AC","_$AP","element","fill","arguments","capture","once","passive","removeEventListener","addEventListener","host","handleEvent","z","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Dt","renderBefore","render","_$litPart$","connectedCallback","setConnected","disconnectedCallback","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","isObject","subject","parseElement","value","level","val","currentVal","trim","node","endIndex","parseNode","substr","prevState","currentKey","keyStartIndex","undefined","atNode_create","transform","cssString","parent","atRule","innerFlatten","entries","key","replace","filter","result","join","prev","trimEnd","flatten","css","litCss","unsafeCSS","string","tags","str","toString","SILENT","ERROR","INFO","DEBUG","TRACE","console","error","trace","log","queue","list","actionDictionary","hormones","callback","keys","includes","every","assign","readOnce","loadIfExists","defaultValue","transformation","receptors","async","Function","orchestrate","all","onlyIf","onTriggered","some","props","defaults","customElements","define","resolve","catch","global","self","shallowClone","Date","dispatchEvent","withWorkflow","withReducer","withState","decorate","asUpdateableLitElement","count","states","reducers","workflows","updateDefault","inject","next","throw","done","then","apply","useState","j","O","useReducer","CustomEvent","detail","subscribe","when","dispatch","useWorkflow","x","reducer","initialState","args","addActivity","addSideeffect","projections","addCompensation","compensate","after","now","setTimeout","plan","history","withEffect","q","effects","useOnce","useEffect","D","R","on","observe","J","W","range","start","end","from","Cube","costs","other","transpose","cube","to","max","abs","distance","results","min","add","direction","cubeDirections","neighbor","dir","find","equals","radius","negRadius","col","row","Position","toPosition","toCoords","neigboursMaps","manhattan","euclid","SimpleCoordsEquals","system","neighbour","sqrt","pow","euclidPointDistance","manhattanPointDistance","prevPosition","parseInt","generateUUID","getTime","d2","performance","floor","texts","stone","default","de","en","grain","hay","iron","wagon","knight","castle","build","dices","standard","story","mightyBlowOfBetrayal","smallCastleDefence","life","actions","move","attack","fortify","load","castle_medium","castle_large","lumberjack_small","mine_small","text","documentElement","lang","getTexts","roll","sum","dice","sides","SmallCastle","id","team","occurences","health","current","resources","generatedResource","region","green","array","round","red","RESOURCES","isResourceGeneratingAsset","asset","isPositionedAsset","isActionableAsset","isMoveableAsset","isFighterAsset","isFightingAsset","Mill","isDistributedSpriteSet","sprite","buildings","getRandomLocation","rows","cols","rel","number","getResourceGeneratingBuildings","world","into","elements","building","generateResources","_a","resource","resourceGenerator","TerrainPresets","gras","file","movementCosts","defense","desert","mud","muddyHills","forest","mountain","randomTerrain","WorldLoaded","defineHormone","StartGame","SidebarLoaded","loadMapAssets","arrayForBuildings","factor","position","size","getBuildingsForMap","loadPlayerAssets","nextIndex","getPlayerStartAssets","getNextElement","pop","Heapify","capacity","PrioritiesBackingArrayType","Uint32Array","_keys","_priorities","priority","parentIndex","halfLength","left","childPriority","childKey","childIndex","right","rightPriority","pos","bubbleUp","bubbleDown","toStringTag","shortestPath","goal","isBlocked","frontier","cameFrom","costSoFar","visited","foundPath","path","neighbors","newCost","cost","heuristic","startPosition","fromString","Abort","defineSingleHormone","PlayerUpdate","RequestSelectCoords","ItemSelected","ItemMoved","KnightCreated","WagonCreated","UpdateAllPlayerElements","ActionPerformed","CheckPlayerHasActionsLeft","PlayerNoActionsLeft","HexagonUpdated","MoveModeActivate","MoveModeActivated","MoveModeDeactivate","MoveModeTargetHovered","MoveModeEnd","BuildLumberjackSmall","BuildLumberjackSmallSuccess","BuildLumberjackSmallFailed","BuildMineSmall","BuildMineSmallSuccess","BuildMineSmallFailed","BattleModeActivate","BattleModeActive","BattleModeEnd","BattleModeDeactivate","BattleStarted","BattleThrowDice","BattlePlayerAttacked","MillTakeover","LumberjackTakeover","MineTakeover","ModalBattleOpen","ModalDiceResultOpen","TurnStarted","TurnAccepted","TurnPlayerComplete","TurnsComplete","ResourcesGenerated","ResourceGenerationComplete","ResourceSummary","DistributeResources","RequestUpdatedResources","UpdatedResources","wood","findAllElementsFromTeam","findElement","deepQuerySelector","querySelector","querySelectorAll","hexagon","isTerrain","currentTurn","worldAsCube","turns","players","getPlayer","getActivePlayer","hasActionsLeft","isOnTurn","hypothalamus","newWorld","rowIndex","colIndex","toCube","terrain","releaseHormone","abort","teams","resourcesToGenerate","before","initialResources","availableResources","resourceGeneratingBuildings","touched","resourceGeneratingBuilding","source","allocateResources","collect","generator","playerAssets","playerCastle","buildings.castleSmall.name","item","payload","scrollIntoView","behavior","block","inline","resourceMap","assets","TurnComplete","tryPay","origin","player.knight.name","movement","points","CreateKnight","player.wagon.name","CreateWagon","currentTeam","playerWithActionsLeft","findNextPlayerWithAction","firstWagonIndex","findIndex","reason","lumberjack","CreateSmallLumberjack","mine","CreateSmallMine","safeNumber","moveModeState","battleModeState","isInReach","isReachable","inReach","acc","tile","trail","actualEnd","location","otherKnights","attacker","defender","otherElements","hormone","buildings.mill.name","buildings.lumberjackSmall.name","buildings.mineSmall.name","assetToTake","assetTaken","transfered","by","damage","attacker_after","defender_after","hash","setLoglevel","LOGLEVEL","inactive","sidebar","sidebarFor","pureLit","style","height","html","src","modalCoreCss","modalHeaderCss","trigger","event","open","preventClose","getState","modalOpen","publish","modalSetOpen","width","useReceptor","side","_$Ct","_$Ci","it","directiveName","ft","raw","resultType","doTrigger","triggers","getFilteredTriggers","none","getUpdated","setUpdated","getCurrentTeam","setCurrentTeam","spriteFactory","entry","player","attributes","unsafeHTML","cssHexagon","cssHexagonMovement","getCssClass","moveMode","battleMode","coord","movement.getCssClass","battle.getCssClass","click","movement.click","battle.click","getElements","setElements","getMovementMode","setMovementMode","getBattleMode","setBattleMode","hello","background","getWorld","setWorld","wagonCosts","knightCosts","sidebarBaseCSS","asNumber","costList","selected","getCurrentPlayer","setCurrentPlayer","newState","dirty","getSelectedElement","setSelectedElement","selectedElement","getSelectedDice","setSelectedDice","timeout","clearTimeout","getTeam","setTeam","getAssets","setAssets","elementStyle","spriteGridFactory","sort","localeCompare","baseResource","getResources","setResources","applyResource","amount","mapAssets","redAssets","queryString","search","substring","query","part"],"mappings":";;;;;;AAKA,MAAMA,EAAEC,OAAOC,kBAAa,IAASD,OAAOE,UAAUF,OAAOE,SAASC,eAAe,uBAAuBC,SAASC,WAAW,YAAYC,cAAcD,UAAUE,EAAEC,SAASC,EAAE,IAAIC,IAAI,MAAMC,EAAEC,YAAYb,EAAEU,GAAG,GAAGI,KAAKC,cAAa,EAAGL,IAAIF,EAAE,MAAMQ,MAAM,qEAAqEF,KAAKG,QAAQjB,EAAEkB,iBAAiB,IAAIV,EAAEE,EAAES,IAAIL,KAAKG,SAAS,OAAOjB,QAAG,IAASQ,IAAIE,EAAEU,IAAIN,KAAKG,QAAQT,EAAE,IAAID,eAAeC,EAAEa,YAAYP,KAAKG,UAAUT,EAAEK,WAAW,OAAOC,KAAKG,SAAS,MAAMK,EAAEtB,GAAG,IAAIY,EAAE,iBAAiBZ,EAAEA,EAAEA,EAAE,GAAGQ,GAAGe,EAAE,CAACvB,KAAKU,KAAK,MAAMY,EAAE,IAAItB,EAAEwB,OAAOxB,EAAE,GAAGU,EAAEe,SAASjB,EAAEE,EAAEE,IAAIJ,EAAE,CAACR,IAAI,IAAG,IAAKA,EAAEe,aAAa,OAAOf,EAAEiB,QAAQ,GAAG,iBAAiBjB,EAAE,OAAOA,EAAE,MAAMgB,MAAM,mEAAmEhB,EAAE,yFAA7J,CAAuPU,GAAGV,EAAEY,EAAE,IAAIZ,EAAE,IAAI,OAAO,IAAIY,EAAEU,EAAEd,IAAuPkB,EAAE1B,EAAEA,GAAGA,EAAEA,GAAGA,aAAaO,cAAc,CAACP,IAAI,IAAIQ,EAAE,GAAG,IAAI,MAAME,KAAKV,EAAE2B,SAASnB,GAAGE,EAAEO,QAAQ,OAAOK,EAAEd,IAA9D,CAAmER,GAAGA;;;;;ICA3tC,IAAIY,EAAE,MAAMJ,EAAEP,OAAO2B,aAAaL,EAAEf,EAAEA,EAAEqB,YAAY,GAAGC,EAAE7B,OAAO8B,+BAA+BT,EAAE,CAACT,YAAYb,EAAEgC,GAAG,OAAOA,GAAG,KAAKC,QAAQjC,EAAEA,EAAEuB,EAAE,KAAK,MAAM,KAAKW,OAAO,KAAKC,MAAMnC,EAAE,MAAMA,EAAEA,EAAEoC,KAAKC,UAAUrC,GAAG,OAAOA,GAAGa,cAAcb,EAAEgC,GAAG,IAAIpB,EAAEZ,EAAE,OAAOgC,GAAG,KAAKC,QAAQrB,EAAE,OAAOZ,EAAE,MAAM,KAAKsC,OAAO1B,EAAE,OAAOZ,EAAE,KAAKsC,OAAOtC,GAAG,MAAM,KAAKkC,OAAO,KAAKC,MAAM,IAAIvB,EAAEwB,KAAKG,MAAMvC,GAAG,MAAMA,GAAGY,EAAE,MAAM,OAAOA,IAAIF,EAAE,CAACV,EAAEgC,IAAIA,IAAIhC,IAAIgC,GAAGA,GAAGhC,GAAGA,GAAGwC,EAAE,CAACC,WAAU,EAAGC,KAAKC,OAAOC,UAAUtB,EAAEuB,SAAQ,EAAGC,WAAWpC,GAAG,MAAMqC,UAAUC,YAAYnC,cAAcoC,QAAQnC,KAAKoC,KAAK,IAAIvC,IAAIG,KAAKqC,iBAAgB,EAAGrC,KAAKsC,YAAW,EAAGtC,KAAKuC,KAAK,KAAKvC,KAAKQ,IAAIT,sBAAsBb,GAAG,IAAIgC,EAAE,QAAQA,EAAElB,KAAK0B,SAAI,IAASR,IAAIlB,KAAK0B,EAAE,IAAI1B,KAAK0B,EAAEc,KAAKtD,GAAGuD,gCAAgCzC,KAAK0C,WAAW,MAAMxD,EAAE,GAAG,OAAOc,KAAK2C,kBAAkBC,UAAU1B,EAAEpB,KAAK,MAAMJ,EAAEM,KAAK6C,KAAK/C,EAAEoB,QAAG,IAASxB,IAAIM,KAAK8C,KAAKxC,IAAIZ,EAAEI,GAAGZ,EAAEsD,KAAK9C,OAAOR,EAAEa,sBAAsBb,EAAEgC,EAAEQ,GAAG,GAAGR,EAAE6B,QAAQ7B,EAAES,WAAU,GAAI3B,KAAK0C,WAAW1C,KAAK2C,kBAAkBrC,IAAIpB,EAAEgC,IAAIA,EAAE8B,aAAahD,KAAKR,UAAUyD,eAAe/D,GAAG,CAAC,MAAMY,EAAE,iBAAiBZ,EAAES,SAAS,KAAKT,EAAEQ,EAAEM,KAAKkD,sBAAsBhE,EAAEY,EAAEoB,QAAG,IAASxB,GAAG0B,OAAO+B,eAAenD,KAAKR,UAAUN,EAAEQ,IAAIK,6BAA6Bb,EAAEgC,EAAEpB,GAAG,MAAM,CAACC,MAAM,OAAOC,KAAKkB,IAAInB,IAAIL,GAAG,MAAMe,EAAET,KAAKd,GAAGc,KAAKkB,GAAGxB,EAAEM,KAAKoD,cAAclE,EAAEuB,EAAEX,IAAIuD,cAAa,EAAGC,YAAW,GAAIvD,0BAA0Bb,GAAG,OAAOc,KAAK2C,kBAAkBtC,IAAInB,IAAIwC,EAAE3B,kBAAkB,GAAGC,KAAKiD,eAAe,aAAa,OAAM,EAAGjD,KAAKuD,WAAU,EAAG,MAAMrE,EAAEkC,OAAOoC,eAAexD,MAAM,GAAGd,EAAEwD,WAAW1C,KAAK2C,kBAAkB,IAAI9C,IAAIX,EAAEyD,mBAAmB3C,KAAK8C,KAAK,IAAIjD,IAAIG,KAAKiD,eAAe,cAAc,CAAC,MAAM/D,EAAEc,KAAKyD,WAAWvC,EAAE,IAAIE,OAAOsC,oBAAoBxE,MAAMkC,OAAOuC,sBAAsBzE,IAAI,IAAI,MAAMY,KAAKoB,EAAElB,KAAK4D,eAAe9D,EAAEZ,EAAEY,IAAI,OAAOE,KAAK6D,cAAc7D,KAAK8D,eAAe9D,KAAK+D,SAAQ,EAAGhE,sBAAsBmB,GAAG,MAAMpB,EAAE,GAAG,GAAGuB,MAAM2C,QAAQ9C,GAAG,CAAC,MAAMxB,EAAE,IAAIuE,IAAI/C,EAAEgD,KAAK,EAAA,GAAKC,WAAW,IAAI,MAAMjD,KAAKxB,EAAEI,EAAEsE,QAAQlF,EAAEgC,cAAS,IAASA,GAAGpB,EAAE0C,KAAKtD,EAAEgC,IAAI,OAAOpB,EAAEC,YAAYb,EAAEgC,GAAG,MAAMpB,EAAEoB,EAAES,UAAU,OAAM,IAAK7B,OAAE,EAAO,iBAAiBA,EAAEA,EAAE,iBAAiBZ,EAAEA,EAAEmF,mBAAc,EAAOtE,IAAI,IAAIb,EAAEc,KAAKsE,KAAK,IAAIC,SAASrF,GAAGc,KAAKwE,eAAetF,IAAIc,KAAKyE,KAAK,IAAI5E,IAAIG,KAAK0E,OAAO1E,KAAKoD,gBAAgB,QAAQlE,EAAEc,KAAK2E,YAAYjD,SAAI,IAASxC,GAAGA,EAAE0D,SAAS1D,GAAGA,EAAEc,QAAQD,cAAcb,GAAG,IAAIgC,EAAEpB,GAAG,QAAQoB,EAAElB,KAAK4E,YAAO,IAAS1D,EAAEA,EAAElB,KAAK4E,KAAK,IAAIpC,KAAKtD,QAAG,IAASc,KAAK6E,YAAY7E,KAAK8E,cAAc,QAAQhF,EAAEZ,EAAE6F,qBAAgB,IAASjF,GAAGA,EAAEkF,KAAK9F,IAAIa,iBAAiBb,GAAG,IAAIgC,EAAE,QAAQA,EAAElB,KAAK4E,YAAO,IAAS1D,GAAGA,EAAE+D,OAAOjF,KAAK4E,KAAKM,QAAQhG,KAAK,EAAE,GAAGa,OAAOC,KAAK2E,YAAYhC,kBAAkBC,UAAU1D,EAAEgC,KAAKlB,KAAKiD,eAAe/B,KAAKlB,KAAKoC,KAAK9B,IAAIY,EAAElB,KAAKkB,WAAWlB,KAAKkB,OAAOnB,mBAAmB,IAAIb,EAAE,MAAMY,EAAE,QAAQZ,EAAEc,KAAKmF,kBAAa,IAASjG,EAAEA,EAAEc,KAAKoF,aAAapF,KAAK2E,YAAYU,mBAAmB,MDAp6D,EAAC3F,EAAEE,KAAKV,EAAEQ,EAAE4F,mBAAmB1F,EAAE2F,KAAKrG,GAAGA,aAAaO,cAAcP,EAAEA,EAAEkB,aAAaR,EAAEgD,SAAS1D,IAAI,MAAMU,EAAE4F,SAASC,cAAc,SAAS3F,EAAEX,OAAOuG,cAAS,IAAS5F,GAAGF,EAAE+F,aAAa,QAAQ7F,GAAGF,EAAEgG,YAAY1G,EAAEiB,QAAQT,EAAEmG,YAAYjG,OCAisDsB,CAAEpB,EAAEE,KAAK2E,YAAYd,eAAe/D,EAAEC,oBAAoB,IAAIb,OAAE,IAASc,KAAK6E,aAAa7E,KAAK6E,WAAW7E,KAAK8F,oBAAoB9F,KAAKwE,gBAAe,GAAI,QAAQtF,EAAEc,KAAK4E,YAAO,IAAS1F,GAAGA,EAAE0D,SAAS1D,IAAI,IAAIgC,EAAE,OAAO,QAAQA,EAAEhC,EAAE6F,qBAAgB,IAAS7D,OAAE,EAAOA,EAAE8D,KAAK9F,MAAMa,eAAeb,IAAIa,uBAAuB,IAAIb,EAAE,QAAQA,EAAEc,KAAK4E,YAAO,IAAS1F,GAAGA,EAAE0D,SAAS1D,IAAI,IAAIgC,EAAE,OAAO,QAAQA,EAAEhC,EAAE6G,wBAAmB,IAAS7E,OAAE,EAAOA,EAAE8D,KAAK9F,MAAMa,yBAAyBb,EAAEgC,EAAEpB,GAAGE,KAAKgG,KAAK9G,EAAEY,GAAGC,KAAKb,EAAEgC,EAAEpB,EAAE4B,GAAG,IAAIhC,EAAEe,EAAE,MAAMO,EAAEhB,KAAK2E,YAAY9B,KAAK3D,EAAEY,GAAG,QAAG,IAASkB,IAAG,IAAKlB,EAAEiC,QAAQ,CAAC,MAAMnC,GAAG,QAAQa,EAAE,QAAQf,EAAEI,EAAEgC,iBAAY,IAASpC,OAAE,EAAOA,EAAEuG,mBAAc,IAASxF,EAAEA,EAAED,EAAEyF,aAAa/E,EAAEpB,EAAE8B,MAAM5B,KAAKuC,KAAKrD,EAAE,MAAMU,EAAEI,KAAKkG,gBAAgBlF,GAAGhB,KAAK2F,aAAa3E,EAAEpB,GAAGI,KAAKuC,KAAK,MAAMxC,KAAKb,EAAEgC,GAAG,IAAIpB,EAAEJ,EAAEe,EAAE,MAAMO,EAAEhB,KAAK2E,YAAY/E,EAAEoB,EAAE8B,KAAKzC,IAAInB,GAAG,QAAG,IAASU,GAAGI,KAAKuC,OAAO3C,EAAE,CAAC,MAAMV,EAAE8B,EAAEmF,mBAAmBvG,GAAG8B,EAAExC,EAAE4C,UAAUG,EAAE,QAAQxB,EAAE,QAAQf,EAAE,QAAQI,EAAE4B,SAAI,IAAS5B,OAAE,EAAOA,EAAEsG,qBAAgB,IAAS1G,EAAEA,EAAE,mBAAmBgC,EAAEA,EAAE,YAAO,IAASjB,EAAEA,EAAED,EAAE4F,cAAcpG,KAAKuC,KAAK3C,EAAEI,KAAKJ,GAAGqC,EAAEf,EAAEhC,EAAE0C,MAAM5B,KAAKuC,KAAK,MAAMxC,cAAcb,EAAEgC,EAAEpB,GAAG,IAAIJ,GAAE,OAAG,IAASR,MAAMY,EAAEA,GAAGE,KAAK2E,YAAYwB,mBAAmBjH,IAAI8C,YAAYpC,GAAGI,KAAKd,GAAGgC,IAAIlB,KAAKyE,KAAK4B,IAAInH,IAAIc,KAAKyE,KAAKnE,IAAIpB,EAAEgC,IAAG,IAAKpB,EAAEiC,SAAS/B,KAAKuC,OAAOrD,SAAI,IAASc,KAAKsG,OAAOtG,KAAKsG,KAAK,IAAIzG,KAAKG,KAAKsG,KAAKhG,IAAIpB,EAAEY,KAAKJ,GAAE,IAAKM,KAAKqC,iBAAiB3C,IAAIM,KAAKsE,KAAKtE,KAAKuG,QAAQxG,aAAaC,KAAKqC,iBAAgB,EAAG,UAAUrC,KAAKsE,KAAK,MAAMpF,GAAGqF,QAAQiC,OAAOtH,GAAG,MAAMA,EAAEc,KAAKyG,iBAAiB,OAAO,MAAMvH,SAASA,GAAGc,KAAKqC,gBAAgBtC,iBAAiB,OAAOC,KAAK0G,gBAAgB3G,gBAAgB,IAAIb,EAAE,IAAIc,KAAKqC,gBAAgB,OAAOrC,KAAKsC,WAAWtC,KAAKoC,OAAOpC,KAAKoC,KAAKQ,UAAU1D,EAAEgC,IAAIlB,KAAKkB,GAAGhC,IAAIc,KAAKoC,UAAK,GAAQ,IAAIlB,GAAE,EAAG,MAAMpB,EAAEE,KAAKyE,KAAK,IAAIvD,EAAElB,KAAK2G,aAAa7G,GAAGoB,GAAGlB,KAAK4G,WAAW9G,GAAG,QAAQZ,EAAEc,KAAK4E,YAAO,IAAS1F,GAAGA,EAAE0D,SAAS1D,IAAI,IAAIgC,EAAE,OAAO,QAAQA,EAAEhC,EAAE2H,kBAAa,IAAS3F,OAAE,EAAOA,EAAE8D,KAAK9F,MAAMc,KAAK8G,OAAOhH,IAAIE,KAAK+G,OAAO,MAAM7H,GAAG,MAAMgC,GAAE,EAAGlB,KAAK+G,OAAO7H,EAAEgC,GAAGlB,KAAKgH,KAAKlH,GAAGC,WAAWb,IAAIa,KAAKb,GAAG,IAAIgC,EAAE,QAAQA,EAAElB,KAAK4E,YAAO,IAAS1D,GAAGA,EAAE0B,SAAS1D,IAAI,IAAIgC,EAAE,OAAO,QAAQA,EAAEhC,EAAE+H,mBAAc,IAAS/F,OAAE,EAAOA,EAAE8D,KAAK9F,MAAMc,KAAKsC,aAAatC,KAAKsC,YAAW,EAAGtC,KAAKkH,aAAahI,IAAIc,KAAKmH,QAAQjI,GAAGa,OAAOC,KAAKyE,KAAK,IAAI5E,IAAIG,KAAKqC,iBAAgB,EAAG+E,qBAAqB,OAAOpH,KAAKqH,oBAAoBtH,oBAAoB,OAAOC,KAAKsE,KAAKvE,aAAab,GAAG,OAAM,EAAGa,OAAOb,QAAG,IAASc,KAAKsG,OAAOtG,KAAKsG,KAAK1D,UAAU1D,EAAEgC,IAAIlB,KAAKsH,KAAKpG,EAAElB,KAAKkB,GAAGhC,KAAKc,KAAKsG,UAAK,GAAQtG,KAAK+G,OAAOhH,QAAQb,IAAIa,aAAab;;;;;;ACApyK,IAAIA,EDAqyK+C,EAAEsB,WAAU,EAAGtB,EAAEU,kBAAkB,IAAI9C,IAAIoC,EAAE4B,cAAc,GAAG5B,EAAEoD,kBAAkB,CAACkC,KAAK,QAAQ,MAAMvG,GAAGA,EAAE,CAACwG,gBAAgBvF,KAAK,QAAQnC,EAAE2H,WAAWC,+BAA0B,IAAS5H,EAAEA,EAAE2H,WAAWC,wBAAwB,IAAIlF,KAAK,SCAvgL,MAACtB,EAAEuG,WAAW3G,aAAahB,EAAEoB,EAAEA,EAAEyG,aAAa,WAAW,CAACC,WAAW1I,GAAGA,SAAI,EAAOQ,EAAE,QAAQmI,KAAKC,SAAS,IAAIC,MAAM,MAAMvH,EAAE,IAAId,EAAEE,EAAE,IAAIY,KAAKkB,EAAE8D,SAASxE,EAAE,CAAC9B,EAAE,KAAKwC,EAAEsG,cAAc9I,GAAGuB,EAAEvB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,mBAAmBA,EAAE+I,EAAE5G,MAAM2C,QAAyGkE,EAAE,sDAAsDC,EAAE,OAAOlG,EAAE,KAAKmG,EAAE,oFAAoFC,EAAE,KAAKC,EAAE,KAAKC,EAAE,qCAAwFC,EAAjDtJ,CAAAA,GAAG,CAACgC,KAAKpB,MAAM2I,WAAWvJ,EAAEwJ,QAAQxH,EAAEyH,OAAO7I,IAAM8I,CAAE,GAAUC,EAAElJ,OAAOmJ,IAAI,gBAAgBC,EAAEpJ,OAAOmJ,IAAI,eAAeE,EAAE,IAAIC,QAAyRC,EAAExH,EAAEyH,iBAAiBzH,EAAE,IAAI,MAAK,GAAsyB,MAAM0H,EAAErJ,aAAa2I,QAAQxJ,EAAEuJ,WAAW3I,GAAGF,GAAG,IAAI8B,EAAE1B,KAAKqJ,MAAM,GAAG,IAAI5I,EAAE,EAAEwH,EAAE,EAAE,MAAMqB,EAAEpK,EAAEwB,OAAO,EAAEwH,EAAElI,KAAKqJ,OAAOlB,EAAElG,GAAn5B,EAAC/C,EAAEgC,KAAK,MAAMV,EAAEtB,EAAEwB,OAAO,EAAEgB,EAAE,GAAG,IAAIV,EAAEP,EAAE,IAAIS,EAAE,QAAQ,GAAG+G,EAAEC,EAAE,IAAI,IAAIhH,EAAE,EAAEA,EAAEV,EAAEU,IAAI,CAAC,MAAMpB,EAAEZ,EAAEgC,GAAG,IAAIV,EAAE8I,EAAEV,GAAG,EAAEJ,EAAE,EAAE,KAAKA,EAAE1I,EAAEY,SAASuH,EAAEsB,UAAUf,EAAEc,EAAErB,EAAEuB,KAAK1J,GAAG,OAAOwJ,IAAId,EAAEP,EAAEsB,UAAUtB,IAAIC,EAAE,QAAQoB,EAAE,GAAGrB,EAAEE,OAAE,IAASmB,EAAE,GAAGrB,EAAEhG,OAAE,IAASqH,EAAE,IAAIf,EAAEkB,KAAKH,EAAE,MAAMtI,EAAE0I,OAAO,KAAKJ,EAAE,GAAG,MAAMrB,EAAEG,QAAG,IAASkB,EAAE,KAAKrB,EAAEG,GAAGH,IAAIG,EAAE,MAAMkB,EAAE,IAAIrB,EAAE,MAAMjH,EAAEA,EAAEkH,EAAEU,GAAG,QAAG,IAASU,EAAE,GAAGV,GAAG,GAAGA,EAAEX,EAAEsB,UAAUD,EAAE,GAAG5I,OAAOF,EAAE8I,EAAE,GAAGrB,OAAE,IAASqB,EAAE,GAAGlB,EAAE,MAAMkB,EAAE,GAAGhB,EAAED,GAAGJ,IAAIK,GAAGL,IAAII,EAAEJ,EAAEG,EAAEH,IAAIE,GAAGF,IAAIhG,EAAEgG,EAAEC,GAAGD,EAAEG,EAAEpH,OAAE,GAAQ,MAAM2I,EAAE1B,IAAIG,GAAGlJ,EAAEgC,EAAE,GAAG0I,WAAW,MAAM,IAAI,GAAGnJ,GAAGwH,IAAIC,EAAEpI,EAAEF,EAAEgJ,GAAG,GAAGlH,EAAEc,KAAKhC,GAAGV,EAAEiI,MAAM,EAAEa,GAAG,QAAQ9I,EAAEiI,MAAMa,GAAGlJ,EAAEiK,GAAG7J,EAAEJ,IAAI,IAAIkJ,GAAGlH,EAAEc,UAAK,GAAQtB,GAAGyI,GAAG,MAAML,EAAE7I,GAAGvB,EAAEsB,IAAI,QAAQ,IAAIU,EAAE,SAAS,IAAI,IAAIG,MAAM2C,QAAQ9E,KAAKA,EAAE+D,eAAe,OAAO,MAAM/C,MAAM,kCAAkC,MAAM,MAAC,IAASJ,EAAEA,EAAE8H,WAAW0B,GAAGA,EAAE5H,IAA0HmI,CAAE3K,EAAEY,GAAG,GAAGE,KAAK8J,GAAGV,EAAE3D,cAAc0C,EAAEvI,GAAGsJ,EAAEa,YAAY/J,KAAK8J,GAAGE,QAAQ,IAAIlK,EAAE,CAAC,MAAMZ,EAAEc,KAAK8J,GAAGE,QAAQ9I,EAAEhC,EAAE+K,WAAW/I,EAAEgJ,SAAShL,EAAEiL,UAAUjJ,EAAEkJ,YAAY,KAAK,QAAQ1I,EAAEwH,EAAEmB,aAAanC,EAAExH,OAAO4I,GAAG,CAAC,GAAG,IAAI5H,EAAE4I,SAAS,CAAC,GAAG5I,EAAE6I,gBAAgB,CAAC,MAAMrL,EAAE,GAAG,IAAI,MAAMgC,KAAKQ,EAAE8I,oBAAoB,GAAGtJ,EAAEuJ,SAAS,UAAUvJ,EAAE0I,WAAWlK,GAAG,CAAC,MAAMI,EAAEmC,EAAEgG,KAAK,GAAG/I,EAAEsD,KAAKtB,QAAG,IAASpB,EAAE,CAAC,MAAMZ,EAAEwC,EAAEgJ,aAAa5K,EAAEuE,cAAc,SAASsG,MAAMjL,GAAGwB,EAAE,eAAesI,KAAK1J,GAAGoI,EAAE1F,KAAK,CAACZ,KAAK,EAAEgJ,MAAMnK,EAAEoK,KAAK3J,EAAE,GAAGwH,QAAQxJ,EAAE4L,KAAK,MAAM5J,EAAE,GAAG6J,EAAE,MAAM7J,EAAE,GAAG8J,EAAE,MAAM9J,EAAE,GAAG+J,EAAErK,SAASsH,EAAE1F,KAAK,CAACZ,KAAK,EAAEgJ,MAAMnK,IAAI,IAAI,MAAMS,KAAKhC,EAAEwC,EAAEwE,gBAAgBhF,GAAG,GAAGqH,EAAEkB,KAAK/H,EAAEwJ,SAAS,CAAC,MAAMhM,EAAEwC,EAAEkE,YAAY+E,MAAMjL,GAAGI,EAAEZ,EAAEwB,OAAO,EAAE,GAAGZ,EAAE,EAAE,CAAC4B,EAAEkE,YAAY1E,EAAEA,EAAEH,YAAY,GAAG,IAAI,IAAIG,EAAE,EAAEA,EAAEpB,EAAEoB,IAAIQ,EAAEyI,OAAOjL,EAAEgC,GAAGF,KAAKkI,EAAEmB,WAAWnC,EAAE1F,KAAK,CAACZ,KAAK,EAAEgJ,QAAQnK,IAAIiB,EAAEyI,OAAOjL,EAAEY,GAAGkB,YAAY,GAAG,IAAIU,EAAE4I,SAAS,GAAG5I,EAAEyJ,OAAO3K,EAAE0H,EAAE1F,KAAK,CAACZ,KAAK,EAAEgJ,MAAMnK,QAAQ,CAAC,IAAIvB,GAAG,EAAE,MAAM,KAAKA,EAAEwC,EAAEyJ,KAAKjG,QAAQxF,EAAER,EAAE,KAAKgJ,EAAE1F,KAAK,CAACZ,KAAK,EAAEgJ,MAAMnK,IAAIvB,GAAGQ,EAAEgB,OAAO,EAAED,KAAKV,qBAAqBb,EAAEgC,GAAG,MAAMpB,EAAE4B,EAAE+D,cAAc,YAAY,OAAO3F,EAAEsL,UAAUlM,EAAEY,GAAG,SAASuL,EAAEnM,EAAEgC,EAAEpB,EAAEZ,EAAEQ,GAAG,IAAIc,EAAEZ,EAAE8B,EAAEV,EAAE,GAAGE,IAAI2H,EAAE,OAAO3H,EAAE,IAAI+G,OAAE,IAASvI,EAAE,QAAQc,EAAEV,EAAEwL,YAAO,IAAS9K,OAAE,EAAOA,EAAEd,GAAGI,EAAEyL,KAAK,MAAMjC,EAAE7I,EAAES,QAAG,EAAOA,EAAEsK,gBAAgB,OAAO,MAAMvD,OAAE,EAAOA,EAAEtD,eAAe2E,IAAI,QAAQ1J,EAAE,MAAMqI,OAAE,EAAOA,EAAEwD,YAAO,IAAS7L,GAAGA,EAAEoF,KAAKiD,GAAE,QAAI,IAASqB,EAAErB,OAAE,GAAQA,EAAE,IAAIqB,EAAEpK,GAAG+I,EAAEyD,KAAKxM,EAAEY,EAAEJ,SAAI,IAASA,GAAG,QAAQgC,GAAGV,EAAElB,GAAGwL,YAAO,IAAS5J,EAAEA,EAAEV,EAAEsK,KAAK,IAAI5L,GAAGuI,EAAEnI,EAAEyL,KAAKtD,QAAG,IAASA,IAAI/G,EAAEmK,EAAEnM,EAAE+I,EAAE0D,KAAKzM,EAAEgC,EAAEyH,QAAQV,EAAEvI,IAAIwB,EAAE,MAAM0K,EAAE7L,YAAYb,EAAEgC,GAAGlB,KAAKmI,EAAE,GAAGnI,KAAK6L,UAAK,EAAO7L,KAAK8L,KAAK5M,EAAEc,KAAK+L,KAAK7K,EAAE8K,iBAAiB,OAAOhM,KAAK+L,KAAKC,WAAWC,WAAW,OAAOjM,KAAK+L,KAAKE,KAAKlM,EAAEb,GAAG,IAAIgC,EAAE,MAAM4I,IAAIE,QAAQlK,GAAGuJ,MAAM3J,GAAGM,KAAK8L,KAAKtL,GAAG,QAAQU,EAAE,MAAMhC,OAAE,EAAOA,EAAEgN,qBAAgB,IAAShL,EAAEA,EAAEQ,GAAGyK,WAAWrM,GAAE,GAAIoJ,EAAEa,YAAYvJ,EAAE,IAAIZ,EAAEsJ,EAAEmB,WAAWrJ,EAAE,EAAEP,EAAE,EAAEwH,EAAEvI,EAAE,GAAG,UAAK,IAASuI,GAAG,CAAC,GAAGjH,IAAIiH,EAAE2C,MAAM,CAAC,IAAI1J,EAAE,IAAI+G,EAAErG,KAAKV,EAAE,IAAIkL,EAAExM,EAAEA,EAAEyM,YAAYrM,KAAKd,GAAG,IAAI+I,EAAErG,KAAKV,EAAE,IAAI+G,EAAE6C,KAAKlL,EAAEqI,EAAE4C,KAAK5C,EAAES,QAAQ1I,KAAKd,GAAG,IAAI+I,EAAErG,OAAOV,EAAE,IAAIoL,EAAE1M,EAAEI,KAAKd,IAAIc,KAAKmI,EAAE3F,KAAKtB,GAAG+G,EAAEvI,IAAIe,GAAGO,KAAK,MAAMiH,OAAE,EAAOA,EAAE2C,SAAShL,EAAEsJ,EAAEmB,WAAWrJ,KAAK,OAAOR,EAAET,EAAEb,GAAG,IAAIgC,EAAE,EAAE,IAAI,MAAMpB,KAAKE,KAAKmI,OAAE,IAASrI,SAAI,IAASA,EAAE4I,SAAS5I,EAAEyM,KAAKrN,EAAEY,EAAEoB,GAAGA,GAAGpB,EAAE4I,QAAQhI,OAAO,GAAGZ,EAAEyM,KAAKrN,EAAEgC,KAAKA,KAAK,MAAMkL,EAAErM,YAAYb,EAAEgC,EAAEpB,EAAEJ,GAAG,IAAIc,EAAER,KAAK4B,KAAK,EAAE5B,KAAKwM,KAAKzD,EAAE/I,KAAK6L,UAAK,EAAO7L,KAAKyM,KAAKvN,EAAEc,KAAK0M,KAAKxL,EAAElB,KAAK+L,KAAKjM,EAAEE,KAAK2M,QAAQjN,EAAEM,KAAK4M,KAAK,QAAQpM,EAAE,MAAMd,OAAE,EAAOA,EAAEoF,mBAAc,IAAStE,GAAGA,EAAEyL,WAAW,IAAI/M,EAAEgC,EAAE,OAAO,QAAQA,EAAE,QAAQhC,EAAEc,KAAK+L,YAAO,IAAS7M,OAAE,EAAOA,EAAE+M,YAAO,IAAS/K,EAAEA,EAAElB,KAAK4M,KAAKZ,iBAAiB,IAAI9M,EAAEc,KAAKyM,KAAKT,WAAW,MAAM9K,EAAElB,KAAK+L,KAAK,YAAO,IAAS7K,GAAG,KAAKhC,EAAEoL,WAAWpL,EAAEgC,EAAE8K,YAAY9M,EAAE2N,gBAAgB,OAAO7M,KAAKyM,KAAKK,cAAc,OAAO9M,KAAK0M,KAAK3M,KAAKb,EAAEgC,EAAElB,MAAMd,EAAEmM,EAAErL,KAAKd,EAAEgC,GAAGT,EAAEvB,GAAGA,IAAI6J,GAAG,MAAM7J,GAAG,KAAKA,GAAGc,KAAKwM,OAAOzD,GAAG/I,KAAK+M,OAAO/M,KAAKwM,KAAKzD,GAAG7J,IAAIc,KAAKwM,MAAMtN,IAAI2J,GAAG7I,KAAKwI,EAAEtJ,QAAG,IAASA,EAAEuJ,WAAWzI,KAAKgJ,EAAE9J,QAAG,IAASA,EAAEoL,SAAStK,KAAKgN,EAAE9N,GAAl7IA,CAAAA,IAAI,IAAIgC,EAAE,OAAO+G,EAAE/I,IAAI,mBAAmB,QAAQgC,EAAEhC,SAAI,IAASgC,OAAE,EAAOA,EAAEvB,OAAOsN,YAAk2I3D,CAAEpK,GAAGc,KAAKY,EAAE1B,GAAGc,KAAKwI,EAAEtJ,GAAGa,EAAEb,EAAEgC,EAAElB,KAAK0M,MAAM,OAAO1M,KAAKyM,KAAKT,WAAWkB,aAAahO,EAAEgC,GAAGnB,EAAEb,GAAGc,KAAKwM,OAAOtN,IAAIc,KAAK+M,OAAO/M,KAAKwM,KAAKxM,KAAKkJ,EAAEhK,IAAIa,EAAEb,GAAGc,KAAKwM,OAAOzD,GAAGtI,EAAET,KAAKwM,MAAMxM,KAAKyM,KAAKJ,YAAYlB,KAAKjM,EAAEc,KAAKgN,EAAEtL,EAAEyL,eAAejO,IAAIc,KAAKwM,KAAKtN,EAAEa,EAAEb,GAAG,IAAIgC,EAAE,MAAMyH,OAAO7I,EAAE2I,WAAW/I,GAAGR,EAAEsB,EAAE,iBAAiBd,EAAEM,KAAKoN,KAAKlO,SAAI,IAASQ,EAAEoK,KAAKpK,EAAEoK,GAAGV,EAAE3D,cAAc/F,EAAEsB,EAAEhB,KAAK2M,UAAUjN,GAAG,IAAI,QAAQwB,EAAElB,KAAKwM,YAAO,IAAStL,OAAE,EAAOA,EAAE4K,QAAQtL,EAAER,KAAKwM,KAAKlE,EAAExI,OAAO,CAAC,MAAMZ,EAAE,IAAI0M,EAAEpL,EAAER,MAAMkB,EAAEhC,EAAE0J,EAAE5I,KAAK2M,SAASzN,EAAEoJ,EAAExI,GAAGE,KAAKgN,EAAE9L,GAAGlB,KAAKwM,KAAKtN,GAAGa,KAAKb,GAAG,IAAIgC,EAAE8H,EAAE3I,IAAInB,EAAEwJ,SAAS,YAAO,IAASxH,GAAG8H,EAAE1I,IAAIpB,EAAEwJ,QAAQxH,EAAE,IAAIkI,EAAElK,IAAIgC,EAAEnB,EAAEb,GAAG+I,EAAEjI,KAAKwM,QAAQxM,KAAKwM,KAAK,GAAGxM,KAAK+M,QAAQ,MAAM7L,EAAElB,KAAKwM,KAAK,IAAI1M,EAAEJ,EAAE,EAAE,IAAI,MAAMc,KAAKtB,EAAEQ,IAAIwB,EAAER,OAAOQ,EAAEsB,KAAK1C,EAAE,IAAIsM,EAAEpM,KAAKkJ,EAAElI,KAAKhB,KAAKkJ,EAAElI,KAAKhB,KAAKA,KAAK2M,UAAU7M,EAAEoB,EAAExB,GAAGI,EAAEyM,KAAK/L,GAAGd,IAAIA,EAAEwB,EAAER,SAASV,KAAK+M,KAAKjN,GAAGA,EAAE4M,KAAKL,YAAY3M,GAAGwB,EAAER,OAAOhB,GAAGK,KAAKb,EAAEc,KAAKyM,KAAKJ,YAAYnL,GAAG,IAAIpB,EAAE,IAAI,QAAQA,EAAEE,KAAKqN,YAAO,IAASvN,GAAGA,EAAEkF,KAAKhF,MAAK,GAAG,EAAGkB,GAAGhC,GAAGA,IAAIc,KAAK0M,MAAM,CAAC,MAAMxL,EAAEhC,EAAEmN,YAAYnN,EAAEgL,SAAShL,EAAEgC,GAAGnB,aAAab,GAAG,IAAIgC,OAAE,IAASlB,KAAK+L,OAAO/L,KAAK4M,KAAK1N,EAAE,QAAQgC,EAAElB,KAAKqN,YAAO,IAASnM,GAAGA,EAAE8D,KAAKhF,KAAKd,KAAK,MAAM0B,EAAEb,YAAYb,EAAEgC,EAAEpB,EAAEJ,EAAEc,GAAGR,KAAK4B,KAAK,EAAE5B,KAAKwM,KAAKzD,EAAE/I,KAAK6L,UAAK,EAAO7L,KAAKsN,QAAQpO,EAAEc,KAAK6K,KAAK3J,EAAElB,KAAK+L,KAAKrM,EAAEM,KAAK2M,QAAQnM,EAAEV,EAAEY,OAAO,GAAG,KAAKZ,EAAE,IAAI,KAAKA,EAAE,IAAIE,KAAKwM,KAAKnL,MAAMvB,EAAEY,OAAO,GAAG6M,KAAK,IAAI1L,QAAQ7B,KAAK0I,QAAQ5I,GAAGE,KAAKwM,KAAKzD,EAAEmC,cAAc,OAAOlL,KAAKsN,QAAQpC,QAAQe,WAAW,OAAOjM,KAAK+L,KAAKE,KAAKlM,KAAKb,EAAEgC,EAAElB,KAAKF,EAAEJ,GAAG,MAAMc,EAAER,KAAK0I,QAAQ,IAAI9I,GAAE,EAAG,QAAG,IAASY,EAAEtB,EAAEmM,EAAErL,KAAKd,EAAEgC,EAAE,GAAGtB,GAAGa,EAAEvB,IAAIA,IAAIc,KAAKwM,MAAMtN,IAAI2J,EAAEjJ,IAAII,KAAKwM,KAAKtN,OAAO,CAAC,MAAMQ,EAAER,EAAE,IAAIwC,EAAEV,EAAE,IAAI9B,EAAEsB,EAAE,GAAGkB,EAAE,EAAEA,EAAElB,EAAEE,OAAO,EAAEgB,IAAIV,EAAEqK,EAAErL,KAAKN,EAAEI,EAAE4B,GAAGR,EAAEQ,GAAGV,IAAI6H,IAAI7H,EAAEhB,KAAKwM,KAAK9K,IAAI9B,IAAIA,GAAGa,EAAEO,IAAIA,IAAIhB,KAAKwM,KAAK9K,IAAIV,IAAI+H,EAAE7J,EAAE6J,EAAE7J,IAAI6J,IAAI7J,IAAI,MAAM8B,EAAEA,EAAE,IAAIR,EAAEkB,EAAE,IAAI1B,KAAKwM,KAAK9K,GAAGV,EAAEpB,IAAIF,GAAGM,KAAK6J,EAAE3K,GAAGa,EAAEb,GAAGA,IAAI6J,EAAE/I,KAAKsN,QAAQpH,gBAAgBlG,KAAK6K,MAAM7K,KAAKsN,QAAQ3H,aAAa3F,KAAK6K,KAAK,MAAM3L,EAAEA,EAAE,KAAK,MAAM6L,UAAUnK,EAAEb,cAAcoC,SAASqL,WAAWxN,KAAK4B,KAAK,EAAE7B,EAAEb,GAAGc,KAAKsN,QAAQtN,KAAK6K,MAAM3L,IAAI6J,OAAE,EAAO7J,GAAG,MAAM8N,EAAE9L,EAAEA,EAAEH,YAAY,GAAG,MAAMiK,UAAUpK,EAAEb,cAAcoC,SAASqL,WAAWxN,KAAK4B,KAAK,EAAE7B,EAAEb,GAAGA,GAAGA,IAAI6J,EAAE/I,KAAKsN,QAAQ3H,aAAa3F,KAAK6K,KAAKmC,GAAGhN,KAAKsN,QAAQpH,gBAAgBlG,KAAK6K,OAAO,MAAMI,UAAUrK,EAAEb,YAAYb,EAAEgC,EAAEpB,EAAEJ,EAAEc,GAAG2B,MAAMjD,EAAEgC,EAAEpB,EAAEJ,EAAEc,GAAGR,KAAK4B,KAAK,EAAE7B,KAAKb,EAAEgC,EAAElB,MAAM,IAAIF,EAAE,IAAIZ,EAAE,QAAQY,EAAEuL,EAAErL,KAAKd,EAAEgC,EAAE,UAAK,IAASpB,EAAEA,EAAEiJ,KAAKF,EAAE,OAAO,MAAMnJ,EAAEM,KAAKwM,KAAKhM,EAAEtB,IAAI6J,GAAGrJ,IAAIqJ,GAAG7J,EAAEuO,UAAU/N,EAAE+N,SAASvO,EAAEwO,OAAOhO,EAAEgO,MAAMxO,EAAEyO,UAAUjO,EAAEiO,QAAQ/N,EAAEV,IAAI6J,IAAIrJ,IAAIqJ,GAAGvI,GAAGA,GAAGR,KAAKsN,QAAQM,oBAAoB5N,KAAK6K,KAAK7K,KAAKN,GAAGE,GAAGI,KAAKsN,QAAQO,iBAAiB7N,KAAK6K,KAAK7K,KAAKd,GAAGc,KAAKwM,KAAKtN,EAAEa,YAAYb,GAAG,IAAIgC,EAAEpB,EAAE,mBAAmBE,KAAKwM,KAAKxM,KAAKwM,KAAKxH,KAAK,QAAQlF,EAAE,QAAQoB,EAAElB,KAAK2M,eAAU,IAASzL,OAAE,EAAOA,EAAE4M,YAAO,IAAShO,EAAEA,EAAEE,KAAKsN,QAAQpO,GAAGc,KAAKwM,KAAKuB,YAAY7O,IAAI,MAAMoN,EAAEvM,YAAYb,EAAEgC,EAAEpB,GAAGE,KAAKsN,QAAQpO,EAAEc,KAAK4B,KAAK,EAAE5B,KAAK6L,UAAK,EAAO7L,KAAK+L,KAAK7K,EAAElB,KAAK2M,QAAQ7M,EAAEmM,WAAW,OAAOjM,KAAK+L,KAAKE,KAAKlM,KAAKb,GAAGmM,EAAErL,KAAKd,IAAS,MAAmE8O,EAAE7O,OAAO8O;;;;;;ACAhkP,IAAIvM,EAAElB,EDAilP,MAAMwN,GAAGA,EAAE5E,EAAEgD,IAAI,QAAQlN,EAAEuI,WAAWyG,uBAAkB,IAAShP,EAAEA,EAAEuI,WAAWyG,gBAAgB,IAAI1L,KAAK,SCA9qP,MAAM1C,UAAUZ,EAAEa,cAAcoC,SAASqL,WAAWxN,KAAKmO,cAAc,CAACL,KAAK9N,MAAMA,KAAKoO,UAAK,EAAOrO,mBAAmB,IAAIb,EAAEQ,EAAE,MAAMwB,EAAEiB,MAAM2D,mBAAmB,OAAO,QAAQ5G,GAAGQ,EAAEM,KAAKmO,eAAeE,oBAAe,IAASnP,IAAIQ,EAAE2O,aAAanN,EAAE+I,YAAY/I,EAAEnB,OAAOb,GAAG,MAAMgC,EAAElB,KAAKsO,SAAStO,KAAKsC,aAAatC,KAAKmO,cAAcrJ,YAAY9E,KAAK8E,aAAa3C,MAAM2E,OAAO5H,GAAGc,KAAKoO,KDAuT,EAAClP,EAAEgC,EAAEpB,KAAK,IAAIJ,EAAEc,EAAE,MAAMZ,EAAE,QAAQF,EAAE,MAAMI,OAAE,EAAOA,EAAEuO,oBAAe,IAAS3O,EAAEA,EAAEwB,EAAE,IAAIQ,EAAE9B,EAAE2O,WAAW,QAAG,IAAS7M,EAAE,CAAC,MAAMxC,EAAE,QAAQsB,EAAE,MAAMV,OAAE,EAAOA,EAAEuO,oBAAe,IAAS7N,EAAEA,EAAE,KAAKZ,EAAE2O,WAAW7M,EAAE,IAAI0K,EAAElL,EAAEgM,aAAalM,IAAI9B,GAAGA,OAAE,EAAO,MAAMY,EAAEA,EAAE,IAAI,OAAO4B,EAAE6K,KAAKrN,GAAGwC,GCA9jBhC,CAAEwB,EAAElB,KAAK6E,WAAW7E,KAAKmO,eAAepO,oBAAoB,IAAIb,EAAEiD,MAAMqM,oBAAoB,QAAQtP,EAAEc,KAAKoO,YAAO,IAASlP,GAAGA,EAAEuP,cAAa,GAAI1O,uBAAuB,IAAIb,EAAEiD,MAAMuM,uBAAuB,QAAQxP,EAAEc,KAAKoO,YAAO,IAASlP,GAAGA,EAAEuP,cAAa,GAAI1O,SAAS,OAAOmB,GAAGpB,EAAEyD,WAAU,EAAGzD,EAAE6O,eAAc,EAAG,QAAQjN,EAAE+F,WAAWmH,gCAA2B,IAASlN,GAAGA,EAAEsD,KAAKyC,WAAW,CAACoH,WAAW/O,IAAI,MAAMF,EAAE6H,WAAWqH,0BAA0B,MAAMlP,GAAGA,EAAE,CAACiP,WAAW/O,KAA0D,QAAQU,EAAEiH,WAAWsH,0BAAqB,IAASvO,EAAEA,EAAEiH,WAAWsH,mBAAmB,IAAIvM,KAAK,SCLpgC,MAAMwM,GAAYC,GAA+B,iBAAZA,GAAoC,OAAZA,ECOhDC,GAAe,CAACC,EAAOC,EAAQ,KACxC,MAAMC,EAAM,GAEZ,IAAIC,EAAa,GACjB,IAAK,IAAI1E,EAAQ,EAAGA,EAAQuE,EAAMzO,OAAQkK,IAAS,CAC/C,MAAM0C,EAAU6B,EAAMvE,GACtB,GAAgB,MAAZ0C,EACA+B,EAAI7M,KAAK8M,EAAWC,QACpBD,EAAa,QACV,GAAgB,MAAZhC,GAAyC,KAAtBgC,EAAWC,OAAe,CAGpD,MAAMC,KAAEA,EAAIC,SAAEA,GAAaC,GAAUP,EAAMQ,OAAO/E,GAAQwE,EAAQ,GAClEC,EAAI7M,KAAKgN,GACT5E,GAAS6E,OACN,GAAgB,MAAZnC,GAAyC,KAAtBgC,EAAWC,OAAe,CAGpD,MAAMC,KAAEA,EAAIC,SAAEA,GAAaC,GAAUP,EAAMQ,OAAO/E,GAAQwE,EAAQ,GAClEC,EAAI7M,KAAKgN,GACT5E,GAAS6E,MACN,CAAA,GAAgB,MAAZnC,EAIP,MAH0B,KAAtBgC,EAAWC,QACXF,EAAI7M,KAAK8M,EAAWC,QAEjB,CAAEF,IAAAA,EAAKI,SAAU7E,EAAQ,GAEhC0E,GAAchC,GAItB,MAAO,CAAE+B,IAAAA,EAAKI,SAAUN,EAAMzO,OAAS,IAG9BgP,GAAY,CAACP,EAAOC,EAAQ,KACrC,MAAMI,EAAO,GAEb,IAAIzM,EA5Ce,YA6Cf6M,EA7Ce,YA8CfC,EAAa,GACbC,EAAgB,EAEpB,IAAK,IAAIlF,EAAQ,EAAGA,EAAQuE,EAAMzO,OAAQkK,IAAS,CAC/C,MAAM0C,EAAU6B,EAAMvE,GACtB,GAAgB,MAAZ0C,GAAmB8B,EAAQ,EAE3B,MAAO,CAAEI,KAAAA,EAAMC,SAAU7E,GACtB,GAnDa,wBAmDT7H,GAA6C,MAAZuK,EAoB5C,OAPgB,MAAZA,GAAwC,MAArB6B,EAAMvE,EAAQ,KAGjCgF,EAAY7M,EACZA,EAlEI,gBAmEJ6H,GAAS,GAEL7H,GACJ,IAtEI,gBAuEgB,MAAZuK,GAAwC,MAArB6B,EAAMvE,EAAQ,KACjC7H,EAAQ6M,EACRhF,GAAS,EACTkF,EAAgBlF,GAEpB,MACJ,IAlFW,YAmFP,GAA0B,KAAtBiF,EAAWN,QAAoC,MAAnBjC,EAAQiC,OAGpCxM,EApFM,oBAqFN8M,GAAcvC,EAAQiC,YACnB,GAAgB,MAAZjC,EAGPvK,EA1FK,cA2FL8M,EAAaA,EAAWN,OACxBC,EAAKK,GAAcL,EAAKK,IAAe,OACpC,CAAA,GAAgB,MAAZvC,GAAwC,MAArB6B,EAAMvE,EAAQ,GAAY,CAGpDA,EAAQkF,EACR,MAAMT,IAAEA,EAAGI,SAAEA,GAAaP,GAAaC,EAAMQ,OAAO/E,GAAQwE,EAAQ,GACpE,MAAO,CAAEI,KAAMH,EAAKI,SAAU7E,EAAQ6E,GAEtCI,GAAcvC,EAElB,MACJ,IAvGa,cAwGT,MAAM+B,IAAEA,EAAGI,SAAEA,GAAaP,GAAaC,EAAMQ,OAAO/E,GAAQwE,EAAQ,GACpExE,GAAS6E,EACTD,EAAKK,GAAc,IAAIL,EAAKK,MAAgBR,GAC5CtM,EA5GO,YA6GP8M,EAAa,GACbC,EAAgBlF,EAChB,MACJ,IA9Gc,oBA+GM,MAAZ0C,GAEAkC,EAAKK,QAAcE,EACnBF,EAAa,GACbC,EAAgBlF,EAChB7H,EAtHG,aAwHc,MAAZuK,GACLuC,EAAaA,EAAWN,OACxBS,EAAcN,GAAUP,EAAMQ,OAAO/E,EAAQ,GAAIwE,EAAQ,IACzDrM,EAxHQ,uBA0HR8M,GAAcvC,EAElB,MACJ,IA7HgB,sBA8HZ,GAAuB,KAAnBA,EAAQiC,OACR,MAEiB,MAAZjC,EAIL0C,EAAcN,GAAUP,EAAMQ,OAAO/E,GAAQwE,EAAQ,KAErDS,EAAa,GACbC,EAAgBlF,EAChB7H,EA5IG,aA8Df,SAASiN,EAAc1C,GACnBkC,EAAKK,EAAWN,QAAU,IAAKC,EAAKK,IAAe,MAASxO,MAAM2C,QAAQsJ,EAAQkC,MAAQlC,EAAQkC,KAAO,CAAClC,EAAQkC,OAClH5E,GAAS0C,EAAQmC,SAAW,GAiFpC,MAAO,CAAED,KAAAA,EAAMC,SAAUN,EAAMzO,SC9I5B,SAASuP,GAAUC,GACtB,MFFmB,EAAC/E,EAAMgF,EAAS,MACnC,MAAMC,EAAS,GACTC,EAAe,CAAClF,EAAMgF,EAAS,MAGjCA,EAAUA,EAAOjL,QAAQ,MAAQ,GAA+B,IAA1BiL,EAAOjL,QAAQ,OAAgB,OAAOiL,KAAYA,EACjF/O,OAAOkP,QAAQnF,GAAM5F,KAAI,EAAEgL,EAAK5H,KAML,KAD9B4H,GAFAA,EAAMA,EAAIC,QAAQ,WAAY,KAEpBA,QAAQ,OAAQL,IAClBjL,QAAQ,WACZkL,EAAOG,GAAOH,EAAOG,IAAQ,GAC7BH,EAAOG,IAAQ5H,EACTA,EAAO8H,OAAOzB,IAAUrO,QAAO,CAAC+P,EAAQpD,IACrCoD,EAAU,GAAGL,EAAa/C,EAAS6C,OACpC,IACF,KACC,IAEc,IAArBI,EAAIrL,QAAQ,KAKL,IAAIqL,OAAS5H,EACf8H,QAAOtI,IAAM6G,GAAS7G,KACtBwI,KAAK,OACHhI,EACE8H,OAAOzB,IACPzJ,KAAI+H,GAAW+C,EAAa/C,EAASiD,KACrCI,KAAK,SAGbhI,EAGE,GAAG4H,OAAS5H,EACd8H,QAAOtI,IAAM6G,GAAS7G,KACtBwI,KAAK,UAGNhI,EACK8H,OAAOzB,IACPzJ,KAAI+H,GAAW+C,EAAa/C,EAASiD,KACrCI,KAAK,OAVH,GAAGJ,EAAIhB,YAYnBoB,KAAK,IAAIpB,QAGhB,OADiBc,EAAalF,EAAMgF,GAClB/O,OACbkP,QAAQF,GACRzP,QAAO,CAACiQ,GAAOL,EAAKpB,KACjByB,GAAQzB,EAAQ,GAAGoB,OAASpB,EAAM0B,cAAgB,GAAGN,OAAQ,KAChEM,WErDEC,CACHpB,GAAUQ,GAAWV,MCMtB,MAAMuB,GAAM,CAACrI,KAAYC,IACrBqI,CAAM,GAAGC,EATpB,SAAkBC,KAAWC,GACzB,IAAIC,EAAMF,EAAO,GACjB,IAAK,IAAIhQ,EAAI,EAAGA,EAAIiQ,EAAKzQ,OAAQQ,IAC/BkQ,GAAOD,EAAKjQ,GAAKgQ,EAAOhQ,EAAI,GAE9B,OAAO+O,GAAUmB,GAISC,CAAS3I,KAAYC,MCZ7CjJ,GAAE,GAAG,IAAIc,IAAG,SAASd,GAAGA,EAAEA,EAAE4R,OAAO,GAAG,SAAS5R,EAAEA,EAAE6R,MAAM,GAAG,QAAQ7R,EAAEA,EAAE8R,KAAK,IAAI,OAAO9R,EAAEA,EAAE+R,MAAM,IAAI,QAAQ/R,EAAEA,EAAEgS,MAAM,KAAK,QAAjH,CAA0HlR,KAAIA,GAAE,KAAK,IAAIZ,GAAEY,GAAE8Q,OAAO,MAAM7Q,GAAEf,GAAGE,GAAEF,EAAE,IAAIR,GAAE,GAAG,MAAMY,GAAE,CAACJ,EAAEe,KAAKX,KAAKZ,GAAE0D,SAAQhD,GAAGA,EAAEY,GAAE+Q,MAAM7R,EAAEe,KAAKX,KAAIF,IAAGY,GAAE+Q,OAAOI,QAAQC,MAAMnR,EAAEf,KAAKI,IAAImC,GAAE,CAACvC,EAAEe,KAAKX,KAAQZ,GAAE0D,SAAQhD,GAAGA,EAAEY,GAAEgR,KAAK9R,EAAEe,KAAKX,KAAIF,IAAGY,GAAEgR,OAAO5R,KAAIY,GAAEkR,MAAMC,QAAQE,MAAMF,QAAQG,KAAKrR,EAAEf,KAAKI,IAAKoI,GAAE,CAACxI,EAAEe,KAAKX,KAAQZ,GAAE0D,SAAQhD,GAAGA,EAAEY,GAAEiR,MAAM/R,EAAEe,KAAKX,KAAIF,IAAGY,GAAEiR,QAAQ7R,KAAIY,GAAEkR,MAAMC,QAAQE,MAAMF,QAAQG,KAAKrR,EAAEf,KAAKI,IAAKoB,GAAE,CAAC6Q,MAAM,GAAGC,KAAK,IAAI,SAAStQ,GAAEhC,GAAG,OAAOA,EAAEiB,QAAO,CAACjB,EAAEc,IAAI,GAAGd,KAAKc,EAAEqK,SAAQ,IAAI,MAAMvC,GAAE,IAAI,MAAMvI,cAAcC,KAAKiS,iBAAiB,GAAGlS,GAAGL,EAAEc,GAAG,GAAGa,MAAM2C,QAAQtE,GAAG,CAAC,MAAME,EAAE8B,GAAEhC,GAAG,GAAGwB,GAAE8Q,KAAKpS,GAAG,MAAME,GAAE,kBAAkB,IAAII,MAAM,mDAAmDN,GAAG,IAAIM,MAAM,mDAAmD+B,GAAE,kFAAkFrC,EAAEF,GAAGwB,GAAE8Q,KAAKpS,GAAG,CAACsS,SAAS,IAAIxS,GAAGyS,SAAS3R,QAAQyB,GAAE,kBAAkB,+CAA+CvC,EAAEmL,MAAM7K,KAAKiS,iBAAiBvS,EAAEmL,MAAM7K,KAAKiS,iBAAiBvS,EAAEmL,OAAO,GAAG7K,KAAKiS,iBAAiBvS,EAAEmL,MAAMrI,KAAKhC,GAAGT,KAAKL,GAAG2B,MAAM2C,QAAQtE,IAAIwI,GAAE,oBAAoB,8BAA8BxG,GAAEhC,GAAGA,UAAUwB,GAAE6Q,MAAMrQ,GAAEhC,WAAWwB,GAAE8Q,KAAKtQ,GAAEhC,MAAMwI,GAAE,oBAAoB,qBAAqBxI,EAAEmL,MAAM7K,KAAKiS,iBAAiBvS,EAAEmL,MAAM,IAAI9K,UAAUmI,GAAE,uBAAuB,yBAAyBlI,KAAKiS,iBAAiB,GAAG/Q,GAAE6Q,MAAM,GAAG7Q,GAAE8Q,KAAK,GAAGjS,QAAQL,EAAEc,EAAEZ,GAAG,MAAMa,EAAE,YAAYf,EAAEmL,QAAQrK,EAAEqK,QAAQ,GAAG3J,GAAE8Q,KAAKvR,GAAG,MAAMX,GAAE,uBAAuB,IAAII,MAAM,mDAAmDO,GAAG,IAAIP,MAAM,mDAAmD+B,GAAE,gFAAgFxB,EAAEf,EAAEc,GAAGU,GAAE8Q,KAAKvR,GAAG,CAACyR,SAAS,CAAC1R,GAAG2R,SAASvS,GAAGG,YAAYL,EAAEc,GAAGR,KAAKiS,iBAAiBvS,EAAEmL,OAAO7K,KAAKiS,iBAAiBvS,EAAEmL,MAAMjI,SAAQlD,GAAGA,EAAEc,KAAI,MAAMZ,EAAEwB,OAAOgR,KAAKlR,GAAE6Q,OAAOtB,QAAOjQ,GAAGA,EAAE6R,SAAS,IAAI3S,EAAEmL,WAAUpK,EAAEW,OAAOgR,KAAKlR,GAAE8Q,MAAMvB,QAAOjQ,GAAGA,EAAE0E,QAAQ,IAAIxF,EAAEmL,UAAU,GAAGjL,EAAE0S,OAAM5S,GAAGA,IAAIc,MAAIC,EAAEmC,SAAQlD,IAAIwB,GAAE6Q,MAAMrS,GAAG,CAACwS,SAAS,IAAIhR,GAAE8Q,KAAKtS,GAAGwS,UAAUvJ,OAAO,GAAGwJ,SAASjR,GAAE8Q,KAAKtS,GAAGyS,aAAY,MAAMjT,EAAE,IAAI,IAAI+E,IAAI,IAAIrE,KAAKa,KAAK,IAAI,IAAIb,EAAE,EAAEA,EAAEV,EAAEwB,OAAOd,IAAI,CAAC,MAAMa,EAAEvB,EAAEU,GAAG,GAAGa,EAAEmJ,WAAW,aAAa,CAAC,MAAMhK,GAAGa,EAAE+P,QAAQ,YAAY,IAAI7F,MAAM,KAAKjL,EAAEmL,OAAOjL,EAAEsB,GAAE6Q,MAAMtR,GAAGkI,OAAOjJ,EAAEmL,MAAM,IAAI3J,GAAE6Q,MAAMtR,GAAGkI,OAAOjJ,EAAEmL,OAAO,GAAGrK,IAAIU,GAAE6Q,MAAMtR,GAAGkI,OAAOjJ,EAAEmL,MAAMrK,EAAEU,GAAE6Q,MAAMtR,GAAG0R,SAASjR,GAAE6Q,MAAMtR,GAAGkI,eAAezH,GAAE6Q,MAAMtR,SAASS,GAAE6Q,MAAMtR,GAAGyR,SAAShR,GAAE6Q,MAAMtR,GAAGyR,SAASzB,QAAOjQ,GAAGA,EAAEqK,OAAOnL,EAAEmL,OAAM3J,GAAE6Q,MAAMtR,GAAGkI,OAAOjJ,EAAEmL,MAAMrK,EAAEU,GAAE6Q,MAAMtR,GAAGyR,SAASxR,OAAO,IAAIQ,GAAE6Q,MAAMtR,GAAG0R,SAASjR,GAAE6Q,MAAMtR,GAAGkI,eAAezH,GAAE6Q,MAAMtR,OAAO,SAASwH,GAAEvI,EAAEc,EAAE,IAAI,OAAO8I,GAAE5J,EAAE0B,OAAOmR,OAAOnR,OAAOmR,OAAO,GAAG/R,GAAG,CAACgS,UAAS,KAA6F,SAASlJ,GAAE9I,EAAEZ,EAAE,IAAI,OAAOwI,GAAE1I,GAAF0I,CAAK5H,EAAEZ,GAAG,MAAMwI,GAAE1I,GAAG,CAACc,EAAEZ,EAAE,MAAM,GAAGF,EAAEc,KAAKZ,EAAE6S,aAAa,MAAM3S,GAAE,wBAAwB,IAAII,MAAM,2BAA2BM,GAAG,IAAIN,MAAM,2BAA2B,GAAGR,EAAEc,IAAIZ,EAAE6S,aAAa,OAAOvK,GAAE,wBAAwB,4CAA4C1H,GAAG,CAACqK,KAAKrK,GAAG,MAAMkS,aAAajS,EAAEkS,eAAezT,EAAEsT,SAASvQ,GAAGrC,EAAE,OAAOF,EAAEc,GAAG,CAACqK,KAAKrK,EAAE2O,MAAM1O,EAAEiS,aAAajS,EAAEkS,eAAezT,EAAE0T,UAAU,GAAGJ,SAAS,MAAMvQ,GAAGA,GAAG,CAAC4I,KAAKrK,IAAIqS,eAAejK,GAAEpI,EAAEZ,GAAG,OAAOmJ,GAAErJ,GAAFqJ,CAAKvI,EAAEZ,GAAG,MAAMmJ,GAAErJ,GAAGmT,MAAMrS,EAAEZ,KAAK,IAAIY,EAAE,MAAMV,GAAE,yBAAyB,IAAII,MAAM,gCAAgC,IAAIA,MAAM,+BAA+B,MAAM2K,KAAKpK,GAAGD,EAAE,IAAId,EAAEe,GAAG,MAAMX,GAAE,yBAAyB,IAAII,MAAM,0BAA0BO,GAAG,IAAIP,MAAM,0BAA0B,IAAIhB,EAAEA,EAAEU,EAAEF,EAAEe,GAAG0O,YAAO,IAASjQ,GAAGA,aAAa4T,WAAWlT,EAAEA,EAAEF,EAAEe,GAAG0O,OAAOvP,EAAEqC,GAAE,yBAAyB,2BAA2BxB,EAAEf,EAAEe,GAAG0O,OAAO,MAAMyD,UAAU1R,EAAEyR,eAAejR,GAAGhC,EAAEe,GAAGiB,GAAGA,EAAEhC,EAAEe,GAAG0O,OAAO,MAAMlH,EAAEvI,EAAEe,GAAG0O,MAAM,OAAO7G,GAAEyK,YAAY,CAAClI,KAAKpK,GAAGwH,SAAS1D,QAAQyO,IAAI9R,EAAEuP,QAAO/Q,IAAI,MAAMc,OAAE,IAASd,EAAEuT,QAAQvT,EAAEuT,OAAOhL,GAAG,OAAOC,GAAE,yBAAyB1H,EAAE,6DAA6D,oEAAoEd,GAAGc,KAAI+E,KAAI7F,IAAI,MAAMA,OAAE,EAAOA,EAAEwT,aAAa,MAAMxT,OAAE,EAAOA,EAAEwT,YAAYjL,GAAGA,KAAIvI,EAAEe,GAAG+R,WAAWtK,GAAE,yBAAyB,2CAA2CzH,GAAGf,EAAEe,GAAG0O,MAAMzP,EAAEe,GAAGiS,cAActR,OAAOmR,OAAO,GAAG7S,EAAEe,KAAK,SAASuK,GAAExK,GAAGqK,KAAKjL,GAAGa,EAAEvB,GAAG,OAAOqJ,GAAE7I,GAAF6I,CAAK/H,EAAE,CAACqK,KAAKjL,GAAGa,EAAEvB,GAAG,MAAMqJ,GAAE7I,GAAG,CAACe,GAAGoK,KAAK3C,GAAGhH,EAAEQ,KAAK,MAAM4G,EAAE,MAAM5G,EAAEA,EAAER,EAAE+G,EAAEvG,EAAER,OAAE,EAAO,IAAIxB,EAAEwI,GAAG,MAAMpI,GAAE,uBAAuB,IAAII,MAAM,0BAA0BgI,GAAG,IAAIhI,MAAM,YAAYgI,qBAAqB,EAAExI,EAAEc,EAAEZ,EAAEa,KAAK,MAAMvB,GAAG,MAAMuB,OAAE,EAAOA,EAAE4Q,aAAazR,EAAE,OAAOF,EAAEE,GAAGgT,UAAUO,MAAKzT,GAAGA,EAAEyQ,SAAS3P,GAAGd,EAAE6Q,MAAMrR,KAA1G,CAA+GQ,EAAEe,EAAEyH,EAAED,IAAIhG,GAAE,uBAAuB,kCAAkCiG,EAAE,CAACiI,OAAO1P,IAAIf,EAAEwI,GAAG0K,UAAUpQ,KAAK,CAAC+N,KAAK,MAAMtI,OAAE,EAAOA,EAAEoJ,aAAanJ,EAAEiI,OAAO1P,EAAEwS,OAAOhL,EAAEiL,YAAY5K,SAAI,IAAS5I,EAAEwI,GAAGiH,MAAM7G,EAAE5I,EAAEwI,GAAGiH,YAAO,IAASzP,EAAEwI,GAAGwK,cAAcpK,EAAE5I,EAAEwI,GAAGwK,eAAe,EAAEhT,EAAEe,KAAKX,KAAKZ,GAAE0D,SAAQhD,GAAGA,EAAEY,GAAEkR,MAAMhS,EAAEe,KAAKX,KAAIF,KAAIY,GAAEkR,OAAOC,QAAQE,MAAMpR,EAAEf,KAAKI,IAAlF,CAAuF,uBAAuB,iDAAiDoI,EAAE,CAACiI,OAAO1P,KCAl9J,SAASb,GAAEF,GAAGR,EAAEU,IAAI,OAAOV,EAAEmF,gBAAgBnF,EAAEQ,EAAER,GAAGkC,OAAOmR,OAAOnR,OAAOmR,OAAO,GAAG3S,GAAG,CAAC+B,UAAUzC,EAAEsR,QAAQ,SAAS,OAAOnM,gBAAgB3E,EAAER,GAAGU,EAAEF,EAAE,SAASc,GAAEd,GAAG,MAAM,kBAAkBA,EAAE,CAACkC,KAAKT,SAASE,MAAM2C,QAAQtE,GAAG,CAACkC,KAAKP,OAAO,iBAAiB3B,EAAE,CAACkC,KAAKR,QAAQ,GAAG,MAA0FF,GAAExB,GAAG,CAACA,QAAG,IAASA,QAAG,IAASA,EAAE0T,MAA3B,CAAkC1T,IAAIA,EAAE0T,OAAO,IAAIzS,SAASjB,EAAER,KAAKkC,OAAOkP,QAAQpR,GAAG0D,SAAS1D,GAAGQ,EAAEE,GAAEF,EAAER,KAAKQ,IAAI,IAAvMA,CAAAA,IAAI,OAAOR,EAAEQ,GAAG,GAAG0B,OAAOkP,QAAQpR,GAAGyB,SAASjB,GAAGR,EAAEuB,KAAKb,GAAEF,EAAE,CAACR,EAAEsB,GAAEC,MAAM,IAAI,IAAIvB,GAA4HuB,CAAE,MAAMf,OAAE,EAAOA,EAAE2T,UAAUnL,GAAE,GAAGoB,GAAE,CAAC1J,EAAEY,EAAEC,KAAK,GAAGyH,GAAEtI,GAAG,OAAOsI,GAAEtI,GAAG0T,eAAeC,OAAO3T,EAAE,cAAcF,EAAEK,cAAcoC,QAAQnC,KAAKgK,QAAQ9K,CAAC,GAAG,CAACQ,QAAG,IAASA,QAAG,IAASA,EAAE2T,SAA3B,CAAqC5S,IAAIW,OAAOkP,QAAQ7P,EAAE4S,UAAUzQ,WAAWlD,EAAER,MAAMc,KAAKN,GAAGR,KAAKuE,wBAAwB,OAAOvC,GAAET,GAAGsD,oBAAoB,OAAO,MAAMtD,OAAE,EAAOA,EAAEsD,OAAOhE,sBAAsB,OAAOC,KAAKgK,cAAczF,QAAQiP,QAAQhT,EAAER,OAAOyT,OAAO/T,GAAGR,CAAC,sBAAsBQ,aAAayC,MAAMuE,gBAAgB3G,SAAS,OAAOC,KAAKgK,WAAW,MAAMV,EAAE9D,SAASC,cAAc7F,GAAG,OAAOsI,GAAEtI,GAAG0J,EAAEA,GAAG,IAAIxJ,GAAE,oBAAoB2H,WAAWA,WAAW,oBAAoBtI,OAAOA,OAAO,oBAAoBuU,OAAOA,OAAO,oBAAoBC,KAAKA,KAAK,GAAG1L,GAAE,GAAGhG,GAAE,GAAGmG,GAAE,GAAGhH,OAAO+B,eAAeiF,GAAE,IAAI,CAAC+G,OAAM,IAAK/G,GAAEwL,kBAAa,EAAOxL,GAAEwL,aAAa,SAASlU,GAAG,MAAM,iBAAiBA,IAAIA,GAAGA,aAAamU,MAAMnU,aAAagK,OAAOhK,EAAE2B,MAAM2C,QAAQtE,GAAG,IAAIA,GAAG0B,OAAOmR,OAAO,GAAG7S,IAAI,IAAIgC,GAAE,GAAG,SAASyG,GAAEzI,GAAG,IAAIA,EAAEoU,gBAAgBpU,EAAE0D,cAAc,MAAM,IAAIlD,MAAM,oEAAoE,OAAOR,EAAE0B,OAAO+B,eAAezB,GAAE,IAAI,CAACyN,OAAM,IAAKzN,GAAEqS,aAAarS,GAAEsS,YAAYtS,GAAEuS,UAAUvS,GAAEwS,SAASxS,GAAEyS,4BAAuB,EAAOzS,GAAEyS,uBAAuBhM,GAAE,MAAMU,GAAE,sBAAsB,SAASc,GAAEjK,GAAG,MAAMR,EAAEQ,EAAE,GAAGR,EAAE2J,IAAG,OAAO3J,EAAE,MAAMU,EAAEuI,GAAEzI,GAAGc,EAAEZ,EAAEuH,QAAQ,OAAOjI,EAAE2J,IAAG,CAAC+B,MAAM,EAAEwJ,MAAM,EAAEC,OAAO,GAAGC,SAAS,GAAGC,UAAU,IAAI3U,EAAEuH,QAAQzH,IAAIR,EAAE2J,IAAG+B,MAAM,EAAEpK,EAAEd,IAAIR,EAAEwC,GAAEwS,SAASvK,GAAEjI,GAAEuS,UAAU,SAASvU,EAAER,EAAEU,EAAE,IAAI,MAAMY,EAAEmJ,GAAEjK,IAAIkL,MAAMnK,EAAE2T,MAAMlT,GAAGV,EAAEqI,IAAG,OAAOpI,IAAIS,GAAGV,EAAEqI,IAAG+B,QAAQpK,EAAEqI,IAAGuL,QAAQ5T,EAAEqI,IAAGwL,OAAO7R,KAAKtD,GAAGA,IAAIsB,EAAEqI,IAAG+B,QAAQhL,EAAE4U,eAAehU,EAAEqI,IAAGwL,OAAO5T,GAAGgU,OAAOvV,EAAEmB,OAAOG,EAAEqI,IAAGwL,OAAO5T,KAAKiB,GAAEsS,YAAY,SAAStU,EAAER,GAAG,MAAMU,EAAE+J,GAAEjK,IAAIkL,MAAMpK,EAAE4T,MAAM3T,EAAE6T,SAASpT,GAAGtB,EAAEiJ,IAAG,OAAOrI,IAAIC,GAAGS,EAAEV,EAAE,GAAGZ,EAAEiJ,IAAGyL,SAAS9T,EAAE,IAAIZ,EAAEiJ,IAAGyL,SAAS9T,EAAE,GAAGtB,EAAEA,IAAIwC,GAAEqS,aAAa,SAASrU,EAAER,GAAG,MAAMU,EAAE+J,GAAEjK,IAAIkL,MAAMpK,EAAE4T,MAAM3T,EAAE8T,UAAUrT,GAAGtB,EAAEiJ,IAAG,OAAOrI,IAAIC,GAAGS,EAAEV,EAAE,GAAGZ,EAAEiJ,IAAG0L,UAAU/T,EAAE,IAAIZ,EAAEiJ,IAAG0L,UAAU/T,EAAE,GAAGtB,EAAEA,IAAI,IAAI0J,GAAE9I,IAAGA,GAAEU,GAAG,SAASd,EAAER,EAAEU,EAAEY,GAAG,OAAO,IAAIZ,IAAIA,EAAE2E,oBAAoB9D,EAAES,GAAG,SAASgH,EAAExI,GAAG,IAAII,EAAEU,EAAEkU,KAAKhV,IAAI,MAAMA,GAAGwB,EAAExB,IAAI,SAAS4J,EAAE5J,GAAG,IAAII,EAAEU,EAAEmU,MAAMjV,IAAI,MAAMA,GAAGwB,EAAExB,IAAI,SAASI,EAAEJ,GAAG,IAAIR,EAAEQ,EAAEkV,KAAKnU,EAAEf,EAAEyP,QAAQjQ,EAAEQ,EAAEyP,MAAMjQ,aAAaU,EAAEV,EAAE,IAAIU,YAAYF,GAAGA,EAAER,OAAO2V,KAAK3M,EAAEoB,GAAGxJ,GAAGU,EAAEA,EAAEsU,MAAMpV,EAAER,GAAG,KAAKwV,YAAYtT,OAAO+B,eAAelB,GAAE,IAAI,CAACkN,OAAM,IAAKlN,GAAE8S,cAAS,EAAO,MAAMC,GAAE5M,GAAE6M,GAAEvT,GAAEO,GAAE8S,SAAS,CAACrV,EAAER,EAAEU,EAAE,MAAM,IAAIY,GAAE,EAAGwU,GAAEpB,cAAc1U,GAAG,MAAMuB,EAAE,CAAC,IAAImI,QAAE,OAAO,OAAO,eAAoB,OAAOlJ,EAAE0D,sBAAsB1D,EAAE0H,mBAAmBlG,EAAExB,GAAGkJ,QAAE,OAAO,OAAO,eAAoBpI,IAAId,IAAIc,GAAE,EAAGwU,GAAEpB,cAAclU,SAAS6E,QAAQyO,IAAIvS,EAAE8E,KAAK7F,GAAGA,EAAEc,UAAU,OAAM,EAAGyU,GAAEhB,WAAWvU,EAAE,IAAI,MAAMyP,UAAUzP,GAAGwB,EAAExB,GAAGyP,YAAY,OAAO3O,EAAET,QAAQL,GAAGwB,EAAExB,GAAGK,IAAIL,GAAG,OAAOkJ,GAAE5I,UAAK,OAAO,qBAA0BkB,EAAExB,MAAMK,UAAUL,GAAGe,EAAE+B,KAAK9C,GAAGK,OAAOL,GAAGc,EAAEd,EAAEK,MAAM,OAAOS,EAAET,WAAW,OAAOS,IAAIZ,IAAI,IAAI0I,GAAE,GAAGC,GAAEzI,IAAGA,GAAEU,GAAG,SAASd,EAAER,EAAEU,EAAEY,GAAG,OAAO,IAAIZ,IAAIA,EAAE2E,oBAAoB9D,EAAES,GAAG,SAASgH,EAAExI,GAAG,IAAII,EAAEU,EAAEkU,KAAKhV,IAAI,MAAMA,GAAGwB,EAAExB,IAAI,SAAS4J,EAAE5J,GAAG,IAAII,EAAEU,EAAEmU,MAAMjV,IAAI,MAAMA,GAAGwB,EAAExB,IAAI,SAASI,EAAEJ,GAAG,IAAIR,EAAEQ,EAAEkV,KAAKnU,EAAEf,EAAEyP,QAAQjQ,EAAEQ,EAAEyP,MAAMjQ,aAAaU,EAAEV,EAAE,IAAIU,YAAYF,GAAGA,EAAER,OAAO2V,KAAK3M,EAAEoB,GAAGxJ,GAAGU,EAAEA,EAAEsU,MAAMpV,EAAER,GAAG,KAAKwV,YAAYtT,OAAO+B,eAAemF,GAAE,IAAI,CAAC6G,OAAM,IAAK7G,GAAE4M,gBAAW,EAAO,MAAM7M,GAAEpG,GAAE8G,GAAErH,GAAE4G,GAAE4M,WAAW,CAACxV,EAAER,EAAEU,EAAEY,EAAE,MAAM,MAAMH,IAAII,EAAEH,IAAIY,IAAG,EAAGmH,GAAE0M,UAAUrV,EAAEE,EAAEY,GAAG0H,EAAE,GAAGoB,EAAE,CAAC1J,EAAE0J,IAAIf,QAAE,OAAO,OAAO,eAAoB,MAAMzI,EAAEZ,EAAEuB,KAAK,OAAOX,EAAEF,WAAWsB,QAAQpB,EAAEF,GAAG0J,IAAIpB,EAAEtF,SAASlD,GAAGA,EAAEE,EAAEa,OAAOD,EAAEsT,eAAepU,EAAEoU,cAAc,IAAIqB,YAAYvV,EAAE,CAACwV,OAAO3U,QAAQA,OAAO,OAAM,EAAGsI,GAAEiL,aAAatU,EAAE,CAACW,IAAII,EAAE4U,UAAU3V,GAAGwI,EAAE1F,KAAK9C,GAAG4V,KAAK,CAAC5V,EAAER,IAAIgJ,EAAE1F,OAAO5C,EAAEY,IAAIZ,IAAIF,GAAGR,EAAEsB,KAAKF,IAAIgJ,EAAEiM,SAASjM,KAAK,IAAItI,GAAE,GAAGoI,GAAEtJ,IAAGA,GAAEU,GAAG,SAASd,EAAER,EAAEU,EAAEY,GAAG,OAAO,IAAIZ,IAAIA,EAAE2E,oBAAoB9D,EAAES,GAAG,SAASgH,EAAExI,GAAG,IAAII,EAAEU,EAAEkU,KAAKhV,IAAI,MAAMA,GAAGwB,EAAExB,IAAI,SAAS4J,EAAE5J,GAAG,IAAII,EAAEU,EAAEmU,MAAMjV,IAAI,MAAMA,GAAGwB,EAAExB,IAAI,SAASI,EAAEJ,GAAG,IAAIR,EAAEQ,EAAEkV,KAAKnU,EAAEf,EAAEyP,QAAQjQ,EAAEQ,EAAEyP,MAAMjQ,aAAaU,EAAEV,EAAE,IAAIU,YAAYF,GAAGA,EAAER,OAAO2V,KAAK3M,EAAEoB,GAAGxJ,GAAGU,EAAEA,EAAEsU,MAAMpV,EAAER,GAAG,KAAKwV,YAAYtT,OAAO+B,eAAenC,GAAE,IAAI,CAACmO,OAAM,IAAKnO,GAAEwU,iBAAY,EAAO,MAAMC,GAAExN,GAAE8C,GAAErJ,GAAEV,GAAEwU,YAAY,CAAC9V,EAAER,KAAK,MAAMU,EAAEwB,OAAOkP,QAAQpR,GAAGyB,SAASzB,GAAGU,GAAG8V,QAAQlV,EAAEmV,aAAalV,OAAOvB,EAAEU,IAAG,EAAG6V,GAAEP,YAAYxV,EAAEc,EAAEC,GAAGvB,IAAI,IAAIsB,EAAE,GAAGC,EAAE,GAAGS,EAAE,GAAGgH,EAAExI,IAAIwB,EAAEsB,KAAK,CAACZ,KAAK,cAAcgU,KAAK,CAAClW,KAAKE,EAAEF,GAAGE,EAAEF,GAAGW,WAAM,GAAQ,OAAM,EAAG0K,GAAEgJ,cAAcrU,EAAE,CAACmW,YAAY,CAACnW,EAAER,IAAIkK,QAAE,OAAO,OAAO,eAAoB,IAAI3I,EAAEyH,EAAEhH,EAAEsB,KAAK,CAACZ,KAAK,cAAcgU,KAAK,CAAClW,EAAER,WAAWqF,QAAQyO,IAAI,QAAQ9K,EAAE,QAAQzH,EAAED,EAAEd,UAAK,IAASe,OAAE,EAAOA,EAAE8E,KAAK7F,GAAGA,EAAER,YAAO,IAASgJ,EAAEA,EAAE,IAAI,IAAI,MAAM1H,KAAKY,OAAOuH,OAAO/I,SAASY,EAAE+U,SAAS7V,EAAER,MAAM4W,cAAc,CAACpW,EAAER,KAAKgC,EAAEsB,KAAK,CAACZ,KAAK,gBAAgBgU,KAAK,CAAClW,EAAER,KAAKsB,EAAEd,GAAG,IAAIc,EAAEd,IAAI,GAAGR,IAAI6W,YAAY7N,EAAE8N,gBAAgB,CAACtW,EAAER,KAAKgC,EAAEsB,KAAK,CAACZ,KAAK,kBAAkBgU,KAAK,CAAClW,EAAER,KAAKuB,EAAEf,GAAG,IAAIe,EAAEf,IAAI,GAAGR,IAAI+W,WAAW,IAAI7M,QAAE,OAAO,OAAO,eAAoBlI,EAAEsB,KAAK,CAACZ,KAAK,aAAagU,KAAK,KAAK,IAAI,MAAMlW,EAAER,KAAKkC,OAAOkP,QAAQ7P,GAAG,IAAI,MAAMD,KAAKtB,EAAE,IAAI,MAAMA,KAAKkC,OAAOuH,OAAO/I,SAASV,EAAEqW,SAAS7V,EAAEc,MAAM0V,MAAM,CAACxW,EAAER,EAAEU,KAAKsB,EAAEsB,KAAK,CAACZ,KAAK,QAAQgU,KAAK,CAAClW,EAAER,EAAEU,KAAK,MAAMY,EAAE,IAAI4I,QAAE,OAAO,OAAO,eAAoBlI,EAAEiS,MAAMzT,GAAG,EAAEA,EAAER,KAAK,GAAGQ,EAAEkC,OAAO1C,EAAE0C,KAAK,OAAM,EAAG,IAAI,IAAIhC,EAAE,EAAEA,EAAEV,EAAE0W,KAAKlV,OAAOd,IAAI,GAAGF,EAAEkW,KAAKhW,KAAKV,EAAE0W,KAAKhW,GAAG,OAAM,EAAG,OAAM,GAA7G,CAAkHF,EAAER,OAAO,IAAI2U,KAAKA,KAAKsC,OAAOzW,QAAQE,IAAIwW,WAAW5V,EAAE,SAASA,KAAK6V,KAAK3W,GAAG0J,QAAE,OAAO,OAAO,eAAoB,IAAI,MAAMxJ,EAAEY,KAAKY,OAAOkP,QAAQ5Q,GAAG,GAAGR,EAAEU,IAAI0B,KAAKC,UAAU2G,EAAEtI,MAAM0B,KAAKC,UAAUrC,EAAEU,GAAG+V,cAAc,aAAanV,IAAI,OAAOd,EAAE,UAAUA,EAAE,MAAM6E,QAAQiP,QAAQ,SAAS8C,QAAQ,IAAI,IAAIpV,MAAM,SAASxB,GAAG0B,OAAO+B,eAAezD,EAAE,IAAI,CAACyP,OAAM,IAAKzP,EAAE8V,YAAY9V,EAAEwV,WAAWxV,EAAEqV,cAAS,EAAO,IAAI7V,EAAE+C,GAAEb,OAAO+B,eAAezD,EAAE,WAAW,CAAC4D,YAAW,EAAGjD,IAAI,WAAW,OAAOnB,EAAE6V,YAAY,IAAInV,EAAE0I,GAAElH,OAAO+B,eAAezD,EAAE,aAAa,CAAC4D,YAAW,EAAGjD,IAAI,WAAW,OAAOT,EAAEsV,cAAc,IAAI1U,EAAEQ,GAAEI,OAAO+B,eAAezD,EAAE,cAAc,CAAC4D,YAAW,EAAGjD,IAAI,WAAW,OAAOG,EAAEgV,eAAtX,CAAsYvN,IAAG,IAAIrH,GAAE,GAAGyK,GAAE,GAAGnC,GAAE,GAAG,SAAS8D,GAAEtN,GAAG,IAAIA,EAAEoU,gBAAgBpU,EAAE0D,cAAc,MAAM,IAAIlD,MAAM,oEAAoE,OAAOR,EAAE0B,OAAO+B,eAAe+F,GAAE,IAAI,CAACiG,OAAM,IAAKjG,GAAEqN,WAAWrN,GAAEgL,SAAShL,GAAEiL,4BAAuB,EAAOjL,GAAEiL,uBAAuBnH,GAAE,MAAMwJ,GAAE,uBAAuB,SAAS3M,GAAEnK,GAAG,MAAMR,EAAEQ,EAAE,GAAGR,EAAEsX,IAAG,OAAOtX,EAAE,MAAMU,EAAEoN,GAAEtN,GAAGc,EAAEZ,EAAEuH,QAAQ,OAAOjI,EAAEsX,IAAG,CAAC5L,MAAM,EAAEwJ,MAAM,EAAEqC,QAAQ,IAAI7W,EAAEuH,QAAQzH,IAAIR,EAAEsX,IAAG5L,MAAM,EAAEpK,EAAEd,IAAIR,EAAEgK,GAAEgL,SAASrK,GAAEX,GAAEqN,WAAW,SAAS7W,EAAER,GAAG,MAAMU,EAAEiK,GAAEnK,IAAIkL,MAAMpK,EAAE4T,MAAM3T,GAAGb,EAAE4W,IAAG,OAAOhW,IAAIC,GAAGb,EAAE4W,IAAG5L,QAAQhL,EAAE4W,IAAGpC,QAAQxU,EAAE4W,IAAGC,QAAQjU,KAAKtD,GAAGA,IAAIU,EAAE4W,IAAG5L,QAAQhL,EAAE4W,IAAGC,QAAQjW,KAAKY,OAAO+B,eAAekI,GAAE,IAAI,CAAC8D,OAAM,IAAK9D,GAAEqL,QAAQrL,GAAEsL,eAAU,EAAO,MAAMC,GAAE1N,GAAE,SAAS2N,GAAEnX,EAAER,EAAEU,GAAG,MAAMY,GAAE,EAAGoW,GAAEL,YAAY7W,EAAE,CAACoX,GAAG5X,EAAE6X,QAAQ,CAAC,sBAAsBvW,EAAEuW,QAAQ5D,OAAOzT,EAAER,IAAIU,EAAEV,KAAKQ,KAAKc,EAAEsW,KAAKtW,EAAEuW,QAAQnX,EAAEyL,GAAEsL,UAAUE,GAAExL,GAAEqL,QAAQ,CAAChX,EAAER,IAAI2X,GAAEnX,EAAER,EAAE,IAAI,SAASQ,GAAG0B,OAAO+B,eAAezD,EAAE,IAAI,CAACyP,OAAM,IAAKzP,EAAEgX,QAAQhX,EAAEiX,eAAU,EAAO,IAAIzX,EAAEmM,GAAEjK,OAAO+B,eAAezD,EAAE,YAAY,CAAC4D,YAAW,EAAGjD,IAAI,WAAW,OAAOnB,EAAEyX,aAAavV,OAAO+B,eAAezD,EAAE,UAAU,CAAC4D,YAAW,EAAGjD,IAAI,WAAW,OAAOnB,EAAEwX,WAA1P,CAAsQ9V,QAAiIoW,GAAEpW,GAAE8V,QAAuBO,GAAEhP,GAAE8M,kBCAv6OmC,GAAMC,EAAeC,GACjC,OAAO/V,MAAMgW,KAAK,CAAE3W,OAAQ0W,EAAMD,EAAQ,IAAK,CAAC9O,EAAGnH,IAAMA,UCEhDoW,GAuGXvX,YAAmB0V,EAAkB9L,EAAkBqE,EAAkBuJ,EAAQ,GAA9DvX,OAAAyV,EAAkBzV,OAAA2J,EAAkB3J,OAAAgO,EAAkBhO,WAAAuX,EAtGzExX,OAAOyX,GACL,OAAiB,OAAVA,GACLxX,KAAKyV,IAAM+B,EAAM/B,GACjBzV,KAAK2J,IAAM6N,EAAM7N,GACjB3J,KAAKgO,IAAMwJ,EAAMxJ,EAErBjO,IAAI0X,GACF,MAAMhC,EAAEA,EAAC9L,EAAEA,EAACqE,EAAEA,GAAMhO,KACpB,OAAO,IAAIsX,GAAK7B,EAAIgC,EAAUhC,EAAG9L,EAAI8N,EAAU9N,EAAGqE,EAAIyJ,EAAUzJ,GAElEjO,OAAO2X,GACL,MAAMjC,EAAEA,EAAC9L,EAAEA,EAACqE,EAAEA,GAAMhO,KACpB,OAAO,IAAIsX,GAAK7B,EAAIiC,EAAKjC,EAAG9L,EAAI+N,EAAK/N,EAAGqE,EAAI0J,EAAK1J,GAEnDjO,OAAO4X,GACL,OAAO,IAAIL,GACTK,EAAGlC,EAAIzV,KAAKyV,EACZkC,EAAGhO,EAAI3J,KAAK2J,EACZgO,EAAG3J,EAAIhO,KAAKgO,GAIhBjO,SAASyX,GACP,OAAO3P,KAAK+P,IACV/P,KAAKgQ,IAAI7X,KAAKyV,EAAI+B,EAAM/B,GACxB5N,KAAKgQ,IAAI7X,KAAK2J,EAAI6N,EAAM7N,GACxB9B,KAAKgQ,IAAI7X,KAAKgO,EAAIwJ,EAAMxJ,IAG5BjO,UAAUyX,GACR,OAAO3P,KAAKgQ,IAAI7X,KAAKyV,EAAI+B,EAAM/B,GAC7B5N,KAAKgQ,IAAI7X,KAAK2J,EAAI6N,EAAM7N,GACxB9B,KAAKgQ,IAAI7X,KAAKgO,EAAIwJ,EAAMxJ,GAG5BjO,MAAM+X,GACJ,MAAMC,EAAkB,GACxB,IAAK,IAAItC,GAAKqC,EAAUrC,GAAKqC,EAAUrC,IACrC,IACE,IAAI9L,EAAI9B,KAAK+P,KAAKE,GAAWrC,EAAIqC,GACjCnO,GAAK9B,KAAKmQ,IAAIF,GAAWrC,EAAIqC,GAC7BnO,IAEAoO,EAAQvV,KAAKxC,KAAKiY,IAAI,IAAIX,GAAK7B,EAAG9L,GAAI8L,EAAI9L,KAG9C,OAAOoO,EAGThY,UAAUmY,GACR,OAAOC,GAAeD,GAGxBnY,YAAYqY,GACV,MAAMC,EAAM5X,GAAE,EAAG,GACd6X,MAAMD,GAAQrY,KAAKoY,SAASC,GAAKE,OAAOH,KAC3C,YAAgBrI,IAARsI,GAAqBA,GAAO,EAAKrY,KAAKkY,UAAUG,GAAO,KAGjEtY,SAASmY,GACP,OAAOlY,KAAKiY,IAAIjY,KAAKkY,UAAUA,IAGjCnY,UAAUwF,GACR,OAAO9E,GAAE,EAAG,GACT8E,KAAK8S,GAAQrY,KAAKoY,SAASC,KAC3B5H,QAAO2H,GAAY7S,EAAI4N,MAAKuE,GAAQA,EAAKa,OAAOH,OAGrDrY,KAAKyY,GACH,MAAMT,EAAkB,GAClBU,GAAsB,EAAVD,EAElB,IAAK,MAAM/C,KAAKhV,GAAEgY,EAAWD,GAC3B,IAAK,MAAM7O,KAAKlJ,GAAEoH,KAAK+P,IAAIa,GAAiB,EAALhD,EAAUgD,GAAY5Q,KAAKmQ,IAAIQ,GAAc,EAAL/C,EAAU+C,IAAU,CACjG,MAAMxK,GAAKyH,EAAI9L,EACfoO,EAAQvV,KAAKxC,KAAKiY,IAAI,IAAIX,GAAK7B,EAAG9L,EAAGqE,KAGzC,OAAO+J,EAGThY,OACE,OAAOC,KAAKuX,MAGdxX,aAGE,MAAM2Y,EAAM1Y,KAAKyV,GAAKzV,KAAKgO,GAAc,EAAThO,KAAKgO,IAAU,EACzC2K,EAAM3Y,KAAKgO,EACjB,OAAO,IAAI4K,GAASD,EAAKD,GAG3B3Y,WACE,OAAOC,KAAK6Y,aAAaC,WAG3B/Y,WACE,MAAO,GAAGC,KAAKyV,KAAKzV,KAAK2J,KAAK3J,KAAKgO,KAMvC,MAAMmK,GAAiB,CACrB,IAAIb,GAAK,GAAK,EAAG,GACjB,IAAIA,GAAK,EAAI,GAAI,GACjB,IAAIA,GAAK,EAAG,GAAK,GACjB,IAAIA,IAAM,EAAG,EAAI,GACjB,IAAIA,IAAM,EAAG,EAAG,GAChB,IAAIA,GAAK,GAAI,EAAG,ICjFlB,MAAMyB,GAAgB,CACpBC,UAAW,CACT,CAAEL,IAAK,EAAID,KAAM,GACjB,CAAEC,IAAK,EAAID,IAAK,GAChB,CAAEC,IAAK,EAAID,IAAK,GAChB,CAAEC,KAAM,EAAGD,IAAK,IAElBO,OAAQ,CACN,CAAEN,IAAK,EAAID,KAAM,GACjB,CAAEC,KAAM,EAAGD,IAAK,GAChB,CAAEC,IAAK,EAAID,IAAK,GAChB,CAAEC,IAAK,EAAID,IAAK,GAChB,CAAEC,KAAM,EAAGD,IAAK,GAChB,CAAEC,IAAK,EAAID,KAAM,GACjB,CAAEC,KAAM,EAAGD,KAAM,GACjB,CAAEC,IAAK,EAAID,IAAK,KAIPQ,GAAqB,CAACjX,EAAiB4G,IAClD5G,EAAEyW,IAAIrH,aAAexI,EAAE6P,IAAIrH,YAAcpP,EAAE0W,IAAItH,aAAexI,EAAE8P,IAAItH,iBAEzDuH,GAkEX7Y,YACS4Y,EACAD,EACAS,EAAiC,aAFjCnZ,SAAA2Y,EACA3Y,SAAA0Y,EACA1Y,YAAAmZ,EApETpZ,OAAO4X,GACL,OAAO,IAAIiB,GAASjB,EAAGgB,IAAM3Y,KAAK2Y,IAAKhB,EAAGe,IAAM1Y,KAAK0Y,KAEvD3Y,SAIE,MAAM0V,EAAIzV,KAAK0Y,KAAO1Y,KAAK2Y,KAAgB,EAAT3Y,KAAK2Y,MAAU,EAC3C3K,EAAIhO,KAAK2Y,IAEf,OAAO,IAAIrB,GAAK7B,GADLA,EAAIzH,EACOA,GAGxBjO,WACE,MAAM4Y,IAACA,EAAGD,IAAEA,GAAO1Y,KACnB,MAAO,CAAC0Y,IAAAA,EAAKC,IAAAA,GAGf5Y,SAASmY,GACP,MAAMkB,EAAYxQ,GAAEmQ,GAAc/Y,KAAKmZ,QAAQjB,IAE/C,OADAkB,EAAUD,OAASnZ,KAAKmZ,OACjBnZ,KAAKiY,IAAImB,GAGlBrZ,YACE,OAAOU,GAAE,EAAGsY,GAAc/Y,KAAKmZ,QAAQzY,OAAS,GAAG6E,KAAK8S,GAAQrY,KAAKoY,SAASC,KAGhFtY,SAASyX,GACP,gBA7DgCvV,EAAW4G,GAC7C,OAAOhB,KAAKwR,KAAKxR,KAAKyR,IAAIzQ,EAAE6P,IAAMzW,EAAEyW,IAAK,GAAK7Q,KAAKyR,IAAIzQ,EAAE8P,IAAM1W,EAAE0W,IAAK,IA4D7DY,CAAoBvZ,KAAMwX,GAEnCzX,kBAAkByX,GAChB,gBA5DmCvV,EAAW4G,GAChD,OAAOhB,KAAKgQ,IAAIhQ,KAAKgQ,IAAI5V,EAAEyW,IAAM7P,EAAE6P,KAAO7Q,KAAKgQ,IAAI5V,EAAE0W,IAAM9P,EAAE8P,MA2DpDa,CAAuBxZ,KAAMwX,GAGtCzX,IAAI0X,GACF,MAAMiB,IAACA,EAAGC,IAAEA,GAAO3Y,KACnB,OAAO,IAAI4Y,GAASD,EAAMlB,EAAUkB,IAAKD,EAAMjB,EAAUiB,IAAK1Y,KAAKmZ,QAErEpZ,OAAO0Z,GACL,MAAMf,IAACA,EAAGC,IAAEA,GAAO3Y,KACnB,OAAO,IAAI4Y,GAASD,EAAMc,EAAad,IAAKD,EAAMe,EAAaf,IAAK1Y,KAAKmZ,QAG3EpZ,OAAOyX,GACL,OAAO,MAACA,GAA0CA,EAAMkB,IAAIrH,aAAerR,KAAK0Y,IAAIrH,YAAcmG,EAAMmB,IAAItH,aAAerR,KAAK2Y,IAAItH,WAGtItR,WACE,MAAO,GAAGC,KAAK0Y,OAAO1Y,KAAK2Y,MAG7B5Y,mBACE,OAAO,IAAI6Y,GAAS5Y,KAAK2Y,IAAK3Y,KAAK0Y,IAAK,UAE1C3Y,sBACE,OAAO,IAAI6Y,GAAS5Y,KAAK2Y,IAAK3Y,KAAK0Y,IAAK,aAG1C3Y,kBAAkBsP,GAChB,IAAKA,EAAK,OAAO,KACjB,MAAOqJ,EAAKC,GAAOtJ,EAAI1E,MAAM,KAAKpF,KAAKrE,GAAMwY,SAASxY,EAAG,MACzD,OAAO,IAAI0X,GAASD,EAAKD,IAUtB,MAAM9P,GAAI,EAAE+P,IAAAA,EAAKD,IAAAA,KACtB,IAAIE,GAASD,EAAKD,YClIJiB,KACZ,IAAI1R,GAAI,IAAI4L,MAAO+F,UACfC,EAAMC,aAAeA,YAAY3D,KAA0B,IAAlB2D,YAAY3D,OAAgB,EACzE,MAAO,uCAAuC3F,QAAQ,SAAS,SAAStI,GACpE,IAAIzH,EAAoB,GAAhBoH,KAAKC,SAQb,OAPGG,EAAI,GACHxH,GAAKwH,EAAIxH,GAAG,GAAK,EACjBwH,EAAIJ,KAAKkS,MAAM9R,EAAE,MAEjBxH,GAAKoZ,EAAKpZ,GAAG,GAAK,EAClBoZ,EAAKhS,KAAKkS,MAAMF,EAAG,MAET,MAAN3R,EAAYzH,EAAS,EAAJA,EAAU,GAAM4Q,SAAS,OCVnD,MAAM2I,GACE,CACPC,MAAO,CACHC,QAAS,kBACTC,GAAI,QACJC,GAAI,SAERtI,IAAK,CACDoI,QAAS,gBACTC,GAAI,OACJC,GAAI,QAERC,MAAO,CACHH,QAAS,kBACTC,GAAI,OACJC,GAAI,SAERE,IAAK,CACDJ,QAAS,gBACTC,GAAI,WACJC,GAAI,OAERG,KAAM,CACFL,QAAS,iBACTC,GAAI,QACJC,GAAI,SAzBHJ,GA4BD,CACJQ,MAAO,CACHN,QAAS,eACTC,GAAI,QACJC,GAAI,SAERK,OAAQ,CACJP,QAAS,gBACTC,GAAI,SACJC,GAAI,UAERM,OAAQ,CACJC,MAAO,CACHT,QAAS,sBACTC,GAAI,QACJC,GAAI,UAGZQ,MAAO,CACHC,SAAU,CACNhQ,KAAM,CACFqP,QAAS,6BACTC,GAAI,gBACJC,GAAI,kBAERU,MAAO,CACHZ,QAAS,8BACTC,GAAI,8DACJC,GAAI,+DAGZW,qBAAsB,CAClBlQ,KAAM,CACFqP,QAAS,yCACTC,GAAI,+BACJC,GAAI,2BAERU,MAAO,CACHZ,QAAS,0CACTC,GAAI,+KACJC,GAAI,uIAGZY,mBAAoB,CAChBnQ,KAAM,CACFqP,QAAS,uCACTC,GAAI,uCACJC,GAAI,yCAERU,MAAO,CACHZ,QAAS,wCACTC,GAAI,wKACJC,GAAI,2HAIhB3W,WAAY,CACRwX,KAAM,CACFf,QAAS,yBACTC,GAAI,uCACJC,GAAI,sCAERc,QAAS,CACLhB,QAAS,4BACTC,GAAI,0CACJC,GAAI,wCACJe,KAAM,CACFjB,QAAS,iCACTC,GAAI,UACJC,GAAI,QAERgB,OAAQ,CACJlB,QAAS,mCACTC,GAAI,YACJC,GAAI,UAERiB,QAAS,CACLnB,QAAS,oCACTC,GAAI,cACJC,GAAI,WAERkB,KAAM,CACFpB,QAAS,iCACTC,GAAI,iBACJC,GAAI,eAERO,MAAO,CACHF,OAAQ,CACJP,QAAS,yCACTC,GAAI,eACJC,GAAI,gBAERI,MAAO,CACHN,QAAS,wCACTC,GAAI,cACJC,GAAI,eAERG,KAAM,CACFL,QAAS,uCACTC,GAAI,cACJC,GAAI,cAERmB,cAAe,CACXrB,QAAS,gDACTC,GAAI,sBACJC,GAAI,uBAERoB,aAAc,CACVtB,QAAS,+CACTC,GAAI,mBACJC,GAAI,sBAERqB,iBAAkB,CACdvB,QAAS,mDACTC,GAAI,gCACJC,GAAI,4BAERsB,WAAY,CACRxB,QAAS,6CACTC,GAAI,yBACJC,GAAI,mCCjHZuB,GAAKpL,KAAcqF,GAC/B,MAAM+F,EAAOpL,EA5BN/K,SAASoW,gBAAgBC,MAAQ,MA6BxC,OAAKF,EAGEA,EAAKnL,QAAQ,gBAAgB,CAACnI,EAAGuC,IAAUgL,EAAKhL,KAF5C2F,EAAI2J,QC1BnB,SAAS4B,GAASvL,GACd,MAAO,CACH1F,KAAM8Q,GAAKpL,EAAI1F,MACfiQ,MAAOa,GAAKpL,EAAIuK,iBCTRiB,GAAKnB,GACjB,OAAOA,EAAMja,QAAO,CAACqb,EAAKC,IAASD,EALvC,SAAW/T,GACP,OAAOA,EAAEiU,MAAMrU,KAAKkS,MAAMlS,KAAKC,SAAWG,EAAEiU,MAAMxb,SAASyO,MAIlB1O,CAAEwb,IAAO,GCF/C,MAAME,GAAsB,CAC/BC,GAAI,wBACJvR,KAAM,eACNwR,KAAM,GACNC,WAAY,CACRtE,IAAK,GAET4C,MAAO,gCFoCAkB,GAAS9B,GAAaY,MAAMI,sBAC/BkB,MAAO,CACH,CAAE/M,MAAO,IACT,CAAEA,MAAO,IACT,CAAEA,MAAO,IACT,CAAEA,MAAO,IACT,CAAEA,MAAO,QEzCjBoN,OAAQ,CACJC,QAAS,GACT5E,IAAK,IAETsD,QAAS,CACLsB,QAAS,EACT5E,IAAK,GAET6E,UAAW,CACPpC,MAAO,CAACqC,kBAAmB,IAC3BpC,IAAK,CAAEoC,kBAAmB,IAC1BzC,MAAO,CAAEyC,kBAAmB,IAC5BnC,KAAM,CAAEmC,kBAAmB,MClB7BC,GAA6D,CAC/DC,MAAUC,GACNhV,KAAK+P,IAAmB,IAAfiF,EAAMnc,OAAgBmH,KAAKiV,MAAMjV,KAAKC,UAAY+U,EAAMnc,OAAS,KAC9Eqc,IAAQF,GACRhV,KAAKmQ,IAAmB,IAAf6E,EAAMnc,OAAemH,KAAKiV,MAAMjV,KAAKC,UAAY+U,EAAMnc,OAAS;;;;;;;;;;;;;;;4UCXtE,MAOMsc,GAAY,CAAC,MAAO,QAAS,OAAQ,OAAQ,kBAkC1CC,GAA0BC,SACtC,YAAkBnN,IAAVmN,QACoDnN,eAApDmN,wBAAsCT,oBAsBlCU,GAAkBD,WAC9B,YAAkBnN,IAAVmN,cAAwBA,wBAA2BvE,MAAO,cAAMuE,wBAA2BxE,MAAO,WAwB9F0E,GAAkBF,SAC9B,YAAkBnN,IAAVmN,QAA+DnN,eAAvCmN,wBAA2BhC,kBAe/CmC,GAAgBH,WAC5B,OAAQA,wBAAUA,wBAAyBhC,8BAAStD,KAAM,WAS9C0F,GAAeJ,WAC3B,OAAQA,wBAAUA,wBAAuBtC,4BAAOla,QAAS,WAE7C6c,GAAgBL,WAC5B,OAAQA,wBAAUA,wBAAuBtC,4BAAOla,QAAS,ECrHtD,MAAM8c,GAA+D,CACxEpB,GAAI,gBACJvR,KAAM,OACNyR,WAAY,CACRtE,IAAK,GAETyE,UAAW,CACPpC,MAAO,CAACC,IAAK,IAAKoC,kBAAmB,IACrCpC,IAAK,CAAEoC,kBAAmB,MAUlC,SAASe,GAAuBC,GAC5B,YAAkB3N,IAAX2N,GAAyBA,EAAgC9F,IAAM,EAK1E,MAAM+F,GAAkD,gCAChDH,KAAMxF,IAAK,EAAGJ,IAAK,mCACnB4F,KAAMxF,IAAK,EAAGJ,IAAK,MAUdgG,GAAoB,EAAE5F,IAAAA,EAAKJ,IAAAA,GAA4BiG,EAAcC,KAC9E,MAAMC,EAAOC,GAAmBH,EAAOC,GAAQE,EAAS,IACxD,OAAOnW,KAAKkS,MAAMlS,KAAKC,UAAYiW,EAAInG,GAAOmG,EAAI/F,IAAQ+F,EAAI/F,KAwBrDiG,GAAiC,CAACC,EAAc7B,WACzD,iBAAA6B,MAAAA,SAAAA,EAAO3Y,0BAAK5E,QAAO,CAACwd,EAAoCxF,IACpD,IACOwF,KACAxF,EAAIhY,QAAO,CAACwd,EAAMzF,IAAQ,IACtByF,KACAzF,EAAI0F,SACF3N,OAAOwM,IACPxM,QAAQ4N,GAAoBA,EAAShC,OAASA,MACpD,MAET,KAGOiC,GAAoB,IAAIX,IAC1BA,EAAUhd,QAAO,CAAC+P,EAAQ2N,KAC7B3N,EAAOlO,QAAQpB,OAAOkP,QAAQ+N,EAAS5B,WAAWlX,KAAKgZ,QAACC,QAAU9B,kBAACA,KAAsBD,OAAvB,uBAC9D,IAAIgC,EAAuC,GAC1CA,EAA0BD,kCAAgB/B,IAAWC,kBAAAA,IAKtD,OAJ2Ctb,+BACpCid,IACH5B,UAAWgC,QAIZ/N,IACR,IAAoCD,OAAOtP,SClFrCud,GAA0C,CACnDC,KAAS,CACLjB,OAAQ,CACJ7S,KAAM,OACN+T,KAAM,uBACNnJ,EAAG,IACH9L,EAAG,MAEPkV,cAAe,EACfC,QAAS,GAEbC,OAAW,CACPrB,OAAQ,CACJ7S,KAAM,SACN+T,KAAM,uBACNnJ,EAAG,IACH9L,EAAG,KAEPkV,cAAe,EACfC,QAAS,GAEbE,IAAQ,CACJtB,OAAQ,CACJ7S,KAAM,MACN+T,KAAM,uBACNnJ,EAAG,IACH9L,EAAG,KAEPkV,cAAe,EACfC,QAAS,GAEbG,WAAe,CACXvB,OAAQ,CACJ7S,KAAM,aACN+T,KAAM,uBACNnJ,EAAG,IACH9L,EAAG,KAEPkV,cAAe,EACfC,QAAS,GAEbI,OAAW,CACPxB,OAAQ,CACJ7S,KAAM,SACN+T,KAAM,uBACNnJ,EAAG,IACH9L,EAAG,KAEPkV,cAAe,EACfC,QAAS,GAEbK,SAAa,CACTzB,OAAQ,CACJ7S,KAAM,WACN+T,KAAM,uBACNnJ,EAAG,IACH9L,EAAG,MAEPkV,cAAe,GACfC,QAAS,IAIJM,GAAgB,WACzB,MAAMhN,EAAOhR,OAAOgR,KAAKsM,IACzB,iBAAOA,GAAetM,EAAKvK,KAAKkS,MAAMlS,KAAKC,SAAYsK,EAAW,yBAAQsM,GAAeS,UClDhFE,GAAcC,GAAqB,0BAEnCC,GAAYD,GAAc,cAC1BE,GAAgBF,GAAc,qBAErCG,GAAgB,EAAE5B,KAAAA,EAAMC,KAAAA,KFeI,CAAC1K,IAC/B,MAAMsM,EAAuC,IAAIre,MAAM+R,EAAMyK,KAAOzK,EAAM0K,MAAMvY,KAAI,IAAM,KAiB1F,OAhBAoY,GAAU/a,SAAQyb,UACd,IAAIV,EACAU,EAAS/B,WAAWqD,OACd9X,KAAK+P,IAAIyG,EAAS/B,WAAWtE,IAAK0H,EAAkBhf,OAAS2d,EAAS/B,WAAWqD,QACjFtB,EAAS/B,WAAWtE,IAC9B,KAAO2F,EAAY,GAAG,CAClB,MAAMiC,EAAWnC,GAAuBY,GAClCT,GAAkBS,EAAUjL,EAAMyK,KAAMzK,EAAM0K,OAhB5C+B,EAiBSH,EAAkBhf,OAjBVmH,KAAKiV,MAAMjV,KAAKC,UAAY+X,EAAO,KAkB5DH,EAAkBE,GAAY,cACtBF,EAAkBE,kBAAa,kCAC9BvB,IAAUxT,KAAMwT,EAASjC,GAAIA,GAAIzC,QAE1CgE,IAtBO,IAACkC,KAyBTH,GEhCWI,CAAmB,CAAEjC,KAAAA,EAAMC,KAAAA,IAI3CiC,GAAmB,CAAC1D,GAAawB,KAAAA,EAAMC,KAAAA,KJpBT,EAACzB,EAAYjJ,KAC7C,MAAMsM,EAAqC,IAAIre,MAAM+R,EAAMyK,KAAOzK,EAAM0K,MAAMvY,KAAI,IAAM,KAoBxF,MAnBA,CAAE4W,IAAcvZ,SAAQyb,UACpB,IAAIV,EACAU,EAAS/B,WAAWqD,OACd9X,KAAK+P,IAAIyG,EAAS/B,WAAWtE,IAAK0H,EAAkBhf,OAAS2d,EAAS/B,WAAWqD,QACjFtB,EAAS/B,WAAWtE,IAC9B,KAAO2F,EAAY,GAAG,CAClB,MAAMqC,EAAYrD,GAAON,GAAMqD,GAC/BA,EAAkBM,GAAa,cACvBN,EAAkBM,kBAAc,kCAE7B3B,IACHxT,KAAMwT,EAASjC,GACfC,KAAAA,EACAD,GAAIzC,QAGZgE,QAGD+B,GIAAO,CAAqB5D,EAAM,CAAEwB,KAAAA,EAAMC,KAAAA,IAGxCoC,GAAiB,CAACrD,EAAkBlE,EAAaD,WAEnD,iBADgBmE,EAAMsD,qBAAS,IAChB5a,KAAImL,kCAAeA,IAAQiI,IAAAA,EAAKD,IAAAA,aCvC9B0H,GAMjBrgB,YAAoBsgB,EAAW,KAC3BC,EAA6BC,aADbvgB,cAAAqgB,EAGhBrgB,KAAKqgB,SAAWA,EAChBrgB,KAAKwgB,MAAQ,GACbxgB,KAAKygB,YAAc,IAAIH,EAA2BD,EAbvC,GAcXrgB,KAAKU,OAAS,EAGlBX,QACIC,KAAKU,OAAS,EASlBX,SAAS6K,GACL,MAAM2F,EAAMvQ,KAAKwgB,MAAM5V,GACjB8V,EAAW1gB,KAAKygB,YAAY7V,GAElC,KAAOA,EA/BI,GA+BgB,CAEvB,MAAM+V,EAAc/V,IAAU,EAC9B,GAAI5K,KAAKygB,YAAYE,IAAgBD,EACjC,MAGJ1gB,KAAKwgB,MAAM5V,GAAS5K,KAAKwgB,MAAMG,GAC/B3gB,KAAKygB,YAAY7V,GAAS5K,KAAKygB,YAAYE,GAG3C/V,EAAQ+V,EAIZ3gB,KAAKwgB,MAAM5V,GAAS2F,EACpBvQ,KAAKygB,YAAY7V,GAAS8V,EAS9B3gB,WAAW6K,GACP,MAAM2F,EAAMvQ,KAAKwgB,MAAM5V,GACjB8V,EAAW1gB,KAAKygB,YAAY7V,GAE5BgW,EA5DK,GA4DsB5gB,KAAKU,SAAW,GAC3C6I,EAAYvJ,KAAKU,OA7DZ,EA8DX,KAAOkK,EAAQgW,GAAY,CACvB,MAAMC,EAAOjW,GAAS,EACtB,GAAIiW,GAAQtX,EACR,MAIJ,IAAIuX,EAAgB9gB,KAAKygB,YAAYI,GACjCE,EAAW/gB,KAAKwgB,MAAMK,GACtBG,EAAaH,EAGjB,MAAMI,EAAQJ,EAAO,EACrB,GAAII,EAAQ1X,EAAW,CACnB,MAAM2X,EAAgBlhB,KAAKygB,YAAYQ,GACnCC,EAAgBJ,IAChBA,EAAgBI,EAChBH,EAAW/gB,KAAKwgB,MAAMS,GACtBD,EAAaC,GAIrB,GAAIH,GAAiBJ,EACjB,MAIJ1gB,KAAKwgB,MAAM5V,GAASmW,EACpB/gB,KAAKygB,YAAY7V,GAASkW,EAG1BlW,EAAQoW,EAIZhhB,KAAKwgB,MAAM5V,GAAS2F,EACpBvQ,KAAKygB,YAAY7V,GAAS8V,EAO9B3gB,KAAKwQ,EAAQmQ,EAAW,GACpB,GAAI1gB,KAAKU,SAAWV,KAAKqgB,SACrB,MAAM,IAAIngB,MAAM,mDAEpB,MAAMihB,EAAMnhB,KAAKU,OA7GN,EA8GXV,KAAKwgB,MAAMW,GAAO5Q,EAClBvQ,KAAKygB,YAAYU,GAAOT,EACxB1gB,KAAKohB,SAASD,GACdnhB,KAAKU,SAGTX,MACI,MAAMwQ,EAAMvQ,KAAKwgB,MArHN,GAgIX,OATAxgB,KAAKU,SAEDV,KAAKU,OAAS,IACdV,KAAKwgB,MA1HE,GA0HkBxgB,KAAKwgB,MAAMxgB,KAAKU,OA1HlC,GA2HPV,KAAKygB,YA3HE,GA2HwBzgB,KAAKygB,YAAYzgB,KAAKU,OA3H9C,GA6HPV,KAAKqhB,WA7HE,IAgIJ9Q,EAGXxQ,eACI,OAAOC,KAAKygB,YApID,GAuIf1gB,OACI,OAAOC,KAAKwgB,MAxID,GA2IfzgB,WACI,GAAoB,IAAhBC,KAAKU,OACL,MAAO,gBAGX,MAAMgQ,EAASrP,MAAMrB,KAAKU,OAhJf,GAiJX,IAAK,IAAIQ,EAAI,EAAGA,EAAIlB,KAAKU,OAAQQ,IAC7BwP,EAAOxP,GAAKlB,KAAKygB,YAAYvf,EAlJtB,GAoJX,MAAO,IAAIwP,EAAOC,KAAK,QAI3BtQ,IAAKV,OAAO2hB,eACR,MAAO,UAGXvhB,EAAGJ,OAAOsN,YACN,IAAK,IAAI/L,EAAI,EAAGA,EAAIlB,KAAKU,OAAQQ,IAAK,CAClC,MAAMwf,EAAW1gB,KAAKygB,YAAYvf,EA9J3B,GA+JDqP,EAAMvQ,KAAKwgB,MAAMtf,EA/JhB,QAgKD,CAACqP,EAAKmQ,IAIpB3gB,QACI,IAAK,IAAImB,EAAI,EAAGA,EAAIlB,KAAKU,OAAQQ,UACvBlB,KAAKwgB,MAAMtf,EAtKV,GA0KfnB,cACI,IAAK,IAAImB,EAAI,EAAGA,EAAIlB,KAAKU,OAAQQ,UACvBlB,KAAKygB,YAAYvf,EA5KhB,ICInB,MAAMkb,GAAMlU,GAAaA,EAAE2Q,aAAaxH,WAMjC,MAAMkQ,GAAe,CAACpK,EAAaqK,EAAYjc,EAAakc,EAAiCvK,KAClG,MAAMwK,EAAW,IAAItB,GACrBsB,EAASlf,KAAK2U,EAAO,GACrB,MAAMwK,EAAkD,GAClDC,EAAuC,GACvCC,EAAoB,GAC1B,IAAIC,GAAY,EAIhB,GAHAH,EAASvF,GAAGjF,IAAUiF,GAAGjF,GACzByK,EAAUxF,GAAGjF,IAAU,EAEpBA,EAAMoB,OAAOiJ,GAAO,MAAO,CAC5BO,KAAM,IAGR,GAAIN,EAAUD,GAAO,MAAO,CAC1BO,KAAO,IAGT,KAAOL,EAAShhB,OAAS,GAAG,CAC1B,MAAM8b,EAAUkF,EAASvB,MACzB,GAAI3D,EAAQjE,OAAOiJ,GAAM,CAAEM,GAAY,EAAM,MAC7C,GAAIJ,EAAShhB,OAAS,IACpB,MAAM,IAAIR,MAAM,8CAGlB2hB,EAAQrf,KAAKga,EAAQ3D,aAAaxH,YAElC,IAAK,MAAMqD,KAAQ8H,EAAQwF,UAAUzc,GAAKkL,QAAO2I,IAAcuI,EAASvF,GAAGhD,MAAa7T,KAAI6T,UACxF,iBAAA7T,EAAI+S,MAAKpX,GAAKA,EAAEqX,OAAOa,oBAAeA,KAAY,CACpD,GAAIqI,EAAU/M,GAAO,SAChBmN,EAAQ1O,MAAKjS,GAAKA,IAAMkb,GAAG1H,MAAQmN,EAAQrf,KAAK4Z,GAAG1H,IAExD,MAAMuN,EAAUL,EAAUxF,GAAGI,IAAY9H,EAAKwN,OAC1ChL,EAAQ+K,KACPL,EAAUxF,GAAG1H,KAAUuN,EAAUL,EAAUxF,GAAG1H,OACjDkN,EAAUxF,GAAG1H,IAASuN,EACtBP,EAASlf,KAAKkS,EAAMuN,EAAUT,EAAKW,UAAUzN,IAC7CiN,EAASvF,GAAG1H,IAAS8H,EAAQ3D,aAAaxH,aAKhD,MAAM+Q,EAAgBjL,EAAM0B,aAC5B,IAAKiJ,EAAW,MAAO,CAAEC,KAAM,GAAIF,QAAAA,GACnC,IAAIrF,EAA2BgF,EAAK3I,aACpC,MAAMkJ,EAAmB,GACzB,GACEA,EAAKvf,KAAKga,GACVA,EAAU5D,GAASyJ,WAAWV,EAASnF,EAAQnL,mBAC5B,OAAZmL,IAAqBA,EAAQjE,OAAO6J,IAE7C,MAAO,CAACL,KAAOA,EAAK5d,UAAW0d,QAAAA,ICvDpBS,GAAQC,GAA2B,gBAGnCC,GAAelD,GAA4B,iBAM3CmD,GAAsBF,GAAyC,yBAM/DG,GAAepD,GAAqC,kCAMpDqD,GAAYrD,GAA8B,qBAM1CsD,GAAgBtD,GAA4B,0BAC5CuD,GAAevD,GAA4B,wBAE3CwD,GAA0BxD,GAAuB,wBAGjDyD,GAAkBzD,GAA+B,2BAGjD0D,GAA4B1D,GAAyC,+BAErE2D,GAAsBV,GAAyC,4BAK/DW,GAAiBX,GAA2C,sBAAuB,CAAE/P,UAAU,IAS/F2Q,GAAmB7D,GAA4B,uBAC/C8D,GAAoB9D,GAA4B,wBAChD+D,GAAqB/D,GAAc,yBAEnCgE,GAAwBhE,GAA+B,6BAEvDiE,GAAcjE,GAAkC,kBAWhDkE,GAAuBlE,GAA8B,gCACrDmE,GAA8BnE,GAA8B,wCAC5DoE,GAA6BpE,GAA2B,uCACxDqE,GAAiBrE,GAA8B,0BAC/CsE,GAAwBtE,GAA8B,kCACtDuE,GAAuBvE,GAA2B,iCAQlDwE,GAAqBxE,GAA8B,yBACnDyE,GAAmBzE,GAA8B,uBAEjD0E,GAAgB1E,GAAoC,oBACpD2E,GAAuB3E,GAA8B,2BAOrD4E,GAAgB5E,GAA6B,kBAW7C6E,GAAkB7E,GAAgC,sBAOlD8E,GAAuB9E,GAAoC,0BAY3D+E,GAAe/E,GAA0B,iBACzCgF,GAAqBhF,GAA0B,uBAC/CiF,GAAejF,GAA0B,iBAGzCkF,GAAkBlF,GAA+B,qBAOjDmF,GAAsBnF,GAAmC,0BAGzDoF,GAAcpF,GAA2B,sBAGzCqF,GAAerF,GAA4B,uBAG3CsF,GAAqBtF,GAAkC,wBAGvDuF,GAAgBvF,GAA6B,uBAG7CwF,GAAqBxF,GAAkC,uBAOvDyF,GAA6BzF,GAA0C,iCAGvE0F,GAAkB1F,GAA+B,qBAMjD2F,GAAsB3F,GAAmC,wBACzD4F,GAA0B5F,GAA8B,gCACxD6F,GAAmB7F,GAAmC,gCC9ItD/H,GAAQ,MACjB8C,MAAO,IACPE,KAAM,IACND,IAAK,EACL8K,KAAM,EACNnL,MAAO,aCRKoL,GAAwBnH,EAAc7B,GAClD,IAAK6B,IAAUA,EAAM3Y,IAAK,MAAO,GACjC,MAAM+f,EAAehY,GACjB+O,IAAS/O,EAAQ+O,KAEftE,EAAmB,GAEzB,IAAK,MAAMY,KAAOuF,EAAM3Y,IACpB,IAAK,MAAMmT,KAAOC,EACdZ,EAAQvV,QAAQkW,EAAI0F,SAAS3N,OAAO6U,IAG5C,OAAOvN,WCxCKwN,GAAkBjY,iBAC9B,IAAKA,EAAS,OAMd,MALiB,6DAAK9H,mBAAAA,gBAAAA,SAAUggB,cAAc,kCAAargB,iCACvDqgB,cAAc,mCAAcrgB,iCAC5BsgB,iBAAiB,kCACd,IAESnN,MAAKoN,YACjB,2BAAAA,EAAQvgB,iCAAYqgB,cAAc,oCAAeA,cAAc,QAAQlY,EAAQ8O,WAGtF5W,SAAiB+f,kBAAoBA,GCD/B,MAAMhO,GAAQ,MACjB8C,MAAO,GACPE,KAAM,EACND,IAAK,EACL8K,KAAM,GACNnL,MAAO,aCfK0L,GAAUnH,EAAmB5c,GACzC,OAAO4c,EAASd,OAAO7S,OAASjJ,ECiBpC,IAGIgkB,GAHA1H,GAAe,GACf2H,GAAsB,GAGtBC,GAAgB,GAEhBC,GAAmB,GAKhB,MAAMC,GAAa3J,oBAAqB0J,GAAQ1J,IAC1C4J,GAAkB,IAAMF,GAAQH,IACvCM,GAAkBhJ,GAAyBA,EAAMhC,QAAQsB,QAAU,EACnE2J,GAAW,EAAG9J,KAAAA,KAAuCA,IAASuJ,GAEpEQ,GAAatP,GAAGuI,IAAaxM,MAAOwT,IAChCR,GAAc,GACdQ,EAAS9gB,IAAI3C,SAAQ,CAAC+V,EAAK2N,KACvB3N,EAAI/V,SAAQ,CAACyF,EAAGke,KACZ,MAAM7O,EAAO,IAAIkB,GAAS0N,EAAUC,GAAUC,SAC1Cne,EAAEoe,QAAQ5H,gBACVnH,EAAKH,MAAQlP,EAAEoe,QAAQ5H,eAE3BgH,GAAYrjB,KAAKkV,SAGzBwG,GAAQmI,EZ7CuB,CAAC,QAAS,OY8CjCzjB,SAAQyZ,IACZ0J,GAAQ1J,GAAQ,CACZI,UAAW,CACPnC,IAAK,IACLD,MAAO,IACPE,KAAM,IACN6K,KAAM,IACNnL,MAAO,eAIbyM,GAAenH,OAGzB6G,GAAatP,GAAGwL,IAAOzP,MAAO8T,IACrBA,IACLD,GAAerD,IACfqD,GAAezC,QAGnBmC,GAAatP,GAAG,CAACyI,GAAWC,KAAgB3M,gBAClC6T,GAAehC,OAGzB0B,GAAatP,GAAG4N,IAAa7R,UACzBiT,GAAQ,IAAI5H,GAAM0I,OAClBhB,GAAcE,GAAM3F,YACduG,GAAe/B,GAAciB,OA6BvCQ,GAAatP,GAAGmO,IAAqBpS,OAASwJ,KAAAA,EAAMwK,oBAAAA,YAChD,aAAIb,GAAU3J,yBAAOI,UAAW,CAC5B,MAAMqK,mBAAcd,GAAU3J,GAAMI,WACpCsJ,GAAQ1J,GAAMI,mBA7BYsK,EAA6BF,GAC3D,IAAIG,mBAA+BD,GAC/BE,EAA4D,IAAIJ,GAChEK,GAAU,EAEd,KAAOA,GACHA,GAAU,EACVD,EAA8BA,EAA4B1hB,KAAK4hB,IAC3D,IAAIzW,EAAiDyW,EAYrD,OAXA/lB,OAAOkP,QAAQ6W,EAA2B1K,WAAW7Z,SAAS2b,QAAC6I,QAAQ1K,kBAAEA,KAAsBnF,OAAxB,uBAC/DnW,OAAOkP,QAAQiH,GAAOjF,OAAM,EAAEkM,EAAU0D,KAAU8E,EAAmBxI,IAAa0D,MAClFgF,GAAU,EACVxW,OAASX,EACT3O,OAAOkP,QAAQiH,GAAO3U,SAAQ,EAAE4b,EAAU0D,MACtC8E,EAAmBxI,IAAa0D,KAEpC8E,EAAmBI,IAAW1K,EAC9BgK,GAAe5B,GAAoBqC,OAGpCzW,KACRD,OAAOtP,SAEd,OAAO6lB,EAMuBK,CAAkBtB,GAAQ1J,GAAMI,UAAWoK,GACrEH,GAAe3B,GAA4B,CAAE1I,KAAAA,EAAMyK,OAAAA,EAAQ5Q,MAAO6P,GAAQ1J,GAAMI,gBAIxF2J,GAAakB,QAAQxC,GAAoBC,IAA6Bpc,UAClE+d,GAAe1B,aAAkBrc,EAAOmc,GAAmBja,4BAAwCtF,KAAIgiB,IAC5F,CACH1c,KAAM0c,EAAU1c,KAChBwM,KAAMjW,OAAOuH,OAAO4e,EAAU9K,WAAWlX,KAAKgZ,QAAwBhH,OAAxB,uBAAoC,wBAAMA,MACxFI,GAAIvW,OAAOgR,KAAKmV,EAAU9K,mBAKtC2J,GAAatP,GAAG6N,IAAc9R,MAAOwJ,IACjC,MAAMmL,EAAenC,GAAwBnH,GAAO7B,SAC9CqK,GAAe5D,GAAyB0E,GAE9C,MAAMC,EAAeD,MAAAA,SAAAA,EAAclP,MAAKhL,GAAWA,EAAQzC,OAAS6c,KAChEvK,GAAkBsK,IAClBf,GAAejE,GAAqB,CAChCkF,KAAMD,GACN/O,IAAK8O,EAAa9O,IAClBD,IAAK+O,EAAa/O,IAClBkP,QAASH,IAGjBrR,YAAW,qBACPmP,GAAkBkC,mBAAeI,eAAe,CAAEC,SAAU,SAAUC,MAAO,SAAUC,OAAQ,aAChG,GAEHtB,GAAelE,GAAcwD,GAAU3J,IAGvC,MAAM4L,EACFhK,GAA+BC,GAAO7B,GACjC1b,QAAO,CAACwd,EAAME,IAAa,IAAIF,KAASG,GAAkBD,KAAY,IAE/EqI,GAAevB,GAAkB,CAAE9I,KAAAA,EAAMwK,oBAAqBoB,UACxDvB,GAAezB,GAAqB,CAAE5I,KAAAA,EAAMwK,oBAAqBoB,OAI3E7B,GAAatP,GAAGoO,IAAyB,EAAG7I,KAAAA,YAExC,MAAM4L,YACFhK,GAA+BC,GAAO7B,yBAAO1b,QAAO,CAACwd,EAAME,IAAa,IAAIF,KAASG,GAAkBD,KAAY,IAEvHqI,GAAevB,GAAkB,CAAE9I,KAAAA,EAAMwK,oBAAqBoB,OAGlE7B,GAAatP,GAAG2L,IAAqB5P,MAAO1H,UAClCub,GAAehE,kCAAmBvX,IAAMwc,KAAM,mBAC9CjB,GAAehE,oBAAmBvX,UAClCub,GAAehE,kCAAmBvX,IAAMwc,KAAM,gBAGxDvB,GAAatP,GAAG8N,IAAoB,KAChCgB,GAAcE,GAAM3F,WACApQ,IAAhB6V,GACAc,GAAe7B,IAEf6B,GAAe/B,GAAciB,OAIrCQ,GAAatP,GAAG+N,IAAe,KAE3B3G,GAAM3Y,IAAI3C,SAAS+V,IACfA,EAAI/V,SAAQ,EAAGwb,SAAAA,MC/KK,KAAI8J,KAC5BA,EAAOtlB,SAAQsa,IACXA,EAAMhC,QAAQsB,QAAUU,EAAMhC,QAAQtD,QD+KlCuQ,IAAgB/J,EACX3N,OAAO4M,WAIpBqJ,GAAehC,OAGnB,MAAM0D,GAAS,CAAC/L,EAAY9E,KACxB,MAAMyP,mBAA+BjB,GAAQ1J,GAAMI,WACnD,IAAK,MAAO+B,EAAU0D,KAAS9gB,OAAOkP,QAAQiH,GAAQ,CAClD,GAAIyP,EAAmBxI,GAAY0D,EAC/B,OAAO,EAEX8E,EAAmBxI,IAAa0D,EAIpC,OADA6D,GAAQ1J,GAAMI,UAAYuK,GACnB,GAGXZ,GAAatP,GAAG8L,IAAe/P,OAAS8F,IAAAA,EAAKD,IAAAA,EAAK2D,KAAAA,EAAMgM,OAAAA,MACpD,IAAKlC,GAAS,CAAE9J,KAAAA,IAAS,OACzB,IAAK+L,GAAO/L,GLxKZhC,MAAO,IACPE,KAAM,IACND,IAAK,EACL8K,KAAM,EACNnL,MAAO,IKoK2B,OAClC,GAAIoO,EAAOnN,QAAQsB,QAAU,EAAG,OAChC,MAAM/B,EL/LkB,GAAG4B,KAAAA,EAAM1D,IAAAA,EAAKD,IAAAA,OACtC0D,GAAIzC,KACJ9O,KAAMyd,GACNjM,KAAAA,EACA1D,IAAAA,EACAD,IAAAA,EACA6P,SAAU,CACNC,OAAQ,IAEZtN,QAAS,CACLsB,QAAS,EACT5E,IAAK,GAET2E,OAAQ,CACJC,QAAS,GACT5E,IAAK,IAETgD,MAAO,gCXPAkB,GAAS9B,GAAaY,MAAMC,YAC/BqB,MAAO,CACH,CAAE/M,MAAO,GACT,CAAEA,MAAO,GACT,CAAEA,MAAO,GACT,CAAEA,MAAO,GACT,CAAEA,MAAO,GACT,CAAEA,MAAO,qCAOV2M,GAAS9B,GAAaY,MAAMG,wBAC/BmB,MAAO,CACH,CAAE/M,OAAQ,GACV,CAAEA,MAAO,GACT,CAAEA,MAAO,GACT,CAAEA,MAAO,GACT,CAAEA,MAAO,UgBiKFsZ,CAAa,CAAE9P,IAAAA,EAAKD,IAAAA,EAAK2D,KAAAA,IACxC6B,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAS5b,KAAKiY,SAE5BlW,QAAQyO,IAAI,CACd0T,GAAe3D,GAAiB,CAAE4E,KAAMU,IACxC3B,GAAexD,GAAgB,CAAEvK,IAAAA,EAAKD,IAAAA,EAAK0F,SAAU,IAAIF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,YAC7EsI,GAAe5D,GAAyBuC,GAAwBnH,GAAO7B,IACvEqK,GAAelE,GAAcyD,QAGjCS,GAAejE,GAAqB,CAChCkF,KAAMlN,EAAO5P,KACb8N,IAAAA,EAAKD,IAAAA,EACLkP,QAASnN,OAGjB2L,GAAatP,GAAG+L,IAAchQ,OAAS8F,IAAAA,EAAKD,IAAAA,EAAK2D,KAAAA,MAC7C,IAAK8J,GAAS,CAAE9J,KAAAA,IAAS,OACzB,IAAK+L,GAAO/L,GFjNZhC,MAAO,GACPE,KAAM,EACND,IAAK,EACL8K,KAAM,GACNnL,MAAO,IE6M0B,OACjC,MAAMO,EF3MiB,GAAG6B,KAAAA,EAAM1D,IAAAA,EAAKD,IAAAA,OACrC0D,GAAIzC,KACJ9O,KAAM6d,GACNrM,KAAAA,EACA1D,IAAAA,EACAD,IAAAA,EACA6P,SAAU,CACNC,OAAQ,IAEZtN,QAAS,CACLsB,QAAS,EACT5E,IAAK,GAET2E,OAAQ,CACJC,QAAS,GACT5E,IAAK,ME4LK+Q,CAAY,CAAEhQ,IAAAA,EAAKD,IAAAA,EAAK2D,KAAAA,IACtC6B,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAS5b,KAAKgY,SAE5BjW,QAAQyO,IAAI,CACd0T,GAAexD,GAAgB,CAAEvK,IAAAA,EAAKD,IAAAA,EAAK0F,SAAU,IAAIF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,YAC7EsI,GAAe5D,GAAyBuC,GAAwBnH,GAAO7B,IACvEqK,GAAelE,GAAcyD,QAEjCS,GAAejE,GAAqB,CAChCkF,KAAMnN,EAAM3P,KACZ8N,IAAAA,EAAKD,IAAAA,EACLkP,QAASpN,OAIjB4L,GAAatP,GAAGiM,IAAiB,EAAE4E,KAAAA,MAC/BzJ,GAAM3Y,IAAIoiB,EAAKhP,KAAKgP,EAAKjP,KAAK0F,SACzB3N,QAAOnD,GAAWA,EAAQ8O,KAAOuL,EAAKvL,KACtC3L,OAAO2M,IACPxa,SAAQ0K,GAAWA,EAAQ4N,QAAQsB,eAG5C4J,GAAatP,GAAGkM,IAA2B,UAGTjT,IC/OM,EAACmO,EAAc0K,KACnD,IAAK,MAAMjQ,KAAOuF,EAAM3Y,IACpB,IAAK,MAAMmT,KAAOC,EAAK,CACnB,MAAMkQ,EAAwBnQ,EAAI0F,SAC7B3N,OAAO4M,IACP9X,KAAI+H,GAAWA,IACfgL,MAAKhL,GAAWA,EAAQ+O,OAASuM,GAAetb,EAAQ4N,QAAQsB,QAAU,IAE/E,GAAIqM,EACA,OAAOA,IDoOWC,CAAyB5K,GAAO0H,KAG1Dc,GAAezD,IAAqB,MAK5CmD,GAAatP,GAAG0M,IAAsB3Q,OAAS+M,SAAAA,EAAU1C,MAAAA,MACrD,MAAMkB,SAAEA,EAAQqI,QAAEA,GAAYvI,GAAM3Y,IAAIqa,EAASjH,KAAKiH,EAASlH,MACzD2D,KAAEA,GAASa,EACX6L,EAAkB3K,EAAS4K,WAAU1b,GAA4B,iBAAjBA,EAAQzC,OAC9D,GAAKsb,GAAS,CAAE9J,KAAMa,EAAMb,OACvB,GAAmB,iBAAfa,EAAMrS,MAA2Bke,EAAkB,QAASrC,GAAehD,GAA4B,CAAE9D,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,2BACtI,GAAKtD,GAAUc,EAAS,UACxB,GAAIrI,EAASjL,KAAK8J,UAAkCyJ,GAAehD,GAA4B,CAAE9D,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,iDAC1H,CACD,MAAMC,EEpQuB,GAAEtJ,SAAAA,EAAU1C,MAAAA,kCAC7Cd,GAAI,mBACJvR,KAAM,mBACNwR,KAAMa,EAAMb,MACTuD,IACHtD,WAAY,CACRtE,IAAK,GAETyE,UAAW,CACP2I,KAAM,CAAE1I,kBAAmB,OF2PRyM,CAAsB,CAAEvJ,SAAAA,EAAU1C,MAAAA,IACrDkB,EAASnZ,OAAO8jB,EAAiB,GACjC3K,EAASha,QAAQ8kB,SACX3kB,QAAQyO,IAAI,CACd0T,GAAexD,kCACRtD,IACHxB,SAAU,IACHA,MAGXsI,GAAe5D,GAAyBuC,GAAwBnH,GAAOhB,EAAMb,OAC7EqK,GAAelE,GAAcyD,MAC7BS,GAAejD,GAA6B,CAAE7D,SAAAA,EAAU1C,MAAOgM,MAGnExC,GAAexB,GAAyB,CAAE7I,KAAAA,eAlBAqK,GAAehD,GAA4B,CAAE9D,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,wBAAwBxC,EAAQ/I,OAAO7S,oBAFhH6b,GAAehD,GAA4B,CAAE9D,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,4BAA4B/L,EAAMb,YAuBvJ+J,GAAatP,GAAG6M,IAAgB9Q,OAAS+M,SAAAA,EAAU1C,MAAAA,MAC/C,MAAMkB,SAAEA,EAAQqI,QAAEA,GAAYvI,GAAM3Y,IAAIqa,EAASjH,KAAKiH,EAASlH,MACzD2D,KAAEA,GAASa,EACX6L,EAAkB3K,EAAS4K,WAAU1b,GAA4B,iBAAjBA,EAAQzC,OAC9D,GAAKsb,GAAS,CAAE9J,KAAMa,EAAMb,OACvB,GAAmB,iBAAfa,EAAMrS,MAA2Bke,EAAkB,QAASrC,GAAe7C,GAAsB,CAAEjE,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,2BAChI,GAAKtD,GAAUc,EAAS,YACxB,GAAIrI,EAASjL,KAAK8J,UAAkCyJ,GAAe7C,GAAsB,CAAEjE,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,iDACpH,CACD,MAAMG,EG/RiB,GAAExJ,SAAAA,EAAU1C,MAAAA,kCACvCd,GAAI,aACJvR,KAAM,aACNwR,KAAMa,EAAMb,MACTuD,IACHtD,WAAY,CACRtE,IAAK,GAETyE,UAAW,CACPxC,MAAO,CAAEyC,kBAAmB,IAC5BnC,KAAM,CAAEmC,kBAAmB,OHqRd2M,CAAgB,CAAEzJ,SAAAA,EAAU1C,MAAAA,IACzCkB,EAASnZ,OAAO8jB,EAAiB,GACjC3K,EAASha,QAAQglB,SACX7kB,QAAQyO,IAAI,CACd0T,GAAexD,kCACRtD,IACHxB,SAAU,IACHA,MAGXsI,GAAe5D,GAAyBuC,GAAwBnH,GAAOhB,EAAMb,OAC7EqK,GAAelE,GAAcyD,MAC7BS,GAAe9C,GAAuB,CAAEhE,SAAAA,EAAU1C,MAAOkM,MAG7D1C,GAAexB,GAAyB,CAAE7I,KAAAA,eAlBEqK,GAAe7C,GAAsB,CAAEjE,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,4BAA4BxC,EAAQ/I,OAAO7S,oBAFhH6b,GAAe7C,GAAsB,CAAEjE,SAAAA,EAAU1C,MAAAA,EAAO+L,OAAQ,4BAA4B/L,EAAMb,YAwBjJ,MAAMiN,GAAc1pB,GACT4B,OAAOkY,SAAS9Z,EAAEyR,WAAY,IAEnCoQ,GAAa/J,IACf,MAAMiB,IAAEA,EAAGD,IAAEA,GAAQhB,EAAKoB,WAE1B,OAAOoF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SACtB3N,QAFanD,GAAmBA,EAAQ+O,QAASkN,MAAAA,UAAAA,GAAerM,MAAMrS,QAGtEsI,KAAKoK,KAGd,IAAIgM,GA2EAC,GA1EJpD,GAAatP,GAAGqM,IAAkBtQ,MAAM1H,IAMpC,SAASse,EAAU/D,GAIf,gBPpUoBvO,EAAaqK,EAAYjc,EAAakc,EAAiCvK,GACjG,OAAOqK,GAAapK,EAAOqK,EAAMjc,EAAKkc,EAAWvK,GAAO6K,KAAKrhB,OAAS,EOmUzDgpB,CAHO,IAAI9Q,GAAS0Q,GAAWne,EAAKgM,MAAMwB,KAAM2Q,GAAWne,EAAKgM,MAAMuB,MAAM8N,SACvE,IAAI5N,GAAS0Q,GAAW5D,EAAQ9F,SAASjH,KAAM2Q,GAAW5D,EAAQ9F,SAASlH,MAAM8N,SAE9DX,GAAapE,GAAWtW,EAAK+R,MAAMqL,SAASC,QAT3EgB,UACM9C,GAAezC,IAEpBkC,GAAShb,EAAK+R,SASnBqM,kCACOpe,IACHwe,QAASzL,GAAM3Y,IAAI5E,QAAO,CAACipB,EAAKjR,IAC5B,IAAIiR,KAAQjR,EAAIlI,OAAOgZ,GAAWlkB,KAAIskB,GAAQA,EAAMjK,aAClD,YAEJ8G,GAAetD,GAAmBjY,OAE5Cib,GAAatP,GAAGuM,IAAoB,KAChCkG,QAAgBxZ,KAEpBqW,GAAatP,GAAGwM,IAAuBzQ,MAAM1H,YACzC,IAAKoe,GACD,OAGJ,MAAMpS,EAAQ,IAAIyB,GAAS0Q,GAAWC,GAAcpS,MAAMwB,KAAM2Q,GAAWC,GAAcpS,MAAMuB,MAAM8N,SAC/FpP,EAAM,IAAIwB,GAAS0Q,GAAWne,EAAKwN,KAAM2Q,GAAWne,EAAKuN,MAAM8N,SAE/DsD,EAAQvI,GAAapK,EAAOC,EAAKyO,GAAapE,GAAW8H,GAAcrM,MAAMqL,SAASC,QACvFzG,KACL,IAAIgI,EAAY5e,EACZsW,GAAUrK,KACV2S,sBAAY,IAAID,GAAO3J,4BAAOrH,0BAAcyQ,GAAcpS,aAGxDuP,GAAevD,kCAAuBoG,KAAeO,MAAAA,EAAO1S,IAAK2S,QAE3E3D,GAAatP,GAAGyM,IAAa1Q,MAAM1H,YAC/B,IAAKoe,GACD,OAEJ,wBAAKA,GAAcO,4BAAOppB,sBAAU,GAAK,EACrC,OAGJ,MAAMyW,MAAEA,EAAK+F,MAAEA,GAAUqM,GACzB,IAAKpD,GAASjJ,GAAU,OAExB,QADsBnN,IAAlBmN,EAAMhC,SAAuBvJ,QAAQC,MAAM,0BAA2BsL,IACrEgJ,GAAehJ,GAAU,OAC9B,GAAIhE,GAAmBqQ,GAAcpS,MAAOhM,GAExC,YADAub,GAAerD,IAGnBnG,EAAMhC,QAAQsB,SAAW,EACzB,MAAM4B,EAAW,IAAIF,GAAM3Y,IAAI4R,EAAMwB,KAAKxB,EAAMuB,KAAK0F,UACrDF,GAAM3Y,IAAI4R,EAAMwB,KAAKxB,EAAMuB,KAAK0F,SAAW,GAC3CA,EAASxb,SAAS0K,IACVA,EAAQ8O,KAAOc,EAAMd,GACrB8B,GAAM3Y,IAAI4R,EAAMwB,KAAKxB,EAAMuB,KAAK0F,SAAS5b,KAAKpB,+BAAKkM,IAASqL,IAAKxB,EAAMwB,IAAKD,IAAKvB,EAAMuB,OAEvFwF,GAAM3Y,IAAI4F,EAAKwN,KAAKxN,EAAKuN,KAAK0F,SAAS5b,KAAKpB,+BAAKkM,IAASqL,IAAKxN,EAAKwN,IAAKD,IAAKvN,EAAKuN,gBAGrFgO,GAAexD,GAAgB,CAAEvK,IAAKxB,EAAMwB,IAAKD,IAAKvB,EAAMuB,IAAK0F,SAAU,IAAIF,GAAM3Y,IAAI4R,EAAMwB,KAAKxB,EAAMuB,KAAK0F,kBAC/GsI,GAAexD,GAAgB,CAAEvK,IAAKxN,EAAKwN,IAAKD,IAAKvN,EAAKuN,IAAK0F,SAAU,IAAIF,GAAM3Y,IAAI4F,EAAKwN,KAAKxN,EAAKuN,KAAK0F,kBAC3GsI,GAAerD,UACfqD,GAAe/D,GAAW,CAAEzF,MAAAA,EAAO8M,SAAU7e,UAC7Cub,GAAe1D,OAIzBoD,GAAatP,GAAGgN,IAAoBjR,MAAM1H,IACjCgb,GAAShb,EAAK+R,SACfqM,UACM7C,GAAerD,IAEzBmG,kCACOre,IACH+L,MAAO,IAAI0B,GAASzN,EAAKgM,MAAMwB,IAAKxN,EAAKgM,MAAMuB,KAC1C8N,SACAtP,MAAM,GACN3R,KAAI2C,GAAKA,EAAE2Q,aAAaC,eAEjC4N,GAAe3C,GAAkByF,QAErCpD,GAAatP,GAAGkN,IAAenR,MAAM1H,IACjC,IAAKqe,KAAoBrD,GAASqD,GAAgBtM,OAAQ,OAC1D,GAAIhE,GAAmBsQ,GAAgBrS,MAAOhM,GAE1C,YADAub,GAAezC,IAGnB,MAAMtL,IAAEA,EAAGD,IAAEA,GAAQvN,GACf+R,MAAEA,GAAUsM,GACZS,EAAe,IAAI/L,GAAM3Y,IAAIoT,GAAKD,GAAK0F,UACxC3N,QAAOkX,GAAQrK,GAAeqK,IAAUA,EAAqBtL,OAASa,EAAMb,OAC7E6J,GAAehJ,IAAU+M,EAAavpB,OAAS,IAC/Cwc,EAAMhC,QAAQsB,SAAW,QACnBkK,GAAexC,GAAe,CAChC8F,SAAU7e,EACV+e,SAAU,CAAChN,GACXiN,SAAU,IAAIF,MAGtBvD,GAAe5D,GAAyBuC,GAAwBnH,GAAOhB,EAAMb,OAC7EqK,GAAezC,UACTyC,GAAe1D,OAEzBoD,GAAatP,GAAGmN,IAAsB,IAAMuF,QAAkBzZ,IAE9DqW,GAAatP,GAAG6L,IAAW9P,OAASqK,MAAAA,EAAO8M,SAAAA,MACvC,IAAK7D,GAASjJ,GAAU,OACxB,MAAMvE,IAAEA,EAAGD,IAAEA,GAAQsR,EACfI,EAAgB,IAAIlM,GAAM3Y,IAAIoT,GAAKD,GAAK0F,UACzC3N,QAAOkX,GAAQA,EAAKvL,KAAOc,EAAMd,KACtC,IAAK,MAAMiC,SAAEA,EAAQgM,QAAEA,IAAa,CAChC,CAAEhM,SAAUiM,GAAqBD,QAAShG,IAC1C,CAAEhG,SAAUkM,GAAgCF,QAAS/F,IACrD,CAAEjG,SAAUmM,GAA0BH,QAAS9F,KAChD,CACC,MAAMkG,EAAcL,EACf3Z,QAAOkX,GAAQA,EAAK9c,OAASwT,GAAasJ,EAAqBtL,OAASa,EAAMb,OACnF,GAAIoO,EAAY/pB,OAAS,GAAK4c,GAAeJ,GAAQ,CACjD,MAAMwN,EAAyB,CAC3BxN,MAAOuN,EAAY,GACnBE,WAAY,CACRtT,KAAMoT,EAAY,GAAGpO,KACrB1E,GAAIuF,EAAMb,MAEd2N,SAAAA,EACAY,GAAI1N,EACJb,KAAMa,EAAMb,YAEVqK,GAAe2D,EAASK,IAGtChE,GAAe5D,GAAyBuC,GAAwBnH,GAAOhB,EAAMb,aACvEqK,GAAe1D,OAGzB,CAAEqB,GAAcC,GAAoBC,IAAe3hB,SAAQynB,IACvDjE,GAAatP,GAAGuT,GAAS,EAAGL,SAAAA,EAAU3N,KAAAA,EAAMa,MAAAA,MACxC,IAAKiJ,GAAS,CAAE9J,KAAAA,IAAW,OAC3B,MAAM1D,IAAEA,EAAGD,IAAEA,GAAQsR,EACf5L,EAAW,IAAIF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,UACzCF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAW,GAC/BA,EAASxb,SAAS0K,IACVA,EAAQ8O,KAAOc,EAAMd,GACrB8B,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAS5b,KAAK8K,GAElC4Q,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAS5b,KAAKpB,+BAAKkM,IAAS+O,KAAAA,QAGxDqK,GAAe5D,GAAyBuC,GAAwBnH,GAAO7B,IACvEqK,GAAexB,GAAyB,CAAE7I,KAAAA,UAIlD+J,GAAatP,GAAGoN,IAAgB/Y,IAC5Bub,GAAelC,GAAiBrZ,MAGpCib,GAAatP,GAAGqN,IAAkBhZ,IAC9B,IAAKgb,GAAShb,EAAK+e,SAAShN,OAAU,OACtC,MAAM2N,EAAS9O,GAAK5Q,EAAK+e,SAAStP,OAClC8L,GAAetC,GAAsB,CACjC8F,SAAU/e,EAAK+e,SAAShN,MACxBiN,SAAUhf,EAAKgf,SACfU,OAAAA,EACAb,SAAU7e,EAAK6e,cAIvB5D,GAAatP,GAAGsN,IAAuBjZ,IACnC,MAAMgf,SAAEA,EAAQU,OAAEA,EAAMX,SAAEA,GAAa/e,EACjC2f,iCACCZ,IACH3N,sCACO2N,EAAS3N,SACZC,QAAUqO,EAAS,EAAKX,EAAS3N,OAAOC,QAAUqO,EAASX,EAAS3N,OAAOC,YAG7EuO,iCACCZ,IAAU5N,sCACN4N,EAAS5N,SACZC,QAAUqO,EAAS,EAAKV,EAAS5N,OAAOC,QAAUqO,EAASV,EAAS5N,OAAOC,aAI7E7D,IAAEA,EAAGD,IAAEA,GAAQvN,EAAK6e,SACpB5L,EAAW,IAAIF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,UACzCF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAW,GAC/BA,EAASxb,SAAS0K,IACVA,EAAQ8O,KAAO2O,EAAe3O,GAC1B2O,EAAexO,OAAOC,QAAU,GAChC0B,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAS5b,KAAKuoB,GAE/Bzd,EAAQ8O,KAAO0O,EAAe1O,GACjC0O,EAAevO,OAAOC,QAAU,GAChC0B,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAS5b,KAAKsoB,GAGtC5M,GAAM3Y,IAAIoT,GAAKD,GAAK0F,SAAS5b,KAAK8K,MAG1CoZ,GAAexD,GAAgB,CAAEvK,IAAAA,EAAKD,IAAAA,EAAK0F,SAAU,IAAIF,GAAM3Y,IAAIoT,GAAKD,GAAK0F,YAC7EsI,GAAelC,QAAiBzU,GAChC2W,GAAejC,GAAqB,CAChCyF,SAAU,CAACA,GACXC,SAAU,CAACA,GACXY,eAAgB,CAACA,GACjBD,eAAgB,CAACA,GACjBd,SAAU7e,EAAK6e,SACftZ,OAAQma,OIvhBZ1rB,OAAO6qB,SAASgB,KAAK9lB,QAAQ,QAAU,GACvC+lB,GAAYC,GAAS1Z,MAErBrS,OAAO6qB,SAASgB,KAAK9lB,QAAQ,UAAY,GACzC+lB,GAAYC,GAASxZ,OCJlB,MAAMgM,GAAS3M,EAAG;;;;;;;;;;;;;;;;EAkBZoa,GAAWpa,EAAG;;;;GAMdqa,GAAUra,EAAG;;;;;;;;;;;;;;;EAgBbsa,GAAc/d,GAAoByD,EAAG;OAC3CzD;;;;ECnCQge,GAAQ,gBAAiBxhB,IACpC,MAAMyhB,EAAQzhB,EAAG0hB,OAAS,UAAU1hB,EAAG0hB,UAAY,GACnD,OAAOC,CAAI,kBAAkBF,6BAAiCzhB,EAAG4hB;;iBAGlE,CACC3nB,OAAQgN,CAAG;;;;;;;;;;;;;;;;;;;MAoBXsC,SAAU,CACNqY,IAAK,GACLF,OAAQ,MCjCDF,GAAQ,eAAe,IAC3BG,CAAI;;gBAGZ,CACC1nB,OAAQgN,CAAG;;;;;;;;;;;;;;QCNR,MAAM4a,GAAgB5a,CAAG;;;;;;;;;;;;;;;;;;;;;;EAwBnB6a,GAAiB7a,CAAG;;;;;;;;;;ECjB3B8a,GAAU,CAAC/hB,EAAgBgiB,KAC7BhiB,EAAGgK,cAAc,IAAIqB,YAAY2W,KAGtBR,GAAQ,gBAAiBxhB,GAC7BA,EAAGiiB,KAAON,CAAI;mCACU,IAAM3hB,EAAGkiB,cAAgBH,GAAQ/hB,EAAI;;;cAG1DA,EAAGkiB,aAAeP,CAAI,GAAKA,CAAI,mCAAmC,IAAMI,GAAQ/hB,EAAI;;;;;;;;MAQ1F2hB,CAAI,IACT,CACC1nB,OAAQ,CAAC4nB,GAAcC,IACvBvY,SAAU,CACN0Y,MAAM,EACNC,cAAc,KC5BPV,GAAQ,mBAAoBxhB,IACvC,MAAQmiB,SAAUC,EAAWC,QAASC,GAAiBrX,GAASjL,GAAI,GACpE,OAAO2hB,CAAI;+BACgB,IAAMW,GAAa;8BACpBF,cAAsB,IAAME,GAAa;;;;;SCwBxDd,GAAQ,cAAc,EAAEzL,KAAAA,EAAMje,KAAAA,KAClC6pB,CAAI,gBAAgB5L,KAAQje,2BACpC,CACCmC,OAAQ,CA1BEgN,CAAG;;;;;;;;;;;;;EAcJA,CAAG;;;;;;;GAaZsC,SAAU,CACNwM,KAAM,SACNje,KAAM,YC7BC0pB,GAAQ,eAAe,EAAEe,MAAAA,KAC7BZ,CAAI;;;cAGiB,OAAjBY,EAAM9c,QAAiD,IAA9B8c,EAAM9c,OAAOrK,QAAQ,KAAcumB,CAAI,gBAAkBA,CAAI,wCAAwCY;;;OAI1I,CACCtoB,OAAQ,CCfSgN,EAAG;;;;;;;;;;;;;;;;;;;;;;GDgBpBsC,SAAU,CACNgZ,MAAO,UEXAf,GAAQ,aAAa,EAAE5a,OAAAA,KAClC+a,CAAI;;;0BAGkB/a;;;;aAKxB,CACE3M,OChBkBgN,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EDiBrBqC,MAAO,CAAC,CACJ1C,OAAQ,CAAC9O,KAAMJ,YEdhB,MAAMqJ,GAAO,gBAMpB,OAAeygB,GAAQzgB,IAAOf,IAC1B,MAAQzJ,IAAK4rB,EAAU3rB,IAAK6rB,GAAYpX,GAASjL,EAAI,IAErD,OADAwiB,GAAYxiB,EAAI6a,GAAcwH,GACvBV,CAAI,eAAeQ,MAAeniB,EAAGuS,KAAO,SAAW,2DAA2DvS,EAAGuS,sBAEhI,CACItY,OAAQ,CACJ2Z,GACAyN,GACApa,CAAG;;;;;WAOPsC,SAAU,CACNgJ,KAAM,4DCvBP,MAAMxR,GAAO,eAMpB,OAAeygB,GAAQzgB,IAAOf,IAC1B,MAAMmiB,SAAEA,EAAQE,QAAEA,GAAYpX,GAASjL,EAAI,IAE3C,OADAwiB,GAAYxiB,EAAI6a,GAAcwH,GACvBV,CAAI,eAAeQ,MAAeniB,EAAGuS,KAAO,SAAW,0DAA0DvS,EAAGuS,sBAE/H,CACItY,OAAQ,CACJ2Z,GACAyN,GACApa,CAAG;;;;;WAOPsC,SAAU,CACNgJ,KAAM,4DCrBCiP,GAAQ,iBAAkBxhB,UACrC,OAAO2hB,CAAI,aAAG3hB,EAAG8Q,4BAAOrV,KAAI0W,GAAQwP,CAAI;;qBAEvB,IAAM3hB,EAAGgK,cAAc,IAAIqB,YAAY,SAAU,CAAEC,OAAQ6G;kBAC9DA,EAAKpR;;qBAEFoR,EAAKpR;sBACJoR,EAAKpR;sBACLoR,EAAKpR,mBAAmBoR,EAAKnB;mEACgBmB,EAAKC,MAAM3W,KAAI,IAAM,QAAOoL,KAAK;;kBAElFsL,EAAKC,MAAM3W,KAAIgnB,GAAQd,CAAI,qBAAqBc,EAAKpd;;;kBAKnE,CACIpL,OAAQgN,CAAG;;;;;;;;;;;;;;;;;;;;;;;;ACpBnB,MAAM7R,GAAqB;;;;;;ACAxB,MAAMQ,WDAkH,MAAQK,YAAYb,IAAI+M,WAAW,OAAOjM,KAAK+L,KAAKE,KAAKlM,KAAKb,EAAEQ,EAAEwB,GAAGlB,KAAKwsB,KAAKttB,EAAEc,KAAK+L,KAAKrM,EAAEM,KAAKysB,KAAKvrB,EAAEnB,KAAKb,EAAEQ,GAAG,OAAOM,KAAK8G,OAAO5H,EAAEQ,GAAGK,OAAOb,EAAEQ,GAAG,OAAOM,KAAKsO,UAAU5O,KCAnRK,YAAYmB,GAAG,GAAGiB,MAAMjB,GAAGlB,KAAK0sB,GAAGxtB,EAAEgC,EAAEU,OAAO9B,GAAQ,MAAMI,MAAMF,KAAK2E,YAAYgoB,cAAc,yCAAyC5sB,OAAOU,GAAG,GAAGA,IAAIvB,GAAG,MAAMuB,EAAE,OAAOT,KAAK4sB,QAAG,EAAO5sB,KAAK0sB,GAAGjsB,EAAE,GAAGA,IAAIS,EAAE,OAAOT,EAAE,GAAG,iBAAiBA,EAAE,MAAMP,MAAMF,KAAK2E,YAAYgoB,cAAc,qCAAqC,GAAGlsB,IAAIT,KAAK0sB,GAAG,OAAO1sB,KAAK4sB,GAAG5sB,KAAK0sB,GAAGjsB,EAAE,MAAMX,EAAE,CAACW,GAAG,OAAOX,EAAE+sB,IAAI/sB,EAAEE,KAAK4sB,GAAG,CAACnkB,WAAWzI,KAAK2E,YAAYmoB,WAAWpkB,QAAQ5I,EAAE6I,OAAO,KAAKjJ,GAAEitB,cAAc,aAAajtB,GAAEotB,WAAW,EAAE,MAAMtsB,GDA7btB,CAAAA,GAAG,IAAIQ,MAAM8L,gBAAgBtM,EAAEyJ,OAAOjJ,ICAyZE,CAAEF,ICWlhBmT,eAAeka,GAAUC,GACrB,IAAK,MAAMnB,KAAWmB,QACZnB,IAId,MAAMoB,GAAsB,CAAC5Q,EAAY2Q,aACrC,MAAO,cACCA,EAASE,oBAAQ,gBACjBF,EAAS3Q,kBAAS,KAI9BiP,GAAQ,cAAexhB,IACnB,MAAQmiB,SAAUkB,EAAYhB,QAASiB,GACjCrY,GAA4CjL,OAAIiG,IAC9Ckc,SAAUoB,EAAgBlB,QAASmB,GACrCvY,GAA2BjL,OAAIiG,GAsBrC,OApBAuc,GAAYxiB,EACRoZ,IACC5Z,GAAMQ,EAAG6O,IAAItH,cAAe/H,MAAAA,SAAAA,EAAGqP,IAAItH,aAAcvH,EAAG4O,IAAIrH,cAAe/H,MAAAA,SAAAA,EAAGoP,IAAIrH,aAC/E+b,GAEJd,GAAYxiB,EACR6a,GACA2I,GAGAH,KACAJ,GAAUE,GAAoBI,IAAmBvjB,EAAGkjB,WAC/CnY,MAAK,IAAM6R,GAAehE,GAAc,CAAEiF,KAAM,UAAWhP,IAAK7O,EAAG6O,IAAKD,IAAK5O,EAAG4O,QAEzFhC,GAAQ5M,GAAI,KACRA,EAAG+D,iBAAiB,SAASgF,UACzBka,GAAUE,GAAoBI,IAAmBvjB,EAAGkjB,iBAIrDvB,CAAI,kBACZ,CACCpY,SAAU,CACNsF,IAAK,EACLD,IAAK,EACLsU,SAAU,MAIlB1B,GAAQ,+BAA+B,IAC5BG,CAAI,iBAEf,CACI1nB,OAAQgN,CAAG;;;;;;QASR,MAAMwc,GAAgB,CAACnP,EAA+BzF,EAAaD,KACtE,MAAMsU,EAA2D,GAC3D9E,EAAS9J,MAAAA,SAAAA,EAAU7Y,KAAK+H,gBAC1B,MAAMkgB,EAAQpsB,OAAOkP,uCAAaqN,GAAc8P,IAAUnV,MAAK,EAAEjQ,EAAG8G,KAAWA,EAAMtE,OAASyC,EAAQzC,OAGhG6iB,EAFUtsB,OAAOkP,uCAAahD,IAASzC,UAAMkF,KAC9CU,QAAO,EAAEpI,EAAGM,UAAuBoH,IAAXpH,IAExBpD,KAAI,EAAEgL,EAAKpB,KAAW,GAAGoB,MAAQpB,OACjCwB,KAAK,KACJ0L,YAAO/O,EAAQ+O,oBAAQ,OAG7B,OAFA2Q,EAAS3Q,aAAQ2Q,EAAS3Q,kBAAS,GACnC2Q,EAAS3Q,GAAM7Z,MAAK,WAAM,OAAAkkB,GAAehE,GAAc,CAAEiF,eAAM6F,MAAAA,SAAAA,EAAQ,GAAG3iB,oBAAQ,GAAI8N,IAAAA,EAAKD,IAAAA,EAAKkP,yBAAata,QACtGme,CAAI,GAAGkC,GAAW,cAAIH,MAAAA,SAAAA,EAAQ,GAAG3iB,oBAAQ,UAAW6iB,iBAAgBF,MAAAA,SAAAA,EAAQ,GAAG3iB,oBAAQ,gBAElG,OAAO4gB,CAAI,yBAAyBuB,UAAiBtU,WAAaC,MAAQuP,kBChF/DoD,GAAQ,gBAAgB,EAAEmC,OAAAA,EAAQ9U,IAAAA,EAAKD,IAAAA,KAC3C+S,CAAI,uBAAsBgC,MAAAA,SAAAA,EAAQlR,OAAOC,SAAU,EAAI,OAAS;cAC7D+Q,GAAcE,EAAS,CAACA,GAAU,GAAI9U,EAAKD;;;;mCAItB+U,MAAAA,SAAAA,EAAQlR,OAAOC,UAAUiR,MAAAA,SAAAA,EAAQlR,OAAO3E,KAAO;iBACjE6V,MAAAA,SAAAA,EAAQlR,OAAOC,eAAeiR,MAAAA,SAAAA,EAAQlR,OAAO3E;iBAE3D,CACC7T,OAAQ,CACJgN,CAAG;;;;;;;;;;;;;;;;;;;;WAsBPqC,MAAO,CAAC,CACJqa,OAAQ,CAAE7rB,KAAMR,QAChBuX,IAAK,CAAC/W,KAAMJ,QACZkX,IAAK,CAAC9W,KAAMJ,YC/Cb,MCGMosB,GAAc7c,EAAG;;;;;;;;;WDHD;;;;;;;;GCsBhB8c,GAAqB9c,EAAG;;;;;;;;;;;;;;;;;ECH/B+c,GAAc,CAACpI,EAAuBqI,EAAoCC,IACrE,YCfiBtI,EAAuBva,aAC/C,OAAKA,EAID+N,GAAmB/N,EAAKgM,MAAOuO,GAAiB,eAChDva,EAAKiM,0BAASjM,EAAK2e,4BAAOppB,sBAAU,GAAK,GAAMwY,GAAmB/N,EAAKiM,IAAKsO,GAAiB,qBAC7Fva,EAAKiM,KAAO8B,GAAmB/N,EAAKiM,IAAKsO,GAAiB,aAC1Dva,EAAK2e,OAAS3e,EAAK2e,MAAM3W,MAAK8a,GAAS/U,GAAmB+U,EAAOvI,KAAkB,0BAClFva,EAAKwe,8BAASxW,MAAK8a,GAAS/U,GAAmB+U,EAAOvI,MACpD,WADsE,uBAPlE,GDaDwI,CAAqBxI,EAASqI,eEfhBrI,EAAuBva,GAC/C,OAAKA,EAID+N,GAAmB/N,EAAKgM,MAAOuO,GAAiB,eAChDva,EAAKiM,KAAO8B,GAAmB/N,EAAKiM,IAAKsO,GAAiB,aAC1Dva,EAAK+L,OAAS/L,EAAK+L,MAAM/D,MAAK8a,GAAS/U,GAAmB+U,EAAOvI,KAAkB,eAChF,WANI,GFa0CyI,CAAmBzI,EAASsI,KAE/EI,GAAQ,CAAC1I,EAAuBqI,EAAoCC,KAClED,GAAYA,EAAS3W,KAAO8B,GAAmB6U,EAAS3W,IAAKsO,YCL/CA,EAAuBva,GACpCA,GAILub,GAAenD,GAAamC,GDCxB2I,CAAe3I,EAASqI,GACjBC,YETOtI,EAAuBva,GACpCA,GAILub,GAAe1C,GAAe0B,GFK1B4I,CAAa5I,EAASsI,IAIf1C,GAAQ,mBAAoBxhB,cACvC4M,GAAQ5M,GAAI,KACVA,EAAG+D,iBAAiB,SAAS,IAAM6Y,GAAehE,GAAc,CAACiF,KAAM,UAAWhP,IAAK7O,EAAG6O,IAAKD,IAAK5O,EAAG4O,WAGzG,MAAMC,IAACA,EAAGD,IAAEA,GAAO5O,GACXzJ,IAAKkuB,EAAajuB,IAAKkuB,GAAgBzZ,GAAgCjL,EAAI,CAACsU,SAAUtU,EAAGsU,SAAUzF,IAAAA,EAAKD,IAAAA,KACxGrY,IAAKouB,EAAiBnuB,IAAKouB,GAAoB3Z,GAAmCjL,OAAIiG,IACtF1P,IAAKsuB,EAAeruB,IAAKsuB,GAAkB7Z,GAAqCjL,OAAIiG,GAC5Fuc,GAAYxiB,EAAIoZ,IAAiBliB,IAAOA,MAAAA,SAAAA,EAAG2X,IAAItH,cAAesH,EAAItH,aAAcrQ,MAAAA,SAAAA,EAAG0X,IAAIrH,cAAeqH,EAAIrH,YAAamd,GACvHlC,GAAYxiB,EAAIsZ,GAAmBsL,GACnCpC,GAAYxiB,EAAIia,GAAkB6K,GAClCtC,GAAYxiB,EAAIyZ,IAAa,IAAMmL,OAAgB3e,KACnDuc,GAAYxiB,EAAIuZ,IAAoB,IAAMqL,OAAgB3e,KAC1Duc,GAAYxiB,EAAIma,IAAsB,IAAM2K,OAAc7e,KAE1D,MAAMjJ,EAASynB,IAEf,OAAO9C,CAAI;uBACQqC,GAAYhkB,EAAI2kB,IAAmBE;mBACvC,KAAYF,KAAoB/H,GAAepD,GAAuB,CAAC3K,IAAAA,EAAKD,IAAAA;eAChF,KAAO0V,GAAMtkB,EAAI2kB,IAAmBE,KAAkBnpB,SAASsO,cAAc,IAAIqB,YAAY,cAAe,CAAEC,OAAQ,CAAEyZ,MAAO;sDAClG/kB,EAAGglB,iCAAYlQ,6CAAmC9U,EAAGglB,iCAAYrZ,iBAAO3L,EAAGglB,iCAAYnlB;QAC3H4jB,GAAczmB,EAAOsX,SAAUtU,EAAG6O,IAAK7O,EAAG4O,eAC/C,CACC3U,OAAQ,CAAC6pB,GAAYC,IACrBxa,SAAU,CACNyb,gBAAY/e,EACZqO,SAAU,GACV1F,IAAK,EACLC,IAAK,KGtDE2S,GAAQ,aAAcxhB,UACjC,MAAQzJ,IAAK0uB,EAAUzuB,IAAK0uB,GAAaja,GAA4BjL,OAAIiG,GAGzE,OAFAuc,GAAYxiB,EAAIuV,GAAa2P,GAEtBvD,CAAI,6BACPsD,0BAAYxpB,IAAIA,KAAI,CAACsY,EAAMlF,IACvB8S,CAAI,mBAAmB9S,EAAM,GAAM,EAAI,OAAS,0BLZ/B,IKYyEkF,EAAKnd;kBACzFmd,EAAKtY,KAAI,CAACskB,EAAMnR,IACd+S,CAAI;sCACc5B,EAAKpD,QAAQ/I;qCACdmM,EAAKzL;+BACXzF,WAAaD;;;0BAMzC,CACC3U,OAAQgN,CAAG;;;;;;;;;;;;;SCpBR,MAAMlG,GAAO,gBAMpB,OAAeygB,GAAQzgB,IAAM,EAAGwR,KAAAA,KACrBoP,CAAI,+DAA+DpP,MAAAA,EAAAA,EAAQ,uBAEtF,CACItY,OAAQ,CACJ2Z,GACA3M,CAAG;;;;;WAOPsC,SAAU,CACNgJ,UAAMtM,2DClBP,MAAMlF,GAAO,wBAMpB,OAAeygB,GAAQzgB,IAAOf,IAC1B,MAAMzJ,IAAEA,EAAGC,IAAEA,GAAQyU,GAASjL,EAAI,IAElC,OADAwiB,GAAYxiB,EAAI6a,GAAcrkB,GACvBmrB,CAAI,eAAeprB,MAAUyJ,EAAGuS,KAAO,SAAW,iEAAiEvS,EAAGuS,sBAEjI,CACItY,OAAQ,CACJ2Z,GACAyN,GACApa,CAAG;;;;WAMPsC,SAAU,CACNgJ,KAAM,GACN1D,SAAK5I,EACL2I,SAAK3I,2DCxBN,MAAMlF,GAAO,mBAMpB,OAAeygB,GAAQzgB,IAAOf,IAC1B,MAAMzJ,IAAEA,EAAGC,IAAEA,GAAQyU,GAASjL,EAAI,IAElC,OADAwiB,GAAYxiB,EAAI6a,GAAcrkB,GACvBmrB,CAAI,eAAeprB,MAAUyJ,EAAGuS,KAAO,SAAW,gFAAgFvS,EAAGuS,0EAEhJ,CACItY,OAAQ,CACJ2Z,GACAyN,GACApa,CAAG;;;;WAMPsC,SAAU,CACNgJ,KAAM,GACN1D,SAAK5I,EACL2I,SAAK3I,2DCxBN,MAAMlF,GAAO,aAMpB,OAAeygB,GAAQzgB,IAAOf,IAC1B,MAAMzJ,IAAEA,EAAGC,IAAEA,GAAQyU,GAASjL,EAAI,IAElC,OADAwiB,GAAYxiB,EAAI6a,GAAcrkB,GACvBmrB,CAAI,eAAeprB,MAAUyJ,EAAGuS,KAAO,SAAW,0EAA0EvS,EAAGuS,0EAE1I,CACItY,OAAQ,CACJ2Z,GACAyN,GACApa,CAAG;;;;WAMPsC,SAAU,CACNgJ,KAAM,GACN1D,SAAK5I,EACL2I,SAAK3I,2DC1Bb,MAAM0M,GAAuB,CACzBnC,IAAK,EACLC,KAAM,EACNF,MAAO,EACP+K,KAAM,EACNnL,MAAO,GAGX,OACWgV,MACCC,MACF,mCAAWzS,KAAWxC,MAAO,EAAGmL,KAAM,EAAG/K,MAAO,OACvC,mCAAWoC,KAAW2I,KAAM,IAAK/K,MAAO,IAAKJ,MAAO,SACrD,mCAAWwC,KAAWxC,MAAO,IAAMM,KAAM,IAAMF,MAAO,MCfjE,MAAM8U,GAAiBpe,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;ICElBua,GAAQ,cAAc,EAAG/O,QAASC,QAAAA,EAAS5E,IAAAA,MACtD6T,CAAI,mCAAoCjP,EAAU5E,EAAO,yBCLtD,MAAMwX,GAAYpR,GACdtE,SAASsE,EAAO3M,WAAY,IC0BjCka,GAAQxa,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAwCXse,GAAW,CAAC5S,EAAsBlF,IAC/BkU,CAAI;MACPlU,EAAM+C,IAAM,EACVmR,CAAI;mBACOlU,EAAM+C;mBACNmC,EAAUnC,KAAO/C,EAAM+C,IAAM,SAAW;;;6BAInDmR,CAAI;MACNlU,EAAM8C,MAAQ,EACZoR,CAAI;mBACOlU,EAAM8C;mBACNoC,EAAUpC,OAAS9C,EAAM8C,MAAQ,SAAW;;;6BAIvDoR,CAAI;MACNlU,EAAM6N,KAAO,EACXqG,CAAI;mBACOlU,EAAM6N;mBACN3I,EAAU2I,MAAQ7N,EAAM6N,KAAO,SAAW;;;6BAIrDqG,CAAI;MACNlU,EAAM0C,MAAQ,EACZwR,CAAI;mBACOlU,EAAM0C;mBACNwC,EAAUxC,OAAS1C,EAAM0C,MAAQ,SAAW;;;6BAIvDwR,CAAI;MACNlU,EAAMgD,KAAO,EACXkR,CAAI;mBACOlU,EAAMgD;mBACNkC,EAAUlC,MAAQhD,EAAMgD,KAAO,SAAW;;;6BAIrDkR,CAAI;IAIGH,GACb,kBACCxhB,UACC,MACEwlB,UAAU1H,QACRA,EAAOjP,IACPA,EAAGD,IACHA,IAEA5O,GACEuS,KAAEA,EAAIE,OAAEA,EAAMrB,QAAEA,GAAY0M,EAC5BzQ,EAAQ,CACZwB,IAAKyW,GAASzW,GACdD,IAAK0W,GAAS1W,KAERrY,IAAKkvB,EAAkBjvB,IAAKkvB,GAAqBza,GAEvDjL,OAAIiG,GACNuc,GAAYxiB,EAAI0Y,GAAcgN,GAC9B,MAAM/S,UAAEA,aAAc8S,mBAAuB,CAAE9S,UAAW,IAC1D,OAAOgP,CAAI;;mDAEoCpP;2CACRE;yCACFA,gBAAqBrB;+CACfA,cAAoB0M,iBAAuBzQ;;YAE9EwE,GAAK3B,GAAaU,OAAOC;;;;gCAIL0B;mBACbV,GAAK3B,GAAavW,WAAWyX,QAAQP,MAAMF;mBAC3C5H,eACL6T,GAAe9D,GAAe,CAAEvG,KAAAA,EAAM1D,IAAAA,EAAKD,IAAAA,EAAK2P,OAAQT;;YAE1DyH,GAAS5S,EAAWlF;;;;+BAID8E;mBACZV,GAAK3B,GAAavW,WAAWyX,QAAQP,MAAMH;mBAC3C3H,eACL6T,GAAe7D,GAAc,CAAExG,KAAAA,EAAM1D,IAAAA,EAAKD,IAAAA,EAAK2P,OAAQT;;YAEzDyH,GAAS5S,EAAWlF;;;mBAGboE,GAAK3B,GAAavW,WAAWyX,QAAQP,MAAMJ;;YAElD8U,GAAS5S,EAAWlF;;;mBAGboE,GAAK3B,GAAavW,WAAWyX,QAAQP,MAAMY;uCACvBc;YAC3BgT,GAAS5S,EAAWlF;;;mBAGboE,GAAK3B,GAAavW,WAAWyX,QAAQP,MAAMa;sCACxBa;YAC1BgT,GAAS5S,EAAWlF;;gBAI9B,CACExT,OAAQ,CAACorB,GAAgB5D,IACzBlY,SAAU,CACRic,SAAU,CACR1H,QAAS,CACPxL,GAAI,GACJvR,KAAM6c,GACNrL,KAAM,GACNE,OAAQ,CAAEC,QAAS,EAAG5E,IAAK,GAC3BsD,QAAS,CAAEsB,QAAS,EAAG5E,IAAK,IAG9Bc,IAAK,EACLC,IAAK,MCvJE2S,GAAQ,kBAAmBjjB,IACtC,MAAQinB,UAAU1H,QAAEA,EAAOjP,IAAEA,EAAGD,IAAEA,IAAUrQ,GACtCkU,OAACA,EAAMrB,QAAEA,GAAW0M,EACpBzQ,EAAQ,CACVwB,IAAKyW,GAASzW,GACdD,IAAK0W,GAAS1W,IAElB,OAAO+S,CAAI;UACL9P,GAAK3B,GAAaS;;+CAEmBmN,EAAQvL;2CACZE;yCACFA,gBAAqBrB;4BAClCA,EAAQsB,QAAU,sBAAsBb,GAAK3B,GAAavW,WAAWyX,QAAQC,iBAAiB,IAAMuL,GAAevD,GAAkB,CAAEjG,uBAAY0K,GAAWzQ,MAAAA;+CAC3I+D,cAAoB0M,iBAAuBzQ;4BAC9D+D,EAAQsB,QAAU,yBAAyBb,GAAK3B,GAAavW,WAAWyX,QAAQG;cAGxG,CACItX,OAAQ,CACJorB,GAzCEpe,CAAG;;;;;;;;;;;;;;;;;;;;GA4CTqC,MAAO,CACH,CAAEkc,SAAa,CAAC1tB,KAAMR,YC9ClC,MAAMmqB,GAAQxa,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAmDjBqV,GAAatP,GAAG2M,IAA6B,IAAI7N,IAASjE,QAAQG,IAAI,iCAAkC8D,KACxGwQ,GAAatP,GAAG4M,GAA4B/R,QAAQC,OACpDwU,GAAatP,GAAG0M,IAAsB,IAAI5N,IAASjE,QAAQG,IAAI,0BAA2B8D,KAE3E0V,GAAQ,iBAAkBjjB,IACrC,MAAQinB,UAAU1H,QAAEA,EAAOjP,IAAEA,EAAGD,IAAEA,IAAUrQ,GACtCkU,OAAEA,EAAMrB,QAAEA,GAAY0M,EACtBzQ,EAAQ,CACVwB,IAAKyW,GAASzW,GACdD,IAAK0W,GAAS1W,IAElB,OAAO+S,CAAI;UACL9P,GAAK3B,GAAaQ;;6CAEiBoN,EAAQvL;2CACVE;yCACFA,gBAAqBrB;4BAClCA,EAAQsB,QAAU,uBAAuBb,GAAK3B,GAAavW,WAAWyX,QAAQC,iBAAiB,IAAMuL,GAAevD,GAAkB,CAAEjG,uBAAY0K,GAAWzQ,MAAAA;4BAC/J+D,EAAQsB,QAAU,kCAAkCb,GAAK3B,GAAavW,WAAWyX,QAAQP,MAAMc,6BAA6B,IAAMiL,GAAelD,GAAsB,CAAEtG,uBAAY0K,GAAWhI,SAAUzI;6EACzJyQ,EAAQvL;;4BAEzDnB,EAAQsB,QAAU,4BAA4Bb,GAAK3B,GAAavW,WAAWyX,QAAQP,MAAMe,uBAAuB,IAAMgL,GAAe/C,GAAgB,CAAEzG,uBAAY0K,GAAWhI,SAAUzI;iEACnJyQ,EAAQvL;;4BAE7CnB,EAAQsB,QAAU,uBAAuBb,GAAK3B,GAAavW,WAAWyX,QAAQI;cAGtG,CACIvX,OAAQ,CAACwnB,IACTnY,MAAO,CACH,CAAEkc,SAAY,CAAE1tB,KAAMR,YCtFnBkqB,GAAQ,aAAa,EAAE/O,OAAAA,EAAQrB,QAAAA,KAC1CuQ,CAAI,GAAGkC,GAAWhS,GAAK3B,GAAavW,WAAWwX,KAAMsB,EAAOC,QAASD,EAAO3E;MAC1E+V,GAAWhS,GAAK3B,GAAavW,WAAWyX,QAASA,EAAQsB,QAAStB,EAAQtD,UCApD0T,GAAQ,iBAAiB,EAAEpQ,QAAAA,EAASgC,MAAAA,EAAO0C,SAAAA,KAC5D6L,CAAI,qBAAqBvQ,EAAQsB,QAAU,wBAAwBb,GAAK3B,GAAavW,WAAWyX,QAAQE,mBAAmB,IAAMsL,GAAe5C,GAAoB,CAAE5G,uBAAYA,GAAS/F,MAAOyI;QCK7M,MAAM6P,GAAYniB,KACdsS,SAAUtS,EAAU,IAAIsL,GAAStL,MAAAA,SAAAA,EAASqL,IAAKrL,MAAAA,SAAAA,EAASoL,UAAO3I,EAC/DqO,SAAU9Q,EAAU,CAAC,CAACqa,KAAMra,EAAQqa,KAAMC,QAASta,EAAQsa,UAAY,GACvE8H,OAAO,IAGIpE,GAAQ,oBAAoBzY,MAAQ/I,IAC/C,MAAQzJ,IAAKsvB,EAAoBrvB,IAAKsvB,GAAuB7a,GAA4CjL,OAAIiG,GAC7Guc,GAAYxiB,EAAI4Y,GAAckN,GAC9B,MAAMC,EAAkBF,KAClBtvB,IAACA,EAAGC,IAAEA,GAAOyU,GAAyBjL,EAAI2lB,GAASI,IACnDrT,EAAUnc,IAiBhB,OAhBKmc,EAAQkT,OAASG,GAAmB,IAAIjX,GAASiX,EAAgBlX,IAAKkX,EAAgBnX,KAAKH,OAAOiE,EAAQoD,UAC3Gtf,iCACOkc,IACH4B,SAAU,IAAI5B,EAAQ4B,SAAU,CAACuJ,KAAMkI,EAAgBlI,KAAMC,QAASiI,EAAgBjI,UACtF8H,MAAgC,YAAzBG,EAAgBlI,QAG3BrnB,EAAImvB,GAASI,IAGjBnZ,GAAQ5M,GAAI,KACRsM,YAAW,KACPsQ,GAAelH,MAChB,MAGAiM,CAAI;UACLprB,IAAM+d,SAAS7Y,KAAI+H,oBACjB,OAAQA,EAAQqa,MACZ,KAAKD,GACD,OAAO+D,CAAI;qCACM,CAAC9S,cAAKtY,IAAMuf,+BAAUjH,IAAKD,cAAKrY,IAAMuf,+BAAUlH,IAAKkP,QAASta,EAAQsa;uCAE3F,KAAKU,GACD,OAAOmD,CAAI;qCACM,CAAC9S,cAAKtY,IAAMuf,+BAAUjH,IAAKD,cAAKrY,IAAMuf,+BAAUlH,IAAKkP,QAASta,EAAQsa;uCAE3F,KAAKc,GACD,OAAO+C,CAAI;qCACM,CAAC9S,cAAKtY,IAAMuf,+BAAUjH,IAAKD,cAAKrY,IAAMuf,+BAAUlH,IAAKkP,QAASta,EAAQsa;sCAE3F,QACI,KAAKF,GACL,OAAO+D,CAAI;QAI5B,CACC1nB,OAAQgN,CAAG;;;;;;;;SC5DAua,GAAQ,gBAAiBxhB,YACpC,MAAMzJ,IAAEA,EAAGC,IAAEA,GAAQyU,GAAsCjL,OAAIiG,IACvD1P,IAAKyvB,EAAiBxvB,IAAKyvB,GAAoBhb,GAA2BjL,OAAIiG,GAEtF,OADAuc,GAAYxiB,EAAI0a,GAAiBlkB,GAC1BmrB,CAAI;;kBAECprB;;;;oBAINA,0BAAO6pB,SAAS3kB,KAAI8C,IAClB,MAAMolB,EAASplB,EACf,OAAOojB,CAAI;;;sCAGegC;mCACHptB,IAAO2pB,SAASrR;mCAChBtY,IAAO2pB,SAAStR;;;;qDAIE+U,EAAO7S,mBAAoBqB,GAA4B8T,EAAgB9T,EAAK7G;;;iCAKtH/U,0BAAO8pB,SAAS5kB,KAAI8C,GAEZojB,CAAI;;;sCADIpjB;mCAKQhI,IAAO2pB,SAASrR;mCAChBtY,IAAO2pB,SAAStR;;;;;;8BAQrB,aAAM,OAAAgO,GAAevC,GAAiB,CACpD+F,SAAU,CACNhN,gBAAO7c,0BAAO6pB,SAAS,GACvBtP,MAAO,CAACkV,MAEZ3F,mBAAU9pB,0BAAO8pB,SAAS,GAC1BH,SAAU,CAACrR,IAAKtY,IAAO2pB,SAASrR,IAAKD,IAAKrY,IAAO2pB,SAAStR,4BACtB3I,IAAtB+f;;uBAG3B,CACC/rB,OAAQ,CACJgN,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;aCxDIua,GAAQ,qBAAsBxhB,IACzC,MAAMzJ,IAAEA,EAAGC,IAAEA,GAAQyU,GAA0CjL,OAAIiG,GAC7Dma,EAAWnV,GAAwBjL,EAAI,IACvCqgB,EAAWpV,GAAwBjL,EAAI,IAC7C,IAAIkmB,EAAU5Z,YAAW,QAAiB,GAW1C,OAVAkW,GAAYxiB,EAAI2a,IAAsBtZ,IAClC7K,EAAI6K,GACJ+e,EAAS5pB,IAAI6K,EAAK+e,UAClBC,EAAS7pB,IAAI6K,EAAKgf,UAClB8F,aAAaD,GACbA,EAAU5Z,YAAW,KACjB8T,EAAS5pB,IAAI6K,EAAK2f,gBAClBX,EAAS7pB,IAAI6K,EAAK4f,kBACnB,QAEAU,CAAI;;kBAECprB;iBACC,IAAMC,OAAIyP;;;UAGjBma,EAAS7pB,MAAMkF,KAAI8C,gBAEjB,OAAOojB,CAAI;;;sCADIpjB;uDAKQhI,0BAAO2pB,SAASrR,mBAAO;uDACvBtY,0BAAO2pB,SAAStR,mBAAO;;;uBAK/CyR,EAAS9pB,MAAMkF,KAAI8C,gBAElB,OAAOojB,CAAI;;;sCADIpjB;uDAKQhI,0BAAO2pB,SAASrR,mBAAO;uDACvBtY,0BAAO2pB,SAAStR,mBAAO;;;;UAMhDrY,IAAQorB,CAAI,mCAAmCprB,IAAOqQ,uBAAyB+a,CAAI;;;;;uBAM1F,CACC1nB,OAAQ,CACJgN,CAAG;;;;;;;;;;;;;;;;;;;aCvDIua,GAAQ,oBAAqBxhB,kBACxC,MAAMzJ,IAAEA,EAAGC,IAAEA,GAAQyU,GAAiCjL,OAAIiG,GAE1D,OADAuc,GAAYxiB,EAAIua,GAAc/jB,GACvBmrB,CAAI;;mBAEEprB;kBACC,IAAMC,OAAIyP;;;;;wCAKE1P,0BAAOuqB;sCACTvqB,0BAAO2pB,SAASrR;sCAChBtY,0BAAO2pB,SAAStR;;;;kDAIJrY,0BAAOsqB,WAAWhT;kDAClBtX,0BAAOsqB,WAAWtT;;;;;wBAMvD,CACCtT,OAAQgN,CAAG;;;;;;;;;;;;;;;;;;;;;;;QCzBAua,GAAQ,uBAAwBxhB,IAC3C,MAAMmiB,SAAEA,EAAQE,QAAEA,GAAYpX,GAA8BjL,OAAIiG,GAEhE,OADAuc,GAAYxiB,EAAImZ,GAAqBkJ,GAC9BV,CAAI;;kBAECQ;;;;;;;8BAOc,KAAOvF,GAAe9B,IAAqBuH,GAAQ;8BACnD,IAAMA,GAAQ;;uBAGzC,CACCpoB,OAAQ,CACJgN,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;aCfIua,GAAQ,cAAc,IAC1BG,CAAI;;;;6CCAAH,GAAQ,kBAAmBxhB,IACtC,MAAOzJ,IAAK6vB,EAAS5vB,IAAK6vB,GAAWpb,GAA2BjL,OAAIiG,IAC7D1P,IAAK+vB,EAAW9vB,IAAK+vB,GAAatb,GAAkBjL,EAAI,IAG/D,OAFAwiB,GAAYxiB,EAAI6a,GAAcwL,GAC9B7D,GAAYxiB,EAAIgZ,GAAyBuN,GAClC5E,CAAI,kBAAkByE;;U3BgFA,EAAC9R,EAA+BkS,EAAuB,MACpF,MAAMpI,EAAS9J,MAAAA,SAAAA,EAAU7Y,KAAK+H,YAC1B,MAAMkgB,EAAQpsB,OAAOkP,uCAAaqN,GAAc8P,IAAUnV,MAAK,EAAEjQ,EAAG8G,KAAWA,EAAMtE,OAASyC,EAAQzC,OAGhG6iB,EAFUtsB,OAAOkP,uCAAahD,IAASzC,UAAMkF,KAC9CU,QAAO,EAAEpI,EAAGM,UAAuBoH,IAAXpH,IAExBpD,KAAI,EAAEgL,EAAKpB,KAAW,GAAGoB,MAAQpB,OACjCwB,KAAK,KACJiP,EAAWzC,GAAkB7P,GAAW,CAAEqL,IAAKrL,EAAQqL,IAAKD,IAAKpL,EAAQoL,KAAQ,CAAEC,IAAK,EAAGD,IAAK,GAgBtG,OAAO+S,CAAI;sBAfK,KACZ/E,GAAejE,gCACXkF,KAAMra,EAAQzC,MACX+U,IACHgI,QAASta,KAEb8I,YAAW,qBACPmP,GAAkBjY,mBAAUua,eAAe,CAACC,SAAU,SAAUC,MAAO,SAAUC,OAAQ,aAC1F;0BAES,KACZ5R,YAAW,qBACPmP,GAAkBjY,mBAAUua,eAAe,CAACC,SAAU,SAAUC,MAAO,SAAUC,OAAQ,aAC1F;sEAKuDsI;kBACpD3C,GAAW,cAAIH,MAAAA,SAAAA,EAAQ,GAAG3iB,oBAAQ,UAAW6iB,YAAqB4C,mBAAoB9C,MAAAA,SAAAA,EAAQ,GAAG3iB,oBAAQ;mBAGvH,OAAO4gB,CAAI,gCAAgCvD,mC2B7GrCqI,CAAkBH,IACfI,MAAK,CAACvuB,EAAG4G,IAAM5G,EAAE4I,KAAK4lB,cAAc5nB,EAAEgC,QACtC4F,QAAOyM,GAASG,GAAgBH,IAAUA,EAAMhC,QAAQsB,QAAU,IACnE;;;+BAGmB,IAAMkK,GAAe9B;;;;aAKjD,CACC7gB,OAAQ,CACJqnB,GACAC,GAAW,gBACXta,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;UC7BJ,MAAM2f,GAAe3f,CAAG;;;;;;;;;;;;;SCGhBua,GACb,kBACA,IACSG,CAAI,eAAe9P,GAAK3B,GAAgBK,kBAEjD,CACEtW,OAAQ,CACNgN,CAAG;;;;QAKH2f,MCZSpF,GAAQ,kBAAkB,IAChCG,CAAI,eAAe9P,GAAK3B,GAAgBC,kBAC9C,CACClW,OAAQ,CACNgN,CAAG;;;;QAKH2f,MCTSpF,GAAQ,iBAAiB,IAC7BG,CAAI,eAAe9P,GAAK3B,GAAgBO,iBAChD,CACCxW,OAAQ,CACNgN,CAAG;;;;QAKH2f,MCTSpF,GAAQ,iBAAiB,IAC/BG,CAAI,eAAe9P,GAAK3B,GAAgBlI,gBAC9C,CACC/N,OAAQ,CACNgN,CAAG;;;;QAKH2f,MCTSpF,GACb,gBACA,IACSG,CAAI,eAAe9P,GAAK3B,GAAgBM,gBAEjD,CACEvW,OAAQ,CACNgN,CAAG;;;;QAKH2f,MCTSpF,GAAQ,oBAAoB,EAAElX,MAAAA,EAAOkT,QAAAA,KACzCmE,CAAI;;UAELrX,KAASkT,EAAUmE,CAAI,WAAWnE,YAAoB;OAE7D,CACCvjB,OAAQ,CACJgN,CAAG;;;;;;;WASPsC,SAAW,CACPe,MAAO,EACPkT,aAASvX,KCfFub,GAAQ,kBAAmBxhB,wBACtC,MAAOzJ,IAAKgtB,EAAgB/sB,IAAKgtB,GAAkBvY,GAA2BjL,OAAIiG,IAC3E1P,IAAKkvB,EAAkBjvB,IAAKkvB,GAAoBza,GAA6BjL,OAAIiG,IACjF1P,IAAKswB,EAAcrwB,IAAKswB,GAAgB7b,GAA0CjL,OAAIiG,GAC7Fuc,GAAYxiB,EAAI6a,GAAc2I,GAC9BhB,GAAYxiB,EAAI0Y,GAAcgN,GAC9BlD,GAAYxiB,EAAIqb,GAAkByL,GAClC,MAAMnD,YAAS8B,mBAAsB,CAAE9S,UAAW,IAC5CoU,EAAgB,CAACtrB,EAAUiZ,EAAkBsS,KAC/CvrB,EAAIiZ,IAAajZ,EAAIiZ,IAAa,GAAKsS,EAChCvrB,GAQLkX,sBAA+BkU,0BAAgB9J,oBAAoBlmB,QAN/C,CAAC4E,EAAUgiB,aACjC,IAAK,MAAM/I,KAAYxB,GACnBzX,EAAMsrB,EAActrB,EAAKiZ,sBAAW+I,EAAU9K,UAAkB+B,yBAAW9B,iCAAqB,GAEpG,OAAOnX,IAEwF,mBAAO,GAC1G,OAAOkmB,CAAI,kBAAkB4B;mCACE1R,GAAK3B,GAAgBM,gBAAgBmT,EAAOhR,UAAUnC,0BAAgBmC,EAAUnC,mBAAO;;;mCAGvFqB,GAAK3B,GAAgBK,kBAAkBoT,EAAOhR,UAAUpC,4BAAkBoC,EAAUpC,qBAAS;;;mCAG7FsB,GAAK3B,GAAgBC,kBAAkBwT,EAAOhR,UAAUxC,4BAAkBwC,EAAUxC,qBAAS;;;mCAG7F0B,GAAK3B,GAAgBO,iBAAiBkT,EAAOhR,UAAUlC,2BAAiBkC,EAAUlC,oBAAQ;;;mCAG1FoB,GAAK3B,GAAgBlI,gBAAgB2b,EAAOhR,UAAU2I,2BAAiB3I,EAAU2I,oBAAQ;;;iBAIzH,CACCrhB,OAAQgN,EAAG;;;;;;;;;;;;;;oBC9BfvL,SAASggB,cAAc,0BAAS3X,iBAAiB,SAAS,SAAUnO,GAClD,WAAVA,EAAE6Q,KACFmW,GAAepE,IAAO,MAIfgJ,GAAQ,YAAY,KlEqBfzY,QAAQgL,KAAAA,EAAMC,KAAAA,MAC9B,MAAMiT,EAAYtR,GAAc,CAAE5B,KAAAA,EAAMC,KAAAA,IAClC0J,EAAezH,GAAiB,QAAS,CAAElC,KAAAA,EAAMC,KAAAA,IACjDkT,EAAYjR,GAAiB,MAAO,CAAElC,KAAAA,EAAMC,KAAAA,IAC5CvY,EAAM2R,GAAM,EAAG2G,EAAO,GACvBtY,KAAKoT,GACFzB,GAAM,EAAG4G,EAAO,GACXvY,KAAKmT,KACFkH,SAAU,IAAIhH,GAASD,EAAKD,GAC5B+N,QAASrH,KACThB,SAAU,IACF8B,GAAe6Q,EAAWpY,EAAKD,MAC/BwH,GAAesH,EAAc7O,EAAKD,MAClCwH,GAAe8Q,EAAWrY,EAAKD,gBAIjDgO,GAAerH,GAAa,CAAC9Z,IAAAA,EAAKqhB,MAAO,CAAC,MAAO,YkErCvDtL,CAAK,CAAEuC,KAAM,GAAIC,KAAM,KAChB2N,CAAI;;;;;;;;;;QAWZ,CACC1nB,OAAQ,CACJqnB,GACAC,GAAW,aACXA,GAAW,oBACXta,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SCzCX,MACMkgB,GADS9xB,OAAO6qB,SAASkH,OAAOC,UAAU,GACrBxmB,MAAM,KAAKhK,QAAO,CAACywB,EAAOC,KACjD,MAAO9gB,EAAKpB,GAASkiB,EAAK1mB,MAAM,KAEhC,OADAymB,EAAM7gB,GAAOpB,EACNiiB,IACR,IACH5rB,SAASoW,gBAAgBC,KAAOoV,GAAYpV,MAAQ"}