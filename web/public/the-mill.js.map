{"version":3,"file":"the-mill.js","sources":["../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit/node_modules/lit-html/lit-html.js","../node_modules/lit/node_modules/lit-element/lit-element.js","../node_modules/organismus/dist/index.js","../node_modules/pure-lit/lib/index.module.js","../src/arrays/index.ts","../src/math/cube/cube.ts","../src/math/position.ts","../src/math/guid.ts","../src/game/player/buildings/Castles.ts","../src/game/player/load.ts","../src/game/world/types.ts","../src/game/world/buildings.ts","../src/game/world/terrain.ts","../src/game/world/worldLoader.ts","../src/math/pathfinder/heapify.ts","../src/math/pathfinder/a.ts","../src/game/world/events.ts","../src/game/player/dices/index.ts","../src/game/player/knights/Knight.ts","../src/game/world/navigator.ts","../src/browser/Selector.ts","../src/game/player/wagon/Wagon.ts","../src/game/world/world-state.ts","../src/game/player/Assets.ts","../src/game/player/dices/Dices.ts","../src/game/world/index.ts","../src/assets/styles.ts","../src/assets/elements/button/ImageButton.ts","../src/assets/elements/button/Button.ts","../src/assets/elements/modal/modal.styles.ts","../src/assets/elements/modal/modal.ts","../src/assets/elements/modal/modalContainer.ts","../src/assets/elements/text/Text.ts","../src/assets/elements/loading-bar/index.ts","../src/assets/elements/loading-bar/loading-bar.styles.ts","../src/assets/elements/dice/dice.ts","../src/assets/elements/dice/dice.style.ts","../src/assets/player/knight.ts","../src/assets/player/wagon.ts","../src/assets/player/dice/index.ts","../node_modules/lit/node_modules/lit-html/directive.js","../node_modules/lit/node_modules/lit-html/directives/unsafe-html.js","../src/assets/sprites.ts","../src/assets/player/fighter-info.ts","../src/assets/map/consts.ts","../src/assets/map/Hexagon.styles.ts","../src/assets/map/Hexagon.ts","../src/assets/map/Hexagon.movement.ts","../src/assets/map/Hexagon.battle.ts","../src/assets/map/World.ts","../src/assets/buildings/mill.ts","../src/assets/buildings/castle-small.ts","../src/game/player/costs.ts","../src/assets/sidebar/sidebar.style.ts","../src/assets/sidebar/selectedCastle.ts","../src/math/number.ts","../src/assets/sidebar/selectedKnight.ts","../src/assets/sidebar/selectedWagon.ts","../src/assets/sidebar/sidebar.ts","../src/assets/modals/Battle.ts","../src/assets/modals/DiceResult.ts","../src/assets/modals/MillTaken.ts","../src/assets/modals/NoMoreTurns.ts","../src/assets/modals/index.ts","../src/assets/footer/index.ts","../src/assets/resources/base.ts","../src/assets/resources/grain.ts","../src/assets/resources/stone.ts","../src/assets/resources/iron.ts","../src/assets/resources/log.ts","../src/assets/resources/hay.ts","../src/assets/resources/ResourceCounter.ts","../src/assets/header/index.ts","../src/assets/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,e=Symbol(),n=new Map;class s{constructor(t,n){if(this._$cssResult$=!0,n!==e)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t}get styleSheet(){let e=n.get(this.cssText);return t&&void 0===e&&(n.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const o=t=>new s(\"string\"==typeof t?t:t+\"\",e),r=(t,...n)=>{const o=1===t.length?t[0]:n.reduce(((e,n,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(n)+t[s+1]),t[0]);return new s(o,e)},i=(e,n)=>{t?e.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((t=>{const n=document.createElement(\"style\"),s=window.litNonce;void 0!==s&&n.setAttribute(\"nonce\",s),n.textContent=t.cssText,e.appendChild(n)}))},S=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const n of t.cssRules)e+=n.cssText;return o(e)})(t):t;export{s as CSSResult,i as adoptStyles,r as css,S as getCompatibleStyle,t as supportsAdoptingStyleSheets,o as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as i}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var s;const e=window.trustedTypes,r=e?e.emptyScript:\"\",h=window.reactiveElementPolyfillSupport,o={toAttribute(t,i){switch(i){case Boolean:t=t?r:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},n=(t,i)=>i!==t&&(i==i||t==t),l={attribute:!0,type:String,converter:o,reflect:!1,hasChanged:n};class a extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var i;null!==(i=this.l)&&void 0!==i||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Eh(s,i);void 0!==e&&(this._$Eu.set(e,s),t.push(e))})),t}static createProperty(t,i=l){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s=\"symbol\"==typeof t?Symbol():\"__\"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty(\"finalized\"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(t(i))}else void 0!==i&&s.push(t(i));return s}static _$Eh(t,i){const s=i.attribute;return!1===s?void 0:\"string\"==typeof s?s:\"string\"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,s;(null!==(i=this._$Eg)&&void 0!==i?i:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$Eg)||void 0===i||i.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Et.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$ES(t,i,s=l){var e,r;const h=this.constructor._$Eh(t,s);if(void 0!==h&&!0===s.reflect){const n=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o.toAttribute)(i,s.type);this._$Ei=t,null==n?this.removeAttribute(h):this.setAttribute(h,n),this._$Ei=null}}_$AK(t,i){var s,e,r;const h=this.constructor,n=h._$Eu.get(t);if(void 0!==n&&this._$Ei!==n){const t=h.getPropertyOptions(n),l=t.converter,a=null!==(r=null!==(e=null===(s=l)||void 0===s?void 0:s.fromAttribute)&&void 0!==e?e:\"function\"==typeof l?l:null)&&void 0!==r?r:o.fromAttribute;this._$Ei=n,this[n]=a(i,t.type),this._$Ei=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,i)=>this[i]=t)),this._$Et=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$EU()}catch(t){throw i=!1,this._$EU(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$Eg)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$ES(i,this[i],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}a.finalized=!0,a.elementProperties=new Map,a.elementStyles=[],a.shadowRootOptions={mode:\"open\"},null==h||h({ReactiveElement:a}),(null!==(s=globalThis.reactiveElementVersions)&&void 0!==s?s:globalThis.reactiveElementVersions=[]).push(\"1.3.1\");export{a as ReactiveElement,o as defaultConverter,n as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=globalThis.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=`lit$${(Math.random()+\"\").slice(9)}$`,o=\"?\"+e,n=`<${o}>`,l=document,h=(t=\"\")=>l.createComment(t),r=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,d=Array.isArray,u=t=>{var i;return d(t)||\"function\"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])},c=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,a=/>/g,f=/>|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g,_=/'/g,m=/\"/g,g=/^(?:script|style|textarea|title)$/i,p=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),$=p(1),y=p(2),b=Symbol.for(\"lit-noChange\"),w=Symbol.for(\"lit-nothing\"),T=new WeakMap,x=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(h(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l},A=l.createTreeWalker(l,129,null,!1),C=(t,i)=>{const o=t.length-1,l=[];let h,r=2===i?\"<svg>\":\"\",d=c;for(let i=0;i<o;i++){const s=t[i];let o,u,p=-1,$=0;for(;$<s.length&&(d.lastIndex=$,u=d.exec(s),null!==u);)$=d.lastIndex,d===c?\"!--\"===u[1]?d=v:void 0!==u[1]?d=a:void 0!==u[2]?(g.test(u[2])&&(h=RegExp(\"</\"+u[2],\"g\")),d=f):void 0!==u[3]&&(d=f):d===f?\">\"===u[0]?(d=null!=h?h:c,p=-1):void 0===u[1]?p=-2:(p=d.lastIndex-u[2].length,o=u[1],d=void 0===u[3]?f:'\"'===u[3]?m:_):d===m||d===_?d=f:d===v||d===a?d=c:(d=f,h=void 0);const y=d===f&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=d===c?s+n:p>=0?(l.push(o),s.slice(0,p)+\"$lit$\"+s.slice(p)+e+y):s+e+(-2===p?(l.push(void 0),i):y)}const u=r+(t[o]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==s?s.createHTML(u):u,l]};class E{constructor({strings:t,_$litType$:s},n){let l;this.parts=[];let r=0,d=0;const u=t.length-1,c=this.parts,[v,a]=C(t,s);if(this.el=E.createElement(v,n),A.currentNode=this.el.content,2===s){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith(\"$lit$\")||i.startsWith(e)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+\"$lit$\").split(e),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?M:\"?\"===i[1]?H:\"@\"===i[1]?I:S})}else c.push({type:6,index:r})}for(const i of t)l.removeAttribute(i)}if(g.test(l.tagName)){const t=l.textContent.split(e),s=t.length-1;if(s>0){l.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)l.append(t[i],h()),A.nextNode(),c.push({type:2,index:++r});l.append(t[s],h())}}}else if(8===l.nodeType)if(l.data===o)c.push({type:2,index:r});else{let t=-1;for(;-1!==(t=l.data.indexOf(e,t+1));)c.push({type:7,index:r}),t+=e.length-1}r++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function P(t,i,s=t,e){var o,n,l,h;if(i===b)return i;let d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu;const u=r(i)?void 0:i._$litDirective$;return(null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t),d._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P(t,d._$AS(t,i.values),d,e)),i}class V{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l).importNode(s,!0);A.currentNode=o;let n=A.nextNode(),h=0,r=0,d=e[0];for(;void 0!==d;){if(h===d.index){let i;2===d.type?i=new N(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new L(n,this,t)),this.v.push(i),d=e[++r]}h!==(null==d?void 0:d.index)&&(n=A.nextNode(),h++)}return o}m(t){let i=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class N{constructor(t,i,s,e){var o;this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cg=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=P(this,t,i),r(t)?t===w||null==t||\"\"===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==b&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):u(t)?this.S(t):this.$(t)}A(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==w&&r(this._$AH)?this._$AA.nextSibling.data=t:this.k(l.createTextNode(t)),this._$AH=t}T(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=E.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{const t=new V(o,this),i=t.p(this.options);t.m(s),this.k(i),this._$AH=t}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new E(t)),i}S(t){d(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new N(this.A(h()),this.A(h()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class S{constructor(t,i,s,e,o){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=P(this,t,i,0),n=!r(t)||t!==this._$AH&&t!==b,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=P(this,e[s+l],i,l),h===b&&(h=this._$AH[l]),n||(n=!r(h)||h!==this._$AH[l]),h===w?t=w:t!==w&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.C(t)}C(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class M extends S{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===w?void 0:t}}const k=i?i.emptyScript:\"\";class H extends S{constructor(){super(...arguments),this.type=4}C(t){t&&t!==w?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:w)===b)return;const e=this._$AH,o=t===w&&e!==w||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w&&(e===w||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const R={P:\"$lit$\",L:e,V:o,I:1,N:C,R:V,D:u,j:P,H:N,O:S,F:H,B:I,W:M,Z:L},z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t=globalThis.litHtmlVersions)&&void 0!==t?t:globalThis.litHtmlVersions=[]).push(\"2.2.1\");export{R as _$LH,$ as html,b as noChange,w as nothing,x as render,y as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var l,o;const r=t;class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return i}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;null==n||n({LitElement:s});const h={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push(\"3.2.0\");export{s as LitElement,r as UpdatingElement,h as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","const e={};var o;!function(e){e[e.SILENT=0]=\"SILENT\",e[e.ERROR=1]=\"ERROR\",e[e.INFO=80]=\"INFO\",e[e.DEBUG=90]=\"DEBUG\",e[e.TRACE=100]=\"TRACE\"}(o||(o={}));let n=o.SILENT;const r=e=>n=e;let t=[];const s=(e,r,...s)=>{t.forEach(n=>n(o.ERROR,e,r,...s)),n>=o.ERROR&&console.error(r,e,...s)},a=(e,r,...s)=>{if(t.forEach(n=>n(o.INFO,e,r,...s)),n>=o.INFO){(n===o.TRACE?console.trace:console.log)(r,e,...s)}},c=(e,r,...s)=>{if(t.forEach(n=>n(o.DEBUG,e,r,...s)),n>=o.DEBUG){(n===o.TRACE?console.trace:console.log)(r,e,...s)}},i={queue:{},list:{}};function l(e){return e.reduce((e,o)=>`${e};${o.name};`,\"\")}const m=new class{constructor(){this.actionDictionary={}}on(e,o){if(Array.isArray(e)){const n=l(e);if(i.list[n])throw s(\"Hypothalamus.on\",new Error(\"Cannot register the same list of hormones twice\"),n),new Error(\"Cannot register the same list of hormones twice\");a(\"[Hypothalamus.on] Adding new action when all in a list of hormones are released\",n,e),i.list[n]={hormones:[...e],callback:o}}else a(\"Hypothalamus.on\",\"Adding new action when a hormone is released\",e.name),this.actionDictionary[e.name]=this.actionDictionary[e.name]||[],this.actionDictionary[e.name].push(o)}drop(e){Array.isArray(e)?(c(\"Hypothalamus.drop\",\"Dropping a list of hormones\",l(e),e),delete i.queue[l(e)],delete i.list[l(e)]):(c(\"Hypothalamus.drop\",\"Dropping a hormone\",e.name),this.actionDictionary[e.name]=[])}dropAll(){c(\"Hypothalamus.dropAll\",\"Dropping all hormones\"),this.actionDictionary={},i.queue={},i.list={}}collect(e,o,n){const r=`collect;;${e.name};${o.name};`;if(i.list[r])throw s(\"Hypothalamus.collect\",new Error(\"Cannot register the same list of hormones twice\"),r),new Error(\"Cannot register the same list of hormones twice\");a(\"[Hypothalamus.collect] Adding new action when collected hormones are released\",r,e,o),i.list[r]={hormones:[o],callback:n}}orchestrate(e,o){this.actionDictionary[e.name]&&this.actionDictionary[e.name].forEach(e=>e(o));const n=Object.keys(i.queue).filter(o=>o.includes(`;${e.name};`)),r=Object.keys(i.list).filter(o=>o.indexOf(`;${e.name};`)>-1&&n.every(e=>e!==o));r.forEach(e=>{i.queue[e]={hormones:[...i.list[e].hormones],values:{},callback:i.list[e].callback}});const t=[...new Set([...n,...r])];for(let n=0;n<t.length;n++){const r=t[n];if(r.startsWith(\"collect;;\")){const[n]=r.replace(\"collect;;\",\"\").split(\";\");e.name===n?i.queue[r].values[e.name]=[...i.queue[r].values[e.name]||[],o]:(i.queue[r].values[e.name]=o,i.queue[r].callback(i.queue[r].values),delete i.queue[r])}else i.queue[r].hormones=i.queue[r].hormones.filter(o=>o.name!==e.name),i.queue[r].values[e.name]=o,i.queue[r].hormones.length<1&&(i.queue[r].callback(i.queue[r].values),delete i.queue[r])}}};function d(e,o={}){return u(e,Object.assign(Object.assign({},o),{readOnce:!0}))}function h(o,n={}){return f(e)(o,Object.assign(Object.assign({},n),{loadIfExists:!0}))}function u(o,n={}){return f(e)(o,n)}const f=e=>(o,n={})=>{if(e[o]&&!n.loadIfExists)throw s(\"hormone.defineHormone\",new Error(\"Hormone already created\"),o),new Error(\"Hormone already created\");if(e[o]&&n.loadIfExists)return c(\"hormone.defineHormone\",\"Hormone already created, reusing existing\",o),{name:o};const{defaultValue:r,transformation:t,readOnce:a}=n;return e[o]={name:o,value:r,defaultValue:r,transformation:t,receptors:[],readOnce:null!=a&&a},{name:o}};async function p(o,n){return w(e)(o,n)}const w=e=>async(o,n)=>{if(!o)throw s(\"hormone.releaseHormone\",new Error(\"Hormone cannot be undefined\")),new Error(\"Hormone cannot be undefined\");const{name:r}=o;if(!e[r])throw s(\"hormone.releaseHormone\",new Error(\"Hormone does not exist\"),r),new Error(\"Hormone does not exist\");var t;t=n,e[r].value=(void 0===t||t instanceof Function)&&n?n(e[r].value):n,a(\"hormone.releaseHormone\",\"Releasing passed hormone\",r,e[r].value);const{receptors:i,transformation:l}=e[r];l&&l(e[r].value);const d=e[r].value;return m.orchestrate({name:r},d),await Promise.all(i.filter(e=>{const o=void 0===e.onlyIf||e.onlyIf(d);return c(\"hormone.releaseHormone\",o?\"Keeping receptor because condition matched or no condition\":\"Filtered receptor from the triggers because condition not matched\",e),o}).map(e=>(null==e?void 0:e.onTriggered)?null==e?void 0:e.onTriggered(d):d)),e[r].readOnce&&(c(\"hormone.releaseHormone\",\"Resetting hormone because it is readOnce\",r),e[r].value=e[r].defaultValue),Object.assign({},e[r])};function H(o,{name:n},r,t){return g(e)(o,{name:n},r,t)}const g=e=>(r,{name:c},i,l)=>{const m=null!=l?l:i,d=l?i:void 0;if(!e[c])throw s(\"receptor.useReceptor\",new Error(\"Hormone is not defined\"),c),new Error(`Hormone \"${c}\" is not defined`);((e,o,n,r)=>{const t=(null==r?void 0:r.toString())||n;return!e[n].receptors.some(e=>e.parent===o&&e.key===t)})(e,r,c,d)?(a(\"receptor.useReceptor\",\"Pushing new receptor to hormone\",c,{parent:r}),e[c].receptors.push({key:(null==d?void 0:d.toString())||c,parent:r,onlyIf:d,onTriggered:m}),void 0!==e[c].value?m(e[c].value):void 0!==e[c].defaultValue&&m(e[c].defaultValue)):((e,r,...s)=>{t.forEach(n=>n(o.TRACE,e,r,...s)),n===o.TRACE&&console.trace(r,e,...s)})(\"receptor.useReceptor\",\"Receptor not pushed because already subscribed\",c,{parent:r})};function b(){const e={};return{defineHormone:f(e),releaseHormone:w(e),useReceptor:g(e)}}export{o as LOGLEVEL,b as Organismus,u as defineHormone,d as defineSingleHormone,h as getOrDefineHormone,m as hypothalamus,p as releaseHormone,r as setLoglevel,H as useReceptor};\n","import{LitElement as e,html as t}from\"lit\";function n(e,[t,n]){return t.toLowerCase()!==t?e[t]=Object.assign(Object.assign({},n),{attribute:t.replace(/[A-Z]/g,\"-$&\").toLowerCase()}):e[t]=n,e}function o(e){return\"boolean\"==typeof e?{type:Boolean}:Array.isArray(e)?{type:Array}:\"object\"==typeof e?{type:Object}:{}}const r=e=>{return t=e||{},Object.entries(t).reduce(((e,[t,r])=>n(e,[t,o(r)])),{});var t},i=e=>(e=>void 0!==e&&void 0!==e.props)(e)?(e.props||[]).reduce(((e,t)=>(Object.entries(t).forEach((t=>e=n(e,t))),e)),{}):r(null==e?void 0:e.defaults),c={},u=(n,o,r)=>{if(c[n])return c[n];customElements.define(n,class extends e{constructor(){super(),this.content=t``,(e=>void 0!==e&&void 0!==e.defaults)(r)&&Object.entries(r.defaults).forEach((([e,t])=>{this[e]=t}))}static get properties(){return i(r)}static get styles(){return null==r?void 0:r.styles}async performUpdate(){return this.content=await Promise.resolve(o(this)).catch((e=>t`<slot name=\"error\">${e}</slot>`)),super.performUpdate()}render(){return this.content}});const u=document.createElement(n);return c[n]=u,u};var s=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},d={},a={},f={};Object.defineProperty(f,\"t\",{value:!0}),f.shallowClone=void 0,f.shallowClone=function(e){return\"object\"!=typeof e||!e||e instanceof Date||e instanceof RegExp?e:Array.isArray(e)?[...e]:Object.assign({},e)};var l={};function v(e){if(!e.dispatchEvent||!e.requestUpdate)throw new Error(\"Element missing required functions (dispatchEvent/requestUpdate)\");return e}Object.defineProperty(l,\"t\",{value:!0}),l.withWorkflow=l.withReducer=l.withState=l.decorate=l.asUpdateableLitElement=void 0,l.asUpdateableLitElement=v;const b=\"__registered_states\";function y(e){const t=e;if(t[b])return t;const n=v(e),o=n.updated;return t[b]={index:0,count:0,states:[],reducers:[],workflows:[]},n.updated=e=>(t[b].index=0,o(e)),t}l.decorate=y,l.withState=function(e,t,n={}){const o=y(e),{index:r,count:i}=o[b];return r===i?(o[b].index++,o[b].count++,o[b].states.push(t),t):(o[b].index++,n.updateDefault&&o[b].states[r].inject(t.get()),o[b].states[r])},l.withReducer=function(e,t){const n=y(e),{index:o,count:r,reducers:i}=n[b];return o!==r||i[o-1]?n[b].reducers[o-1]:(n[b].reducers[o-1]=t,t)},l.withWorkflow=function(e,t){const n=y(e),{index:o,count:r,workflows:i}=n[b];return o!==r||i[o-1]?n[b].workflows[o-1]:(n[b].workflows[o-1]=t,t)};var p=s&&s.o||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(a,\"t\",{value:!0}),a.useState=void 0;const j=f,O=l;a.useState=(e,t,n={})=>{let o=(0,j.shallowClone)(t);const r=[()=>p(void 0,void 0,void 0,(function*(){return e.requestUpdate(),yield e.updateComplete}))],i=e=>p(void 0,void 0,void 0,(function*(){o!==e&&(o=(0,j.shallowClone)(e),yield Promise.all(r.map((e=>e(o)))))}));return(0,O.withState)(e,new class{set value(e){i(e)}get value(){return o}publish(e){i(e)}set(e){return p(this,void 0,void 0,(function*(){yield i(e)}))}subscribe(e){r.push(e)}inject(e){o=e}get(){return o}getState(){return o}},n)};var m={},g=s&&s.o||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(m,\"t\",{value:!0}),m.useReducer=void 0;const _=a,w=l;m.useReducer=(e,t,n,o={})=>{const{get:r,set:i}=(0,_.useState)(e,n,o),c=[],u=(n,u)=>g(void 0,void 0,void 0,(function*(){const s=t(r());return s[n]&&(yield i(yield s[n](u)),c.forEach((e=>e(n,r()))),o.dispatchEvent&&e.dispatchEvent(new CustomEvent(n,{detail:r()}))),r()}));return(0,w.withReducer)(e,{get:r,subscribe:e=>c.push(e),when:(e,t)=>c.push(((n,o)=>n===e&&t(o))),set:u,dispatch:u})};var h={},E=s&&s.o||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(h,\"t\",{value:!0}),h.useWorkflow=void 0;const x=d,M=l;h.useWorkflow=(e,t)=>{const n=Object.entries(t).reduce(((t,[n,{reducer:o,initialState:r}])=>(t[n]=(0,x.useReducer)(e,o,r),t)),{}),o={},r={},i=[],c=e=>(i.push({type:\"projections\",args:[e]}),n[e]?n[e].get():void 0);return(0,M.withWorkflow)(e,{addActivity:(e,t)=>E(void 0,void 0,void 0,(function*(){var r,c;i.push({type:\"addActivity\",args:[e,t]}),yield Promise.all(null!==(c=null===(r=o[e])||void 0===r?void 0:r.map((e=>e(t))))&&void 0!==c?c:[]);for(const o of Object.values(n))yield o.dispatch(e,t)})),addSideeffect:(e,t)=>{i.push({type:\"addSideeffect\",args:[e,t]}),o[e]=[...o[e]||[],t]},projections:c,addCompensation:(e,t)=>{i.push({type:\"addCompensation\",args:[e,t]}),r[e]=[...r[e]||[],t]},compensate:()=>E(void 0,void 0,void 0,(function*(){i.push({type:\"compensate\",args:[]});for(const[e,t]of Object.entries(r))for(const o of t)for(const t of Object.values(n))yield t.dispatch(e,o)})),after:(e,t,n)=>{i.push({type:\"after\",args:[e,t,n]});const o=()=>E(void 0,void 0,void 0,(function*(){i.some((e=>((e,t)=>{if(e.type!==t.type)return!1;for(let n=0;n<t.args.length;n++)if(e.args[n]!==t.args[n])return!1;return!0})(e,t)))||(new Date(Date.now())>e?yield n():setTimeout(o,100))}));o()},plan:e=>E(void 0,void 0,void 0,(function*(){for(const[n,o]of Object.entries(e))if(t[n]&&JSON.stringify(c(n))===JSON.stringify(t[n].initialState))return yield o();return e[\"\"]?yield e[\"\"]():Promise.resolve(null)})),history:()=>[...i]})},function(e){Object.defineProperty(e,\"t\",{value:!0}),e.useWorkflow=e.useReducer=e.useState=void 0;var t=a;Object.defineProperty(e,\"useState\",{enumerable:!0,get:function(){return t.useState}});var n=m;Object.defineProperty(e,\"useReducer\",{enumerable:!0,get:function(){return n.useReducer}});var o=h;Object.defineProperty(e,\"useWorkflow\",{enumerable:!0,get:function(){return o.useWorkflow}})}(d);var S={},P={},A={};function k(e){if(!e.dispatchEvent||!e.requestUpdate)throw new Error(\"Element missing required functions (dispatchEvent/requestUpdate)\");return e}Object.defineProperty(A,\"t\",{value:!0}),A.withEffect=A.decorate=A.asUpdateableLitElement=void 0,A.asUpdateableLitElement=k;const q=\"__registered_effects\";function C(e){const t=e;if(t[q])return t;const n=k(e),o=n.updated;return t[q]={index:0,count:0,effects:[]},n.updated=e=>(t[q].index=0,o(e)),t}A.decorate=C,A.withEffect=function(e,t){const n=C(e),{index:o,count:r}=n[q];return o===r?(n[q].index++,n[q].count++,n[q].effects.push(t),t):(n[q].index++,n[q].effects[o])},Object.defineProperty(P,\"t\",{value:!0}),P.useOnce=P.useEffect=void 0;const D=A;function R(e,t,n){const o=(0,D.withEffect)(e,{on:t,observe:[\"__initial__dirty\"]});o.observe.some(((e,t)=>n[t]!==e))&&o.on(),o.observe=n}P.useEffect=R;P.useOnce=(e,t)=>R(e,t,[]),function(e){Object.defineProperty(e,\"t\",{value:!0}),e.useOnce=e.useEffect=void 0;var t=P;Object.defineProperty(e,\"useEffect\",{enumerable:!0,get:function(){return t.useEffect}}),Object.defineProperty(e,\"useOnce\",{enumerable:!0,get:function(){return t.useOnce}})}(S);const T=(e,t,n,o)=>e.dispatchEvent(new CustomEvent(t.trim(),Object.assign(Object.assign({},o),{detail:n})));var U=S.useEffect,J=S.useOnce,N=d.useReducer,W=d.useState,$=d.useWorkflow;export{T as dispatch,u as pureLit,U as useEffect,J as useOnce,N as useReducer,W as useState,$ as useWorkflow};\n//# sourceMappingURL=index.module.js.map\n","export function range(start: number, end: number): number[] {\n    return Array.from({ length: end - start + 1 }, (_, i) => i);\n  }\n  ","import { range as r } from \"../../arrays\";\nimport { Position } from \"../position\";\n\nexport class Cube {\n  equals(other: Cube) {\n    return other !== null &&\n      this.x === other.x &&\n      this.y === other.y &&\n      this.z === other.z\n  }\n  add(transpose: Cube) {\n    const { x, y, z } = this;\n    return new Cube(x + transpose.x, y + transpose.y, z + transpose.z);\n  }\n  remove(cube: Cube) {\n    const { x, y, z } = this;\n    return new Cube(x - cube.x, y - cube.y, z - cube.z);\n  }\n  vector(to: Cube) {\n    return new Cube(\n      to.x - this.x,\n      to.y - this.y,\n      to.z - this.z,\n    )\n  }\n\n  distance(other: Cube) {\n    return Math.max(\n      Math.abs(this.x - other.x),\n      Math.abs(this.y - other.y),\n      Math.abs(this.z - other.z)\n    );\n  }\n  heuristic(other: Cube) {\n    return Math.abs(this.x - other.x) +\n      Math.abs(this.y - other.y) +\n      Math.abs(this.z - other.z)\n  }\n\n  range(distance: number) {\n    const results: Cube[] = [];\n    for (let x = -distance; x <= distance; x++) {\n      for (\n        let y = Math.max(-distance, -x - distance);\n        y <= Math.min(distance, -x + distance);\n        y++\n      ) {\n        results.push(this.add(new Cube(x, y, -x - y)));\n      }\n    }\n    return results;\n  }\n\n  direction(direction: number) {\n    return cubeDirections[direction];\n  }\n\n  directionTo(neighbor: Cube): Cube | null {\n    const dir = r(0, 5)\n      .find((dir) => this.neighbor(dir).equals(neighbor))\n    return (dir !== undefined && dir >= 0) ? this.direction(dir) : null;\n  }\n\n  neighbor(direction: number) {\n    return this.add(this.direction(direction));\n  }\n\n  neighbors(map: Cube[]) {\n    return r(0, 5)\n      .map((dir) => this.neighbor(dir))\n      .filter(neighbor => map.some(cube => cube.equals(neighbor)));\n  }\n\n  ring(radius: number) {\n    const results: Cube[] = []\n    const negRadius = radius * -1\n    // var results = []\n    for (const x of r(negRadius, radius)) {\n      for (const y of r(Math.max(negRadius, (x * -1) - negRadius), Math.min(radius, (x * -1) + radius))) {\n        const z = -x - y;\n        results.push(this.add(new Cube(x, y, z)))\n      }\n    }\n    return results\n  }\n\n  cost() {\n    return this.costs;\n  }\n\n  toPosition() {\n    //const col = this.x;\n    //const row = this.z + (this.x + (this.x & 1)) / 2;\n    const col = this.x + (this.z + (this.z & 1)) / 2\n    const row = this.z\n    return new Position(row, col);\n  }\n\n  toCoords() {\n    return this.toPosition().toCoords();\n  }\n\n  toString() {\n    return `${this.x}:${this.y}:${this.z}`\n  }\n\n  constructor(public x: number, public y: number, public z: number, public costs = 1) { }\n}\n\nconst cubeDirections = [\n  new Cube(+1, -1, 0),\n  new Cube(+1, 0, -1),\n  new Cube(0, +1, -1),\n  new Cube(-1, +1, 0),\n  new Cube(-1, 0, +1),\n  new Cube(0, -1, +1),\n];\n","import {Cube} from './cube/cube';\nimport {range as r} from '../arrays';\nimport { SimpleCoords } from '../game';\n\nexport interface Coords {\n  row: number;\n  col: number;\n}\nexport interface FuzzyCoords {\n  row?: number;\n  col?: number;\n}\n\nexport function overlappingCoord(a: Coords, b: FuzzyCoords | null) {\n  if (!b) return false;\n  if (a.col === b.col || !b.col) {\n    if (a.row === b.row) return true;\n  }\n  if (a.row === b.row || !b.row) {\n    if (a.col === b.col) return true;\n  }\n\n  return false;\n}\n\nexport function euclidPointDistance(a: Coords, b: Coords) {\n  return Math.sqrt(Math.pow(b.col - a.col, 2) + Math.pow(b.row - a.row, 2));\n}\n\nexport function manhattanPointDistance(a: Coords, b: Coords) {\n  return Math.abs(Math.abs(a.col - b.col) + Math.abs(a.row - b.row));\n}\n\n\nconst neigboursMaps = {\n  manhattan: [\n    { row: +0, col: -1 },\n    { row: +1, col: +0 },\n    { row: +0, col: +1 },\n    { row: -1, col: +0 },\n  ],\n  euclid: [\n    { row: +1, col: -1 },\n    { row: -1, col: +1 },\n    { row: +1, col: +0 },\n    { row: +0, col: +1 },\n    { row: -1, col: +0 },\n    { row: +0, col: -1 },\n    { row: -1, col: -1 },\n    { row: +1, col: +1 },\n  ]\n}\n\nexport const SimpleCoordsEquals = (a: SimpleCoords, b: SimpleCoords) =>\n  a.col.toString() === b.col.toString() && a.row.toString() === b.row.toString()\n\nexport class Position implements Coords {\n  vector(to: Position) {\n    return new Position(to.row - this.row, to.col - this.col);\n  }\n  toCube() {\n    //const x = this.col;\n    //const z = this.row - (this.col + (this.col & 1)) / 2;\n    //const y = -x - z;\n    const x = this.col - (this.row + (this.row&1)) / 2\n    const z = this.row\n    const y = -x - z;\n    return new Cube(x, y, z);\n  }\n\n  toCoords() {\n    const {row, col} = this;\n    return {col, row};\n  }\n\n  neighbor(direction: number) {\n    const neighbour = p(neigboursMaps[this.system][direction]);\n    neighbour.system = this.system;\n    return this.add(neighbour);\n  }\n\n  neighbors() {\n    return r(0, neigboursMaps[this.system].length - 1).map((dir) => this.neighbor(dir));\n  }\n\n  distance(other: Position) {\n    return euclidPointDistance(this, other);\n  }\n  manhattanDistance(other: Position) {\n    return manhattanPointDistance(this, other);\n  }\n\n  add(transpose: Position) {\n    const {col, row} = this;\n    return new Position(row + transpose.row, col + transpose.col, this.system);\n  }\n  remove(prevPosition: Position) {\n    const {col, row} = this;\n    return new Position(row - prevPosition.row, col - prevPosition.col, this.system);\n  }\n\n  equals(other?: Position | null) {\n    return (other !== undefined && other !== null) && other.col.toString() === this.col.toString() && other.row.toString() === this.row.toString();\n  }\n\n  toString() {\n    return `${this.col}:${this.row}`;\n  }\n\n  toEuclidPosition() {\n    return new Position(this.row, this.col, \"euclid\");\n  }\n  toManhattanPosition() {\n    return new Position(this.row, this.col, \"manhattan\");\n  }\n\n  static fromString(val?: string | null) {\n    if (!val) return null;\n    const [col, row] = val.split(':').map((i) => parseInt(i, 10));\n    return new Position(row, col);\n  }\n\n  constructor(\n    public row: number,\n    public col: number,\n    public system: \"manhattan\" | \"euclid\" = \"manhattan\"\n  ) {}\n}\n\nexport const p = ({row, col}: {row: number; col: number}) =>\n  new Position(row, col);\n\nexport const positionFromAnyPosition = ({\n  row,\n  col,\n}: {\n  row: number;\n  col: number;\n}) => new Position(row, col);\n\n\n","export function generateUUID() { // Public Domain/MIT\n    var d = new Date().getTime();//Timestamp\n    var d2 = (performance && performance.now && (performance.now()*1000)) || 0; //Time in microseconds since page-load or 0 if unsupported\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random() * 16;//random number between 0 and 16\n        if(d > 0){//Use timestamp until depleted\n            r = (d + r)%16 | 0;\n            d = Math.floor(d/16);\n        } else {//Use microseconds since page-load if supported\n            r = (d2 + r)%16 | 0;\n            d2 = Math.floor(d2/16);\n        }\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n}","import { ResourceGeneratingBuilding } from \"../../world\";\nimport { SpriteSet } from \"../../world/sprite\";\n\nexport const SmallCastle: SpriteSet & ResourceGeneratingBuilding = {\n    id: \"building-castle-small\",\n    name: \"Small Castle\",\n    occurences: {\n        min: 1\n    },\n    resources: {\n        grain: {generatedResource: 10},\n        hay: { generatedResource: 10 },\n        stone: { generatedResource: 10 },\n        iron: { generatedResource: 10 },\n    }\n}","import { PlayerAsset } from \"..\";\nimport { generateUUID } from \"../../math/guid\";\nimport { Team } from \"../world\";\nimport { SmallCastle } from \"./buildings/Castles\"\n\ntype Props = {\n    rows: number,\n    cols: number\n}\nconst region: {[key:string]: (array: PlayerAsset[][]) => number} = {\n    \"green\": (array) => \n        Math.max(array.length * 0.75,  Math.round(Math.random() * (array.length - 1))),\n    \"red\": (array) => \n    Math.min(array.length * 0.25, Math.round(Math.random() * (array.length - 1)))\n}\n\nexport const getPlayerStartAssets = (team: Team, props: Props) => {\n    const arrayForBuildings: PlayerAsset[][] = new Array(props.rows * props.cols).map(() => []);\n    ([SmallCastle]).forEach(building => {\n        let buildings =\n            building.occurences.factor\n                ? Math.max(building.occurences.min, arrayForBuildings.length / building.occurences.factor)\n                : building.occurences.min\n        while (buildings > 0) {\n            const nextIndex = region[team](arrayForBuildings)\n            arrayForBuildings[nextIndex] = [\n                ...(arrayForBuildings[nextIndex] ?? []),\n                { name: building.id, team, id: generateUUID(), resources: building.resources }\n            ]\n            buildings--\n        }\n    })\n    return arrayForBuildings;\n}\n\nexport const getPlayerStartResources = () => {\n    return [SmallCastle]\n}","import { Dice } from \"../player/dices/dice\"\n\nexport const teams = (): Team[] => [\"green\", \"red\"]\nexport type Team = \"green\" | \"red\"\n\nexport type Players = {\n    [team in Team]: Player\n}\n\nexport const RESOURCES = [\"hay\", \"grain\", \"iron\", \"wood\", \"stone\"]\n\ntype ResourcesGenerator = {\n    hay?: number\n    grain?: number\n    iron?: number\n    wood?: number\n    stone?: number\n    generatedResource: number\n}\n\nexport type Resources = {\n    hay: number\n    grain: number\n    iron: number\n    wood: number\n    stone: number\n}\n\nexport type ResourceGenerator = {\n    hay?: ResourcesGenerator\n    grain?: ResourcesGenerator\n    iron?: ResourcesGenerator\n    wood?: ResourcesGenerator\n    stone?: ResourcesGenerator\n}\n\nexport type ResourceGeneratingBuilding = {\n    resources: ResourceGenerator\n} & Asset\nexport type PotentiallyResourceGeneratingBuilding = {\n    resources?: ResourceGenerator\n} & Asset\n\nexport function isResourceGeneratingAsset(asset?: Asset): asset is ResourceGeneratingBuilding {\n    return (asset !== undefined\n        && (asset as ResourceGeneratingBuilding)?.resources !== undefined)\n}\n\n\nexport type Player = {\n    resources: Resources\n}\n\nexport type Asset = {\n    /**\n     * The unique id of the asset in the world\n     */\n    id: string\n    /**\n     * The name of the asset/sprite\n     */\n    name: string\n    team?: Team\n}\n\nexport type PositionedAsset = Asset & SimpleCoords\n\nexport function isPositionedAsset(asset?: Asset): asset is PositionedAsset {\n    return (asset !== undefined && (asset as PositionedAsset)?.row >= 0 && (asset as PositionedAsset)?.col >= 0)\n}\n\nexport type PlayerAsset = PotentiallyResourceGeneratingBuilding & {\n    team: Team\n}\n\nexport type Health = {\n    current: number\n    max: number\n}\nexport type Actions = {\n    current: number\n    max: number\n}\n\nexport type Movement = {\n    points: number\n}\n\nexport type MoveableAsset = PlayerAsset & {\n    movement: Movement\n    health: Health\n    actions: Actions\n}\n\nexport function isMoveableAsset(asset: Asset): asset is MoveableAsset {\n    return (asset && (asset as MoveableAsset)?.actions?.max > 0)\n}\n\nexport type FigherAsset = MoveableAsset & {\n    dices: Dice[]\n}\n\nexport function isFighterAsset(asset: Asset): asset is FigherAsset {\n    return (asset && (asset as FigherAsset)?.dices?.length > 0)\n}\n\nexport type SimpleCoords = {\n    row: number\n    col: number\n}","import { Tile, World } from \".\"\nimport { generateUUID } from \"../../math/guid\"\nimport { SpriteSet } from \"./sprite\"\nimport { Asset, isResourceGeneratingAsset, ResourceGeneratingBuilding, ResourceGenerator, Team } from \"./types\"\n\nexport const Mill: SpriteSet & BuildingAsset & ResourceGeneratingBuilding = {\n    id: \"building-mill\",\n    name: \"Mill\",\n    occurences: {\n        min: 1\n    },\n    resources: {\n        grain: {hay: 100, generatedResource: 50},\n        hay: { generatedResource: 50 }\n    }\n}\n\n\ntype DistributedSpriteSet = SpriteSet & {\n    min: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9,\n    max: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10\n}\n\nfunction isDistributedSpriteSet(sprite: SpriteSet): sprite is DistributedSpriteSet {\n    return sprite !== undefined && (sprite as DistributedSpriteSet).max > 0\n}\n\ntype BuildingAsset = Asset\n\nconst buildings: SpriteSet[] | DistributedSpriteSet[] = [\n    {...Mill, min: 0, max: 2},\n    {...Mill, min: 8, max: 10},\n]\n\ntype Props = {\n    rows: number,\n    cols: number\n}\n\nconst lazyRandom = (size: number) => Math.round(Math.random() * (size - 1))\n\nexport const getRandomLocation = ({min, max}: DistributedSpriteSet, rows: number, cols: number) => {\n    const rel = (number: number) => rows * cols * (number / 10)\n    return Math.floor(Math.random() * (rel(max) - rel(min)) + rel(min))\n}\n\nexport const getBuildingsForMap = (props: Props) => {\n    const arrayForBuildings: BuildingAsset[][] = new Array(props.rows * props.cols).map(() => [])\n    buildings.forEach(building => {\n        let buildings =\n            building.occurences.factor\n                ? Math.max(building.occurences.min, arrayForBuildings.length / building.occurences.factor)\n                : building.occurences.min\n        while (buildings > 0) {\n            const position = isDistributedSpriteSet(building) \n                ? getRandomLocation(building, props.rows, props.cols)\n                : lazyRandom(arrayForBuildings.length)\n            arrayForBuildings[position] = [\n                ...(arrayForBuildings[position] ?? []),\n                { ...building, name: building.id, id: generateUUID() }\n            ]\n            buildings--\n        }\n    })\n    return arrayForBuildings;\n}\n\nexport const getResourceGeneratingBuildings = (world: World, team: Team): ResourceGeneratingBuilding[] => \n    world?.map?.reduce((into: ResourceGeneratingBuilding[], row: Tile[]) => \n        [\n            ...into,\n            ...row.reduce((into, col) => [\n                ...into, \n                ...col.elements\n                    .filter(isResourceGeneratingAsset)\n                    .filter((building: Asset) => building.team === team)\n            ], [] as ResourceGeneratingBuilding[])\n        ]\n    , [] as ResourceGeneratingBuilding[])\n\n\nexport const generateResources = (...buildings: (BuildingAsset & ResourceGeneratingBuilding)[]) => {\n    return buildings.reduce((result, building) => {\n        result.push(...Object.entries(building.resources).map(([resource, {generatedResource, ...resources}]) => {\n            let resourceGenerator: ResourceGenerator = {};\n            (resourceGenerator as any)[resource] = {...resources, generatedResource};\n            const result: ResourceGeneratingBuilding = {\n                ...building,\n                resources: resourceGenerator\n            } as ResourceGeneratingBuilding;\n            return result;\n        }));\n        return result;\n    }, [] as ResourceGeneratingBuilding[]).filter(Boolean);\n}","import { Sprite } from \"./sprite\"\n\nexport type Terrain = {\n    sprite: Sprite, \n    movementCosts: number | undefined,\n    defense: number\n}\n\nexport const TerrainPresets: {[key:string]: Terrain} = {\n    \"gras\" : {\n        sprite: {\n            file: \"hexagonTerrain_sheet\",\n            x: 414,\n            y: 1906\n        },\n        movementCosts: 1,\n        defense: 0\n    },\n    \"desert\" : {\n        sprite: {\n            file: \"hexagonTerrain_sheet\",\n            x: 902,\n            y: 627\n        },\n        movementCosts: 4,\n        defense: 0\n    },\n    \"mud\" : {\n        sprite: {\n            file: \"hexagonTerrain_sheet\",\n            x: 658,\n            y: 912\n        },\n        movementCosts: 4,\n        defense: 1\n    },\n    \"muddyHills\" : {\n        sprite: {\n            file: \"hexagonTerrain_sheet\",\n            x: 780,\n            y: 627\n        },\n        movementCosts: 8,\n        defense: 3\n    },\n    \"forest\" : {\n        sprite: {\n            file: \"hexagonTerrain_sheet\",\n            x: 536,\n            y: 912\n        },\n        movementCosts: 8,\n        defense: 3\n    },\n    \"mountain\" : {\n        sprite: {\n            file: \"hexagonTerrain_sheet\",\n            x: 414,\n            y: 1052\n        },\n        movementCosts: 10,\n        defense: 9\n    }\n}\n\nexport const randomTerrain = () => {\n    const keys = Object.keys(TerrainPresets)\n    return TerrainPresets[keys[Math.floor(Math.random() * (keys.length - 1))]]\n}","import { defineHormone, releaseHormone } from \"organismus\";\nimport { range } from \"../../arrays\";\nimport { Position } from \"../../math/position\";\nimport { getPlayerStartAssets } from \"../player/load\";\nimport { getBuildingsForMap } from \"./buildings\";\nimport { randomTerrain, Terrain } from \"./terrain\";\nimport { Asset, Team } from \"./types\";\n\ntype Props = {\n    rows: number,\n    cols: number\n}\n\nexport type Tile = {\n    position: Position,\n    terrain: Terrain,\n    elements: Asset[]\n}\n\ntype Map = Tile[][]\n\nexport type World = {\n    map: Map,\n    teams: Team[]\n}\n\nexport const WorldLoaded = defineHormone<World>(\"game/world/worldLoaded\")\n\nexport const StartGame = defineHormone(\"game/start\")\nexport const SidebarLoaded = defineHormone(\"game/load/sidebar\")\n\nconst loadMapAssets = ({rows, cols}: Props) => {\n    const buildings = getBuildingsForMap({ rows, cols })\n    return buildings\n}\n\nconst loadPlayerAssets = (team: Team, {rows, cols}: Props) => {\n    return getPlayerStartAssets(team, { rows, cols })\n}\n\nconst getNextElement = (array: Asset[][], row: number, col: number) => {\n    const results = array.pop() ?? []\n    return results.map(result => ({...result, row, col})) as Asset[]\n}\n\nexport const load = async ({rows, cols}: Props) => {\n    const mapAssets = loadMapAssets({ rows, cols })\n    const playerAssets = loadPlayerAssets(\"green\", { rows, cols })\n    const redAssets = loadPlayerAssets(\"red\", { rows, cols })\n    const map = range(0, rows - 1)\n        .map((row) => \n            range(0, cols - 1)\n                .map((col) => ({ \n                    position: new Position(row, col), \n                    terrain: randomTerrain(),\n                    elements: [\n                        ...(getNextElement(mapAssets, row, col)), \n                        ...(getNextElement(playerAssets, row, col)),\n                        ...(getNextElement(redAssets, row, col)),\n                    ]\n                }))\n        ) as Map;\n    await releaseHormone(WorldLoaded, {map, teams: [\"red\", \"green\"]});\n    return map\n}","// this is just to make it clear that we are using a 1-based array; changing it to zero won't work without code changes\nconst ROOT_INDEX = 1;\n\nexport default class Heapify<T> {\n    _keys: T[];\n    _priorities: Uint32Array;\n\n    length: number;\n\n    constructor(private capacity = 4086,\n        PrioritiesBackingArrayType = Uint32Array) {\n\n        this.capacity = capacity;\n        this._keys = [];\n        this._priorities = new PrioritiesBackingArrayType(capacity + ROOT_INDEX);\n        this.length = 0;\n    }\n\n    clear() {\n        this.length = 0;\n    }\n\n    /**\n     * Bubble an item up until its heap property is satisfied.\n     *\n     * @param {Number} index\n     * @private\n     */\n    bubbleUp(index: number) {\n        const key = this._keys[index];\n        const priority = this._priorities[index];\n\n        while (index > ROOT_INDEX) {\n            // get its parent item\n            const parentIndex = index >>> 1;\n            if (this._priorities[parentIndex] <= priority) {\n                break;  // if parent priority is smaller, heap property is satisfied\n            }\n            // bubble parent down so the item can go up\n            this._keys[index] = this._keys[parentIndex];\n            this._priorities[index] = this._priorities[parentIndex];\n\n            // repeat for the next level\n            index = parentIndex;\n        }\n\n        // we finally found the place where the initial item should be; write it there\n        this._keys[index] = key;\n        this._priorities[index] = priority;\n    }\n\n    /**\n     * Bubble an item down until its heap property is satisfied.\n     *\n     * @param {Number} index\n     * @private\n     */\n    bubbleDown(index: number) {\n        const key = this._keys[index];\n        const priority = this._priorities[index];\n\n        const halfLength = ROOT_INDEX + (this.length >>> 1);  // no need to check the last level\n        const lastIndex = this.length + ROOT_INDEX;\n        while (index < halfLength) {\n            const left = index << 1;\n            if (left >= lastIndex) {\n                break;  // index is a leaf node, no way to bubble down any further\n            }\n\n            // pick the left child\n            let childPriority = this._priorities[left];\n            let childKey = this._keys[left];\n            let childIndex = left;\n\n            // if there's a right child, choose the child with the smallest priority\n            const right = left + 1;\n            if (right < lastIndex) {\n                const rightPriority = this._priorities[right];\n                if (rightPriority < childPriority) {\n                    childPriority = rightPriority;\n                    childKey = this._keys[right];\n                    childIndex = right;\n                }\n            }\n\n            if (childPriority >= priority) {\n                break;  // if children have higher priority, heap property is satisfied\n            }\n\n            // bubble the child up to where the parent is\n            this._keys[index] = childKey;\n            this._priorities[index] = childPriority;\n\n            // repeat for the next level\n            index = childIndex;\n        }\n\n        // we finally found the place where the initial item should be; write it there\n        this._keys[index] = key;\n        this._priorities[index] = priority;\n    }\n\n    /**\n     * @param {*} key the identifier of the object to be pushed into the heap\n     * @param {Number} priority 32-bit value corresponding to the priority of this key\n     */\n    push(key: T, priority = 0) {\n        if (this.length === this.capacity) {\n            throw new Error(\"Heap has reached capacity, can't push new items\");\n        }\n        const pos = this.length + ROOT_INDEX;\n        this._keys[pos] = key;\n        this._priorities[pos] = priority;\n        this.bubbleUp(pos);\n        this.length++;\n    }\n\n    pop(): T {\n        const key = this._keys[ROOT_INDEX];\n\n        this.length--;\n\n        if (this.length > 0) {\n            this._keys[ROOT_INDEX] = this._keys[this.length + ROOT_INDEX];\n            this._priorities[ROOT_INDEX] = this._priorities[this.length + ROOT_INDEX];\n\n            this.bubbleDown(ROOT_INDEX);\n        }\n\n        return key;\n    }\n\n    peekPriority() {\n        return this._priorities[ROOT_INDEX];\n    }\n\n    peek() {\n        return this._keys[ROOT_INDEX];\n    }\n\n    toString() {\n        if (this.length === 0) {\n            return \"(empty queue)\";\n        }\n\n        const result = Array(this.length - ROOT_INDEX);\n        for (let i = 0; i < this.length; i++) {\n            result[i] = this._priorities[i + ROOT_INDEX];\n        }\n        return `[${result.join(\" \")}]`;\n    \n    }\n\n    get [Symbol.toStringTag]() {\n        return \"Heapify\";\n    }\n\n    * [Symbol.iterator]() {\n        for (let i = 0; i < this.length; i++) {\n            const priority = this._priorities[i + ROOT_INDEX];\n            const key = this._keys[i + ROOT_INDEX];\n            yield [key, priority];\n        }\n    }\n\n    * keys() {\n        for (let i = 0; i < this.length; i++) {\n            yield this._keys[i + ROOT_INDEX];\n        }\n    }\n\n    * priorities() {\n        for (let i = 0; i < this.length; i++) {\n            yield this._priorities[i + ROOT_INDEX];\n        }\n    }\n}","import Heapify from \"./heapify\";\nimport { Cube } from \"../cube/cube\";\nimport { Position } from \"../position\";\nimport { PathResult } from \"./type\";\n\nconst id = (c: Cube) =>  c.toPosition().toString();\n\nexport const shortestPath = (start: Cube, goal: Cube, map: Cube[], isBlocked: (p: Cube) => boolean, range: number): PathResult => {\n  const frontier = new Heapify();\n  frontier.push(start, 0);\n  const cameFrom: { [key: string]: string | undefined } = {};\n  const costSoFar: { [key: string]: number } = {};\n  const visited: string[] = [];\n  let foundPath = false;\n  cameFrom[id(start)] = id(start);\n  costSoFar[id(start)] = 0;\n\n  if(start.equals(goal)) return {\n    path: []\n  }\n\n  if (isBlocked(goal)) return {\n    path : []\n  } \n\n  while (frontier.length > 0) {\n    const current = frontier.pop() as Cube;\n    if (current.equals(goal)){ foundPath = true; break; }\n    if (frontier.length > 1000) {\n      throw new Error(\"No what kinda path are you searching for?!\")\n    }\n\n    visited.push(current.toPosition().toString())\n\n    for (const next of current.neighbors(map).filter(neighbour => !cameFrom[id(neighbour)]).map(neighbour => \n        map.find(i => i.equals(neighbour)) ?? neighbour)) {\n      if (isBlocked(next)) continue;\n      if (!visited.some(i => i === id(next))) visited.push(id(next))\n\n      const newCost = costSoFar[id(current)] + next.cost();\n      if (range < newCost) continue;\n      if (!costSoFar[id(next)] || newCost < costSoFar[id(next)]) {\n        costSoFar[id(next)] = newCost;\n        frontier.push(next, newCost + goal.heuristic(next));\n        cameFrom[id(next)] = current.toPosition().toString();\n      }\n    }\n  }\n\n  const startPosition = start.toPosition();\n  if (!foundPath) return { path: [], visited}\n  let current: Position | null = goal.toPosition();\n  const path: Position[] = [];\n  do {\n    path.push(current)\n    current = Position.fromString(cameFrom[current.toString()])\n  } while (current !== null && !current.equals(startPosition))\n\n  return {path : path.reverse(), visited};\n};\n\nexport const CubeAStarPathTo = shortestPath\n\nexport const CubeAStarDistance = (start: Cube, goal: Cube, map: Cube[], isBlocked: (p: Cube) => boolean, range: number) => {\n  return shortestPath(start, goal, map, isBlocked, range).path.length\n}\n","import { defineHormone, defineSingleHormone } from \"organismus\";\nimport { Asset } from \".\";\nimport { Dice } from \"../player/dices/dice\";\nimport { FigherAsset, MoveableAsset, Player, ResourceGeneratingBuilding, Resources, SimpleCoords, Team } from \"./types\";\n\nexport type Abort = boolean\nexport const Abort = defineSingleHormone<Abort>(\"action/abort\")\n\nexport type PlayerUpdate = Player\nexport const PlayerUpdate = defineHormone<PlayerUpdate>(\"player/update\")\n\nexport type RequestSelectCoords = SimpleCoords & {\n    item: string,\n    payload?: Asset\n};\nexport const RequestSelectCoords = defineSingleHormone<RequestSelectCoords>(\"player/request/select\")\n\nexport type SelectedItem<T> = SimpleCoords & {\n    item: string,\n    payload?: T\n}\nexport const ItemSelected = defineHormone<SelectedItem<unknown>>(\"player/buildings/item/selected\")\n\nexport type ItemMovedAsset = {\n    asset: MoveableAsset\n    location: SimpleCoords\n}\nexport const ItemMoved = defineHormone<ItemMovedAsset>(\"player/item/moved\")\nexport const KnightCreated = defineHormone<SimpleCoords & {\n    team: Team\n}>(\"player/knights/created\")\nexport const WagonCreated = defineHormone<SimpleCoords & {\n    team: Team\n}>(\"player/wagon/created\")\n\nexport const UpdateAllPlayerElements = defineHormone<Asset[]>(\"player/assets/loaded\")\n\n\nexport type CheckPlayerHasActionsLeft = {}\nexport const CheckPlayerHasActionsLeft = defineHormone<CheckPlayerHasActionsLeft>(\"turn/player/actions/hasLeft\")\nexport type PlayerNoActionsLeft = boolean\nexport const PlayerNoActionsLeft = defineSingleHormone<PlayerNoActionsLeft>(\"turn/player/actions/none\")\n\nexport type HexagonUpdatedPayload = SimpleCoords & {\n    elements: Asset[]\n}\nexport const HexagonUpdated = defineSingleHormone<HexagonUpdatedPayload>(\"map/hexagon/updated\", { readOnce: true })\n\nexport type MoveModeData = {\n    asset: MoveableAsset\n    start: SimpleCoords\n    trail?: SimpleCoords[]\n    end?: SimpleCoords\n}\nexport const MoveModeActivate = defineHormone<MoveModeData>(\"modes/move/activate\")\nexport const MoveModeDeactivate = defineHormone(\"modes/move/deactivate\")\nexport type MoveModeHovered = SimpleCoords\nexport const MoveModeTargetHovered = defineHormone<MoveModeHovered>(\"modes/move/hovered-target\")\nexport type MoveModeEndElement = SimpleCoords\nexport const MoveModeEnd = defineHormone<MoveModeEndElement>(\"modes/move/end\")\n\nexport type BattleModeData = {\n    asset: MoveableAsset\n    start: SimpleCoords\n    range?: SimpleCoords[]\n    end?: SimpleCoords\n}\nexport const BattleModeActivate = defineHormone<BattleModeData>(\"modes/battle/activate\")\nexport const BattleModeActive = defineHormone<BattleModeData>(\"modes/battle/active\")\nexport type BattleModeEndElement = SimpleCoords\nexport const BattleModeEnd = defineHormone<BattleModeEndElement>(\"modes/battle/end\")\nexport const BattleModeDeactivate = defineHormone<BattleModeData>(\"modes/battle/deactivate\")\n\nexport type BattleStarted = {\n    location: SimpleCoords\n    attacker: FigherAsset[]\n    defender: FigherAsset[]\n}\nexport const BattleStarted = defineHormone<BattleStarted>(\"battle/started\")\n\ntype FigherInBattle = {\n    asset: FigherAsset,\n    dices: Dice[]\n}\nexport type BattleThrowDices = {\n    location: SimpleCoords\n    attacker: FigherInBattle\n    defender: FigherAsset\n}\nexport const BattleThrowDice = defineHormone<BattleThrowDices>(\"battle/dice/thrown\")\nexport type BattlePlayerAttacked = {\n    location: SimpleCoords\n    damage: number\n    attacker: FigherAsset\n    defender: FigherAsset\n}\nexport const BattlePlayerAttacked = defineHormone<BattlePlayerAttacked>(\"battle/player/attacked\")\n\nexport type MillTaken = {\n    asset: Asset\n    transfered: {\n        from?: Team,\n        to: Team\n    }\n    by: FigherAsset\n    location: SimpleCoords\n    team: Team\n}\nexport const MillTakeover = defineHormone<MillTaken>(\"mill/takeover\")\n\nexport type ModalBattleOpen = BattleStarted\nexport const ModalBattleOpen = defineHormone<ModalBattleOpen>(\"modal/battle/open\")\n\nexport type ModalDiceResultOpen = BattleStarted & {\n    result: number\n}\nexport const ModalDiceResultOpen = defineHormone<ModalDiceResultOpen>(\"modal/dice-result/open\")\n\nexport type TurnStarted = {}\nexport const TurnStarted = defineHormone<TurnStarted>(\"turn/world/started\")\n\nexport type TurnAccepted = Team\nexport const TurnAccepted = defineHormone<TurnAccepted>(\"turn/world/accepted\")\n\nexport type TurnPlayerComplete = {}\nexport const TurnPlayerComplete = defineHormone<TurnPlayerComplete>(\"turn/player/complete\")\n\nexport type TurnsComplete = {}\nexport const TurnsComplete = defineHormone<TurnsComplete>(\"turn/world/complete\")\n\nexport type ResourcesGenerated = ResourceGeneratingBuilding\nexport const ResourcesGenerated = defineHormone<ResourcesGenerated>(\"resources/generated\")\n\nexport type ResourceGenerationComplete = { \n    team: Team \n    before: Resources,\n    after: Resources\n}\nexport const ResourceGenerationComplete = defineHormone<ResourceGenerationComplete>(\"resources/generation/complete\");\n\nexport type ResourceSummary = any;\nexport const ResourceSummary = defineHormone<ResourceSummary>(\"resources/summary\");\n\nexport type DistributeResources = {\n    team: Team,\n    resourcesToGenerate: ResourceGeneratingBuilding[]\n}\nexport const DistributeResources = defineHormone<DistributeResources>(\"resources/distribute\")","import { Dice } from \"./dice\";\n\nexport * from \"./Dices\"\n\nfunction r(d: Dice) {\n    return d.sides[Math.floor(Math.random() * d.sides.length)].value\n}\n\nexport function roll(dices: Dice[]) {\n    return dices.reduce((sum, dice) => sum + r(dice), 0)\n}","import { player } from \"../../..\";\nimport { generateUUID } from \"../../../math/guid\";\nimport { FigherAsset, isFighterAsset, Resources, SimpleCoords, Team, World } from \"../../world\";\nimport { SpriteSet } from \"../../world/sprite\";\nimport * as dices from \"../dices\"\n\nexport const Knight: SpriteSet = {\n    id: \"player-knight\",\n    occurences: {\n        min: 0\n    }\n}\n\nexport const CreateKnight = ({ team, row, col }: {team: Team} & SimpleCoords): FigherAsset & SimpleCoords => ({ \n    id: generateUUID(), \n    name: player.knight.name, \n    team, \n    row, \n    col,\n    movement: {\n        points: 10\n    },\n    actions: {\n        current: 2,\n        max: 2\n    },\n    health: {\n        current: 10,\n        max: 10\n    },\n    dices: [ dices.Standard(), dices.MightyBlowOfBetrayal() ]\n})\n\nexport const costs = (): Resources => ({\n    grain: 100,\n    iron: 200,\n    hay: 0,\n    wood: 0,\n    stone: 0\n})\n\nexport const findNextPlayerWithAction = (world: World, currentTeam: Team) => {\n    for (const row of world.map) {\n        for (const col of row) {\n            const playerWithActionsLeft = col.elements\n                .filter(element => isFighterAsset(element))\n                .map(element => element as FigherAsset)\n                .find(element => element.team === currentTeam && element.actions.current > 0);\n            \n            if (playerWithActionsLeft) {\n                return playerWithActionsLeft;\n            }\n        }\n    }\n\n    return undefined\n}","import { World, Team } from \".\";\nimport { Asset } from \"./types\";\n\nexport function findCoords(world: World, search: { name: string, team?: Team }) {\n    for (const row of world.map) {\n        const element = row.find(col => \n            col.elements.some(element => \n                element.name === search.name &&\n                (search.team === undefined || search.team === element.team)\n            )\n        )\n        if (element) return element.position\n    }\n    return null;\n}\n\nexport function findElement(world: World, search: { name: string, team?: Team }) {\n    if (!world || !world.map) return null;\n    const findElement = (element: Asset) => \n        element.name === search.name &&\n        (search.team === undefined || search.team === element.team)\n    \n    for (const row of world.map) {\n        const element = row.find(col => \n            col.elements.some(findElement)\n        )\n        if (element) return { ...element.position, element: element.elements.find(findElement)! }\n    }\n    return null;\n}\nexport function findAllElementsFromTeam(world: World, team: Team) {\n    if (!world || !world.map) return [];\n    const findElement = (element: Asset) => \n        team === element.team\n    \n    const results: Asset[] = []\n\n    for (const row of world.map) {\n        for (const col of row) {\n            results.push(...col.elements.filter(findElement))\n        }\n    }\n    return results;\n}","import { Asset } from \"../game\";\n\nexport function deepQuerySelector(element: Asset | undefined) {\n    if (!element) return undefined;\n    const hexagons = [...(document?.querySelector(\"the-mill\")?.shadowRoot?.\n        querySelector(\"world-map\")?.shadowRoot?.\n        querySelectorAll(\"hexagon-element\")\n        ?? [])\n    ]\n    return hexagons.find(hexagon =>\n        hexagon.shadowRoot?.querySelector(\"sprite-set\")?.querySelector(`[id=\"${element.id}\"]`));\n}\n\n(document as any).deepQuerySelector = deepQuerySelector;","import { player } from \"../../..\";\nimport { generateUUID } from \"../../../math/guid\";\nimport { MoveableAsset, Resources, SimpleCoords, Team } from \"../../world\";\nimport { SpriteSet } from \"../../world/sprite\";\n\nexport const Wagon: SpriteSet = {\n    id: \"player-wagon\",\n    occurences: {\n        min: 0\n    }\n}\n\nexport const costs = (): Resources => ({\n    grain: 50,\n    iron: 0,\n    hay: 0,\n    wood: 50,\n    stone: 0\n})\n\nexport const CreateWagon = ({ team, row, col }: {team: Team} & SimpleCoords): MoveableAsset & SimpleCoords => ({ \n    id: generateUUID(), \n    name: player.wagon.name, \n    team, \n    row, \n    col,\n    movement: {\n        points: 10\n    },\n    actions: {\n        current: 2,\n        max: 2\n    },\n    health: {\n        current: 10,\n        max: 10\n    }\n})\n","import { hypothalamus, releaseHormone } from \"organismus\";\nimport { PlayerAsset } from \".\";\nimport { buildings } from \"../../assets\";\nimport { Cube } from \"../../math/cube/cube\";\nimport { shortestPath } from \"../../math/pathfinder/a\";\nimport { Position, SimpleCoordsEquals } from \"../../math/position\";\nimport { MoveModeActivate, HexagonUpdated, KnightCreated, MoveModeTargetHovered, MoveModeData, MoveModeEnd, MoveModeDeactivate, ItemMoved, BattleStarted, MillTakeover, ModalBattleOpen, BattleThrowDice, BattlePlayerAttacked, ModalDiceResultOpen, TurnStarted, TurnsComplete, TurnPlayerComplete, TurnAccepted, RequestSelectCoords, ItemSelected, BattleModeData, BattleModeActivate, BattleModeActive, BattleModeDeactivate, BattleModeEnd, CheckPlayerHasActionsLeft, PlayerNoActionsLeft, MillTaken, UpdateAllPlayerElements, Abort, PlayerUpdate, WagonCreated, DistributeResources, ResourcesGenerated, ResourceGenerationComplete, ResourceSummary } from \"./events\";\nimport { SidebarLoaded, StartGame, World, WorldLoaded } from \"./worldLoader\";\nimport { roll } from \"../player/dices\";\nimport { CreateKnight, findNextPlayerWithAction, costs as knightCosts } from \"../player/knights/Knight\";\nimport { Asset, isFighterAsset, isMoveableAsset, isPositionedAsset, MoveableAsset, Players, ResourceGeneratingBuilding, Resources, Team, teams } from \"./types\";\nimport { TurnComplete } from \"../player/Assets\";\nimport { findAllElementsFromTeam } from \"./navigator\";\nimport { deepQuerySelector } from \"../../browser/Selector\";\nimport { CreateWagon, costs as wagonCosts } from \"../player/wagon/Wagon\";\nimport { generateResources, getResourceGeneratingBuildings } from \"./buildings\";\n\nlet world: World = {} as any as World\nlet worldAsCube: Cube[] = []\n\nlet currentTurn: Team\nlet turns: Team[] = []\n\nlet players: Players = {} as any as Players\n\nexport const getCurrentWorld = () => ({ ...world });\nexport const getCurrentTeam = () => currentTurn;\nexport const setCurrentTeam = (team: Team) => currentTurn = team;\nexport const getPlayer = (team: Team) => ({ ...players[team] })\nexport const getActivePlayer = () => players[currentTurn]\nconst hasActionsLeft = (asset: MoveableAsset) => asset.actions.current > 0;\nconst isOnTurn = ({ team }: { team: Team }) => team === currentTurn;\n\nhypothalamus.on(WorldLoaded, (newWorld) => {\n    worldAsCube = []\n    newWorld.map.forEach((row, rowIndex) => {\n        row.forEach((_, colIndex) => {\n            const cube = new Position(rowIndex, colIndex).toCube()\n            if (_.terrain.movementCosts) {\n                cube.costs = _.terrain.movementCosts\n            }\n            worldAsCube.push(cube)\n        })\n    })\n    world = newWorld;\n    teams().forEach(team => {\n        players[team] = {\n            resources: {\n                hay: 100,\n                grain: 200,\n                iron: 200,\n                wood: 100,\n                stone: 100\n            }\n        }\n    })\n    releaseHormone(StartGame)\n})\n\nhypothalamus.on(Abort, async (abort) => {\n    if (!abort) return;\n    releaseHormone(MoveModeDeactivate)\n    releaseHormone(BattleModeDeactivate)\n})\n\nhypothalamus.on([StartGame, SidebarLoaded], () => {\n    releaseHormone(TurnStarted)\n})\n\nhypothalamus.on(TurnStarted, () => {\n    turns = [...world.teams]\n    currentTurn = turns.pop()!\n    releaseHormone(TurnAccepted, currentTurn)\n})\n\nexport function allocateResources(initialResources: Resources, resourcesToGenerate: ResourceGeneratingBuilding[]) {\n    let availableResources: any = { ...initialResources };\n    let resourceGeneratingBuildings: ResourceGeneratingBuilding[] = [...resourcesToGenerate];\n    let touched = true;\n\n    while (touched) {\n        touched = false;\n        resourceGeneratingBuildings = resourceGeneratingBuildings.map((resourceGeneratingBuilding) => {\n            let result: ResourceGeneratingBuilding | undefined = resourceGeneratingBuilding;\n            Object.entries(resourceGeneratingBuilding.resources).forEach(([source, { generatedResource, ...costs }]) => {\n                if (Object.entries(costs).every(([resource, cost]) => availableResources[resource] <= cost)) {\n                    touched = true;\n                    result = undefined;\n                    Object.entries(costs).forEach(([resource, cost]) => {\n                        availableResources[resource] -= cost;\n                    })\n                    availableResources[source] += generatedResource;\n                    releaseHormone(ResourcesGenerated, resourceGeneratingBuilding);\n                }\n            })\n            return result;\n        }).filter(Boolean)\n    }\n    return availableResources\n}\n\nhypothalamus.on(DistributeResources, async ({ team, resourcesToGenerate }: DistributeResources) => {\n    if (getPlayer(team)?.resources) {\n        const before = { ...getPlayer(team).resources };\n        players[team].resources = allocateResources(players[team].resources, resourcesToGenerate);\n        releaseHormone(ResourceGenerationComplete, { team, before, after: players[team].resources });\n    }\n})\n\nhypothalamus.collect(ResourcesGenerated, ResourceGenerationComplete, (values) => {\n    releaseHormone(ResourceSummary, (values[ResourcesGenerated.name] as ResourceGeneratingBuilding[])?.map(generator => {\n        return {\n            name: generator.name,\n            from: Object.values(generator.resources).map(({ generatedResource, ...costs }) => ({ ...costs })),\n            to: Object.keys(generator.resources)\n        }\n    }));\n})\n\nhypothalamus.on(TurnAccepted, async (team) => {\n    const playerAssets = findAllElementsFromTeam(world, team)\n    await releaseHormone(UpdateAllPlayerElements, playerAssets)\n\n    const playerCastle = playerAssets?.find(element => element.name === buildings.castleSmall.name)\n    if (isPositionedAsset(playerCastle)) {\n        releaseHormone(RequestSelectCoords, {\n            item: buildings.castleSmall.name,\n            row: playerCastle.row,\n            col: playerCastle.col,\n            payload: playerCastle,\n        })\n    }\n    setTimeout(() => {\n        deepQuerySelector(playerCastle)?.scrollIntoView({ behavior: \"smooth\", block: \"center\", inline: \"center\" });\n    }, 2)\n\n    releaseHormone(PlayerUpdate, getPlayer(team))\n\n    // refill all resources and movements\n    const resourceMap: ResourceGeneratingBuilding[] = \n        getResourceGeneratingBuildings(world, team)\n            .reduce((into, building) => [...into, ...generateResources(building)], [] as ResourceGeneratingBuilding[])\n    // distribute resources\n    await releaseHormone(DistributeResources, { team, resourcesToGenerate: resourceMap });\n})\n\nhypothalamus.on(RequestSelectCoords, async (data) => {\n    await releaseHormone(ItemSelected, { ...data })\n    await releaseHormone(ItemSelected, { ...data, item: \"hexagon\" })\n})\n\nhypothalamus.on(TurnPlayerComplete, () => {\n    currentTurn = turns.pop()!\n    if (currentTurn === undefined) {\n        releaseHormone(TurnsComplete)\n    } else {\n        releaseHormone(TurnAccepted, currentTurn)\n    }\n})\n\nhypothalamus.on(TurnsComplete, () => {\n    // refill all movements\n    world.map.forEach((row) => {\n        row.forEach(({ elements }) => {\n            // For moveable assets, reset their movement\n            TurnComplete(...elements\n                .filter(isMoveableAsset)\n            )\n        })\n    })\n    releaseHormone(TurnStarted)\n})\n\nconst tryPay = (team: Team, costs: Resources): boolean => {\n    const availableResources: any = { ...players[team].resources };\n    for (const [resource, cost] of Object.entries(costs)) {\n        if (availableResources[resource] < cost) {\n            return false;\n        }\n        availableResources[resource] -= cost\n    }\n\n    players[team].resources = availableResources\n    return true;\n}\n\nhypothalamus.on(KnightCreated, ({ row, col, team }) => {\n    if (!isOnTurn({ team })) return;\n    if (!tryPay(team, knightCosts())) return;\n    const knight = CreateKnight({ row, col, team })\n    world.map[row][col].elements.push(knight)\n    releaseHormone(HexagonUpdated, { row, col, elements: [...world.map[row][col].elements] })\n    releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, team))\n    releaseHormone(PlayerUpdate, getActivePlayer())\n})\nhypothalamus.on(WagonCreated, ({ row, col, team }) => {\n    if (!isOnTurn({ team })) return;\n    if (!tryPay(team, wagonCosts())) return;\n    const wagon = CreateWagon({ row, col, team })\n    world.map[row][col].elements.push(wagon)\n    releaseHormone(HexagonUpdated, { row, col, elements: [...world.map[row][col].elements] })\n    releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, team))\n    releaseHormone(PlayerUpdate, getActivePlayer())\n})\n\nhypothalamus.on(CheckPlayerHasActionsLeft, () => {\n    const playerWithActionsLeft = findNextPlayerWithAction(world, currentTurn)\n\n    if (playerWithActionsLeft === undefined) {\n        releaseHormone(PlayerNoActionsLeft, true)\n    }\n})\n\nconst safeNumber = (n: number) => {\n    return Number.parseInt(n.toString(), 10)\n}\n\nlet moveModeState: MoveModeData | undefined = undefined\nhypothalamus.on(MoveModeActivate, async data => {\n    if (battleModeState) {\n        await releaseHormone(BattleModeDeactivate)\n    }\n    if (!isOnTurn(data.asset)) return;\n    moveModeState = data\n})\nhypothalamus.on(MoveModeDeactivate, () => {\n    moveModeState = undefined\n})\nhypothalamus.on(MoveModeTargetHovered, async data => {\n    if (!moveModeState) {\n        return\n    }\n\n    const start = new Position(safeNumber(moveModeState.start.row), safeNumber(moveModeState.start.col)).toCube()\n    const end = new Position(safeNumber(data.row), safeNumber(data.col)).toCube()\n    const isBlocked = (cube: Cube) => {\n        const { row, col } = cube.toCoords()\n        return world.map[row][col].elements\n            .filter(element => element.team !== moveModeState?.asset.name)\n            .some((element) => isFighterAsset(element))\n    }\n\n    const trail = shortestPath(start, end, worldAsCube, isBlocked, moveModeState.asset.movement.points)\n        .path;\n    let actualEnd = data\n    if (isBlocked(end)) {\n        actualEnd = [...trail].pop()?.toCoords() ?? moveModeState.start\n    }\n    console.log(\"MoveModeTargetHovered\", { ...moveModeState, trail, end: actualEnd })\n\n    await releaseHormone(MoveModeActivate, { ...moveModeState, trail, end: actualEnd })\n})\nhypothalamus.on(MoveModeEnd, async data => {\n    if (!moveModeState) {\n        return\n    }\n    if ((moveModeState.trail?.length ?? 0) < 1) {\n        return;\n    }\n\n    const { start, asset } = moveModeState;\n    if (!isOnTurn(asset)) { return }\n    if (asset.actions === undefined) console.error(\"asset.actions undefined\", asset)\n    if (!hasActionsLeft(asset)) { return; }\n    if (SimpleCoordsEquals(moveModeState.start, data)) {\n        releaseHormone(MoveModeDeactivate)\n        return;\n    }\n    asset.actions.current -= 1\n    const elements = [...world.map[start.row][start.col].elements];\n    world.map[start.row][start.col].elements = []\n    elements.forEach((element) => {\n        if (element.id !== asset.id)\n            world.map[start.row][start.col].elements.push({ ...element, row: start.row, col: start.col } as Asset)\n        else {\n            world.map[data.row][data.col].elements.push({ ...element, row: data.row, col: data.col } as Asset)\n        }\n    })\n    await releaseHormone(HexagonUpdated, { row: start.row, col: start.col, elements: [...world.map[start.row][start.col].elements] })\n    await releaseHormone(HexagonUpdated, { row: data.row, col: data.col, elements: [...world.map[data.row][data.col].elements] })\n    await releaseHormone(MoveModeDeactivate)\n    await releaseHormone(ItemMoved, { asset, location: data })\n    await releaseHormone(CheckPlayerHasActionsLeft)\n})\n\nlet battleModeState: BattleModeData | undefined = undefined\nhypothalamus.on(BattleModeActivate, async data => {\n    if (!isOnTurn(data.asset)) return;\n    if (moveModeState) {\n        await releaseHormone(MoveModeDeactivate)\n    }\n    battleModeState = {\n        ...data,\n        range: new Position(data.start.row, data.start.col)\n            .toCube()\n            .range(1)\n            .map(c => c.toPosition().toCoords())\n    }\n    releaseHormone(BattleModeActive, battleModeState)\n})\nhypothalamus.on(BattleModeEnd, async data => {\n    if (!battleModeState || !isOnTurn(battleModeState.asset)) return;\n    if (SimpleCoordsEquals(battleModeState.start, data)) {\n        releaseHormone(BattleModeDeactivate)\n        return;\n    }\n    const { row, col } = data\n    const { asset } = battleModeState;\n    const otherKnights = [...world.map[row][col].elements]\n        .filter(item => isFighterAsset(item) && (item as PlayerAsset).team !== asset.team)\n    if (hasActionsLeft(asset) && otherKnights.length > 0) {\n        asset.actions.current -= 1;\n        await releaseHormone(BattleStarted, {\n            location: data,\n            attacker: [asset],\n            defender: [...otherKnights]\n        })\n    }\n    releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, asset.team))\n    releaseHormone(BattleModeDeactivate)\n    await releaseHormone(CheckPlayerHasActionsLeft)\n})\nhypothalamus.on(BattleModeDeactivate, () => battleModeState = undefined)\n\nhypothalamus.on(ItemMoved, async ({ asset, location }) => {\n    if (!isOnTurn(asset)) { return }\n    const { row, col } = location;\n    const otherElements = [...world.map[row][col].elements]\n        .filter(item => item.id !== asset.id);\n    const mills = otherElements\n        .filter(item => item.name === buildings.mill.name && (item as PlayerAsset).team !== asset.team)\n    if (mills.length > 0 && isFighterAsset(asset)) {\n        const millTaken: MillTaken = {\n            asset: mills[0],\n            transfered: {\n                from: mills[0].team!,\n                to: asset.team\n            },\n            location,\n            by: asset,\n            team: asset.team\n        }\n        await releaseHormone(MillTakeover, millTaken)\n        return\n    }\n    releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, asset.team))\n    await releaseHormone(CheckPlayerHasActionsLeft)\n})\n\nhypothalamus.on(MillTakeover, ({ location, team, asset }) => {\n    if (!isOnTurn({ team })) { return }\n    const { row, col } = location\n    const elements = [...world.map[row][col].elements];\n    world.map[row][col].elements = []\n    elements.forEach((element) => {\n        if (element.id !== asset.id)\n            world.map[row][col].elements.push(element)\n        else {\n            world.map[row][col].elements.push({ ...element, team } as PlayerAsset)\n        }\n    })\n    releaseHormone(UpdateAllPlayerElements, findAllElementsFromTeam(world, team))\n})\n\nhypothalamus.on(BattleStarted, (data) => {\n    releaseHormone(ModalBattleOpen, data)\n})\n\nhypothalamus.on(BattleThrowDice, (data) => {\n    if (!isOnTurn(data.attacker.asset)) { return }\n    const damage = roll(data.attacker.dices)\n    releaseHormone(BattlePlayerAttacked, {\n        attacker: data.attacker.asset,\n        defender: data.defender,\n        damage,\n        location: data.location\n    })\n})\n\nhypothalamus.on(BattlePlayerAttacked, (data) => {\n    const { defender, damage, attacker } = data\n    if (damage < 0) {\n        attacker.health.current += damage\n    } else {\n        defender.health.current -= damage\n    }\n    const { row, col } = data.location\n    const elements = [...world.map[row][col].elements];\n    world.map[row][col].elements = []\n    elements.forEach((element) => {\n        if (element.id === defender.id) {\n            if (defender.health.current > 0) {\n                world.map[row][col].elements.push(defender)\n            }\n        } else if (element.id === attacker.id) {\n            if (attacker.health.current > 0) {\n                world.map[row][col].elements.push(attacker)\n            }\n        } else {\n            world.map[row][col].elements.push(element)\n        }\n    })\n    releaseHormone(HexagonUpdated, { row, col, elements: [...world.map[row][col].elements] })\n    releaseHormone(ModalBattleOpen, undefined)\n    releaseHormone(ModalDiceResultOpen, {\n        attacker: [attacker],\n        defender: [defender],\n        location: data.location,\n        result: damage\n    })\n})","import { MoveableAsset } from \"..\";\n\nexport const TurnComplete = (...assets: MoveableAsset[]) => {\n    assets.forEach(asset => {\n        asset.actions.current = asset.actions.max\n    })\n}","import { Dice } from \"./dice\";\n\nexport function Standard(): Dice {\n    return {\n        name: \"Standardwaffe\",\n        story: \"Eine faire, ausgewogene Waffe die jeder Ritter haben sollte\",\n        sides: [\n            { value: 3 },\n            { value: 3 },\n            { value: 3 },\n            { value: 4 },\n            { value: 5 },\n            { value: 6 },\n        ]\n    }\n}\n\nexport function MightyBlowOfBetrayal(): Dice {\n    return {\n        name: \"Mchtiger Schlag des Betrugs\",\n        story: \"Eine Waffe, die bis zu 12 Schaden verursachen kann, doch auch eine hohe Wahrscheinlichkeit hat gar keinen Schaden zu verursachen, oder sogar den Ritter selbst zu verletzen!\",\n        sides: [\n            { value: -3 },\n            { value: 0 },\n            { value: 0 },\n            { value: 6 },\n            { value: 12 },\n        ]\n    }\n}","import { setLoglevel, LOGLEVEL } from \"organismus\"\n\nif (window.location.hash.indexOf(\"log\") >= 0) {\n    setLoglevel(LOGLEVEL.INFO)\n}\nif (window.location.hash.indexOf(\"trace\") >= 0) {\n    setLoglevel(LOGLEVEL.TRACE)\n}\n\nexport * from \"./worldLoader\"\nexport * from \"./types\"\nexport * from \"./world-state\"","import { css, CSSResult } from \"lit\";\n\nexport const sprite = css`\n    :host {\n        position: absolute;\n        width: 120px;\n        height: 140px;\n        background-repeat: no-repeat;\n        background-position: center center;\n    }\n    div {\n        width: 80%;\n        height: 80%;\n        margin: 10%;\n        background-size: contain;\n        background-repeat: no-repeat;\n        background-position: center center;\n    }\n`\n\nexport const inactive = css`\n.inactive {\n    opacity: 0.8;\n    filter: grayscale(100%);\n}`\n\nexport const sidebar = css`\n    ::-webkit-scrollbar {\n      width: 10px;\n      height: 10px;\n      cursor: pointer;\n    }\n    ::-webkit-scrollbar-track {\n      background: #f1f1f1;\n    }\n    ::-webkit-scrollbar-thumb {\n      background: #888;\n    }\n    ::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }\n`\nexport const sidebarFor = (element: CSSResult) => css`\n     ${element} {\n        scrollbar-color:  #888 #f1f1f1;\n        scrollbar-width: thin;\n     }\n`","import { css, html } from \"lit\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\n\ntype Props = {\n    src: string\n    height: string\n}\n\nexport default pureLit(\"button-image\", (el: LitElementWithProps<Props>) => {\n    const style = el.height ? `height:${el.height};` : \"\"\n    return html`<button style=\"${style}; background-image: url('${el.src}'), url('/assets/sidebar/btn_1.png')\">\n        <slot></slot>\n    </button>`\n}, {\n    styles: css`\n    button {\n        background: none;\n        border: none;\n        margin: 0;\n        padding: 0;\n        background-image: url('/assets/sidebar/btn_1.png');\n        background-size: contain;\n        height: 70px;\n        background-repeat: no-repeat;\n        cursor: pointer;\n        padding-left: 33%; \n        width: 85%;\n    }\n    slot {\n        display: flex;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n    }\n    `,\n    defaults: {\n        src: \"\",\n        height: \"\"\n    }\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\n\nexport default pureLit(\"button-pure\", () => {\n    return html`<button>\n        <slot></slot>\n    </button>`\n}, {\n    styles: css`\n    \n    button {\n        background: none;\n        border: none;\n        margin: 0;\n        padding: 0;\n        cursor: pointer;\n    }\n     img {\n        margin: 3px;\n        width: 64px;\n        height: 64px;\n    }\n    `\n})","import { css } from \"lit\";\n\nexport const modalCoreCss =  css`\n#background {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background-color: var(--colorContrast);\n    opacity: 0.7;\n    z-index: 1000;\n}\n#modal {\n    position: absolute;\n    left: 20%;\n    top: 20%;\n    width: 60%;\n    height: 60%;\n    padding: 12px;\n    background-color: var(--colorMain);\n    opacity: 1;\n    z-index: 1001;\n}\n`\n\nexport const modalHeaderCss = css`\n    header {\n        position: relative;\n        height: 2rem;\n    }\n    #close {\n        position: absolute;\n        right: 12px;\n        font-size: 2rem;\n    }\n`","import { html, LitElement } from \"lit\"\nimport { LitElementWithProps, pureLit } from \"pure-lit\"\nimport { modalCoreCss, modalHeaderCss } from \"./modal.styles\"\n\ntype Prop = {\n    open: boolean\n    preventClose: boolean\n}\n\nconst trigger = (el: LitElement, event: string) => {\n    el.dispatchEvent(new CustomEvent(event))\n}\n\nexport default pureLit(\"modal-window\", (el: LitElementWithProps<Prop>) => {\n    return el.open ? html`\n    <div id=\"background\" @click=\"${() => el.preventClose && trigger(el, \"close\")}\"></div>\n    <div id=\"modal\">\n        <header>\n            ${el.preventClose ? html`` : html`<button-pure id=\"close\" @click=\"${() => trigger(el, \"close\")}\"><text-block size=\"large\">X</text-block></button-pure>`}\n            <slot name=\"header\"></slot>\n        </header>\n        <div>\n            <slot></slot>\n        </div>\n        <slot name=\"footer\"></slot>\n    </div>\n    ` : html``\n}, {\n    styles: [modalCoreCss, modalHeaderCss],\n    defaults: {\n        open: false,\n        preventClose: false\n    }\n})\n","import { html } from \"lit\"\nimport { pureLit, useState } from \"pure-lit\"\n\nexport default pureLit(\"modal-container\", (el) => {\n    const { getState: modalOpen, publish: modalSetOpen } = useState(el, false)\n    return html`\n        <button-pure @click=\"${() => modalSetOpen(true)}\"><slot></slot></button-pure>\n        <modal-window .open=${modalOpen()} @close=${() => modalSetOpen(false)}>\n            <slot slot=\"header\" name=\"header\"></slot>\n            <slot name=\"body\"></slot>\n            <slot slot=\"footer\" name=\"footer\"></slot>\n        </modal-window>\n    `\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\n\ntype Props = {\n    size: \"small\" | \"medium\" | \"large\"| \"x-large\"\n    type: \"inline\" | \"paragraph\"\n}\n\nconst sizes = css`\n    .small {\n        font-size: 0.75rem;\n    }\n    .medium {\n        font-size: 1rem;\n    }\n    .large {\n        font-size: 1.5rem;\n    }\n    .x-large {\n        font-size: 2rem;\n    }\n`\nconst type = css`\n    .inline {\n        display: inline;\n    }\n    .paragraph {\n        display: block;\n    }\n`\n\nexport default pureLit(\"text-block\", ({size, type}: Props) => {\n    return html`<span class=\"${size} ${type}\"><slot></slot></span>`\n}, {\n    styles: [sizes, type],\n    defaults: {\n        size: \"medium\",\n        type: \"inline\"\n    }\n})","import { html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { style } from \"./loading-bar.styles\";\n\ntype Prop = {\n    width: string\n}\n\nexport default pureLit(\"loading-bar\", ({width}: Prop) => {\n    return html`\n    <div class=\"progress-bar\">\n        <span class=\"bar\">\n            ${width === \"0%\" ? html`` : html`<span class=\"progress\" style=\"width: ${width};\"></span>`}\n        </span>\n    </div>\n    `\n}, {\n    styles: [style],\n    defaults: {\n        width: \"100%\"\n    }\n})","import { css } from \"lit\";\n\nexport const style = css`\n    \n.progress-bar {\n    border-radius: 60px;\n    overflow: hidden;\n    width: 100%;\n\n}\n.bar {\n    background: rgba(0,0,0,0.075);\n}\n\n.progress {\n    background: #75b800;\n    color: #fff;\n    padding: 5px;\n    width: 0;\n}\n\n\nspan {\n    display: block;\n}\n`","import { html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { styles } from \"./dice.style\";\n\ntype Prop = {\n    result: number\n}\n\nexport default pureLit(\"dice-roll\", ({result}: Prop) => \n    html`<div id=\"cube\">\n        <div id=\"side1\"></div>\n        <div id=\"side2\"></div>\n        <div id=\"side3\">${result}</div>\n        <div id=\"side4\"></div>\n        <div id=\"side5\"></div>\n        <div id=\"side6\"></div>\n    </div>`\n, {\n    styles,\n    props: [{\n        result: {type: Number}\n    }]\n})","import { css } from \"lit\";\n\nexport const styles = css`\n:host {\n    width: 250px;\n    height: 213px;\n    margin: 20px auto;\n}\n#cube {\n    width: 112px;\n    height: 112px;\n    top: 50px;\n    transform-style: preserve-3d;\n    transform: rotateX(-22deg) rotateY(1083deg) rotateZ(0deg);\n    margin: auto;\n    position: relative;\n    transform-style: preserve-3d;\n    transition: all 0.5s ease-in-out;\n    animation: cubeRotation 5s 1;\n    animation-fill-mode: forwards;\n}\n@keyframes cubeRotation {\n    0%   {\ttransform: rotateX(-22deg) rotateY(1083deg) rotateZ(0deg);\t}\n    100%   {\ttransform: rotateX(-382deg) rotateY(3deg) rotateZ(1080deg);\t}\n}\n@keyframes reveal {\n    0%   {\tcolor:white;\t}\n    80%   {\tcolor:white;\t}\n    100%   {\tcolor:black;\t}  \n}\n#cube > div {\n    position: absolute;\n    transition: all 0.5s ease-in-out;\n    width: 112px;\n    height: 112px;\n    float: left;\n    overflow: hidden;\n    background-color:white;\n    \n    line-height: 112px;\n    text-align: center;\n    font-size: 5rem;\n}\n#side1 {\n  transform: rotatex(90deg) translateX(0px) translateY(0px) translateZ(56px);\n\tborder:1px solid black;\n}\n#side2 {\n    transform: rotateY(-90deg) translateX(0px) translateY(0px) translateZ(56px);\n\tborder:1px solid black;\n}\n#side3 {\n    transform: translateX(0px) translateY(0px) translateZ(56px);\n\tborder:1px solid black;\n  color:white;\n    animation: reveal 5s 1;\n    animation-fill-mode: forwards;\n}\n#side4 {\n    transform: rotateY(90deg) translateX(0px) translateY(0px) translateZ(56px);\n\tborder:1px solid black;\n}\n#side5 {\n    transform: rotateY(180deg) translateX(0px) translateY(0px) translateZ(56px);\n\tborder:1px solid black;\n}\n#side6 {\n    transform: rotateX(-90deg) translateX(0px) translateY(0px) translateZ(56px);\n\tborder:1px solid black;\n}\n`","import { css, html } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"player-knight\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { getState, publish } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, publish)\n    return html`<div class=\"${getState() === el.team ? \"active\" : \"inactive\"}\" style=\"background-image:url('/assets/knight_${el.team}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        div {\n            background-size: contain;\n            opacity: 1;\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n    }\n})","import { css, html } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"player-wagon\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { getState, publish } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, publish)\n    return html`<div class=\"${getState() === el.team ? \"active\" : \"inactive\"}\" style=\"background-image:url('/assets/wagon_${el.team}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        div {\n            background-size: contain;\n            opacity: 1;\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n    }\n})","import { css, html } from \"lit\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\nimport { Dice } from \"../../../game/player/dices/dice\";\n\ntype Props = {\n    dices?: Dice[]\n}\n\nexport default pureLit(\"dice-selector\", (el: LitElementWithProps<Props>) => {\n    return html`${el.dices?.map(dice => html`<div>\n        <input type=\"radio\" \n            @click=${() => el.dispatchEvent(new CustomEvent(\"select\", { detail: dice }))}\n            id=\"${dice.name}\" \n            name=\"dice\" \n            value=\"${dice.name}\">\n        <label for=\"${dice.name}\">\n            <strong>${dice.name}</strong> - ${dice.story}\n            <div class=\"sides\" style=\"grid-template-columns: 1fr ${dice.sides.map(() => \"1fr\").join(\" \")};\">\n                <h5>Wrfelergebnisse</h5>\n                ${dice.sides.map(side => html`<div class=\"side\">${side.value}</div>`)}\n            </div>\n        </label>\n    </div>`)}`\n},\n    {\n        styles: css`\n        .sides {\n            display: grid;\n            padding: 0.5rem;\n        }\n        h5 {\n            margin: 0;\n        }\n        .side {\n            background-image: url(\"/assets/dice.png\");\n            background-size: contain;\n            height: 1rem;\n            background-repeat: no-repeat;\n            background-position: center;\n            text-align: center;\n            padding-top: 0.25rem;\n            font-size: 0.75rem;\n        }\n     `\n    })","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{nothing as t,noChange as i}from\"../lit-html.js\";import{Directive as r,PartType as s,directive as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends r{constructor(i){if(super(i),this.it=t,i.type!==s.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this.ft=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this.ft;this.it=r;const s=[r];return s.raw=s,this.ft={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=n(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","import { css, html } from \"lit\"\nimport {unsafeHTML} from 'lit/directives/unsafe-html.js';\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { LitElementWithProps, pureLit, useOnce, useState } from \"pure-lit\";\n\nimport { buildings, player } from \".\"\nimport { Asset, isPositionedAsset, Team } from \"../game\";\nimport { HexagonUpdated, HexagonUpdatedPayload, ItemSelected, RequestSelectCoords, TurnAccepted } from \"../game/world/events\";\nimport { deepQuerySelector } from \"../browser/Selector\";\n\ntype Props = {\n    row: number,\n    col: number,\n    triggers: { [team: string]: (() => Promise<unknown>)[] }\n}\n\nasync function doTrigger(triggers: (() => Promise<unknown>)[]) {\n    for (const trigger of triggers) {\n        await trigger()\n    }\n} \n\nconst getFilteredTriggers = (team: Team, triggers: { [team: string]: (() => Promise<unknown>)[] }) => {\n    return [\n        ...(triggers.none ?? []),\n        ...(triggers[team] ?? [])\n    ]\n}\n\npureLit(\"sprite-set\", (el: LitElementWithProps<Props>) => {\n    const { getState: getUpdated, publish: setUpdated } \n        = useState<HexagonUpdatedPayload | undefined>(el, undefined)\n    const { getState: getCurrentTeam, publish: setCurrentTeam }\n        = useState<Team | undefined>(el, undefined)\n\n    useReceptor(el, \n        HexagonUpdated, \n        (u) => el.row.toString() === u?.row.toString() && el.col.toString() === u?.col.toString(), \n        setUpdated\n    )\n    useReceptor(el,\n        TurnAccepted,\n        setCurrentTeam\n    )\n\n    if (getUpdated()) {\n        doTrigger(getFilteredTriggers(getCurrentTeam()!, el.triggers))\n            .then(() => releaseHormone(ItemSelected, { item: \"hexagon\", row: el.row, col: el.col }))\n    }\n    useOnce(el, () => {\n        el.addEventListener(\"click\", async () => {\n            doTrigger(getFilteredTriggers(getCurrentTeam()!, el.triggers))\n        })\n    })\n\n    return html`<slot></slot>`\n}, {\n    defaults: {\n        row: 0,\n        col: 0,\n        triggers: {}\n    }\n})\n\npureLit(\"sprite-player-elements-grid\", () => {\n    return html`<slot></slot>`\n},\n{\n    styles: css`\n    slot {\n        display: grid;\n        align-items: center;\n        grid-template-columns: repeat(6, 1fr);\n    }\n    `\n})\n\nexport const spriteFactory = (elements: Asset[] | undefined, row: number, col: number) => {\n    const triggers: { [team: string]: (() => Promise<unknown>)[] } = {}\n    const assets = elements?.map((element) => {\n        const entry = Object.entries({ ...buildings, ...player }).find(([_, value]) => value.name === element.name)\n        const payload = Object.entries({ ...element, name: undefined })\n            .filter(([_, values]) => values !== undefined)\n        const attributes = payload\n            .map(([key, value]) => `${key}=\"${value}\"`)\n            .join(\" \")\n        const team = element.team ?? \"none\";\n        triggers[team] = triggers[team] ?? []\n        triggers[team].push(() => releaseHormone(ItemSelected, { item: entry?.[1].name ?? \"\", row, col, payload: {...element} }))\n        return html`${unsafeHTML(`<${entry?.[1].name ?? \"span\" } ${attributes}></${entry?.[1].name ?? \"span\" }>`)}`\n    })\n    return html`<sprite-set .triggers=${triggers} col=\"${col}\" row=\"${row}\">${assets}</sprite-set>`\n}\n\nexport const spriteGridFactory = (elements: Asset[] | undefined, elementStyle: string = \"\") => {\n    const assets = elements?.map((element) => {\n        const entry = Object.entries({ ...buildings, ...player }).find(([_, value]) => value.name === element.name)\n        const payload = Object.entries({ ...element, name: undefined })\n            .filter(([_, values]) => values !== undefined)\n        const attributes = payload\n            .map(([key, value]) => `${key}=\"${value}\"`)\n            .join(\" \")\n        const position = isPositionedAsset(element) ? { row: element.row, col: element.col } : { row: 0, col: 0}\n        const onClick = () => {\n            releaseHormone(RequestSelectCoords, {\n                item: element.name,\n                ...position,\n                payload: element,\n            })\n            setTimeout(() => {\n                deepQuerySelector(element)?.scrollIntoView({behavior: \"smooth\", block: \"center\", inline: \"center\"});\n            }, 2)\n        }\n        const onHover = () => {\n            setTimeout(() => {\n                deepQuerySelector(element)?.scrollIntoView({behavior: \"smooth\", block: \"center\", inline: \"center\"});\n            }, 2)\n        }\n        return html`<div\n            @click=\"${onClick}\"\n            @mouseover=\"${onHover}\"\n            style=\"position:relative; cursor: pointer; width: 120px;${elementStyle};\">\n                ${unsafeHTML(`<${entry?.[1].name ?? \"span\" } ${attributes} style=\"${elementStyle};\"></${entry?.[1].name ?? \"span\" }>`)}\n        </div>`\n    })\n    return html`<sprite-player-elements-grid>${assets}</sprite-player-elements-grid>`\n}","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { FigherAsset } from \"../../game\";\nimport { spriteFactory } from \"../sprites\";\n\ntype Props = {\n    player: FigherAsset,\n    row: number,\n    col: number\n}\n\nexport default pureLit(\"fighter-info\", ({player, row, col}: Props) => {\n    return html`<div class=\"sprite ${player?.health.current < 1 ? \"dead\" : \"alive\"}\">\n            ${spriteFactory(player ? [player] : [], row, col)}\n        </div>\n        <div class=\"info\">\n            <h3>Gesundheit</h3>\n            <loading-bar width=\"${(player?.health.current / player?.health.max) * 100}%\"></loading-bar>\n            <p>${player?.health.current} von ${player?.health.max}</p>\n        </div>`;\n}, {\n    styles: [\n        css`\n        :host {\n            display: grid;\n            grid-template-columns: 1fr 3fr;\n        }\n        .sprite {\n            height: 140px;\n        }\n        @keyframes rotation {\n            from {\n                transform: rotate(0deg);\n            }\n            to {\n                transform: rotate(-90deg);\n            }\n        }\n        .dead {\n            animation: rotation 5s 1;\n            animation-fill-mode: forwards;\n        }\n        `\n    ],\n    props: [{\n        player: { type: Object },\n        row: {type: Number},\n        col: {type: Number}\n    }]\n})","export const HEXAGON_WIDTH = 120","import { css } from 'lit';\nimport { HEXAGON_WIDTH } from './consts';\n\nexport const cssHexagon =  css`\n:host {\n  display: inline-block;\n}\n.hexagon {\n  position: relative;\n  cursor: pointer;\n  display: inline-block;\n  background-color: var(--colorShow);\n  width: ${HEXAGON_WIDTH}px;\n  height: 140px;\n  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);\n  transition: all 500ms linear;\n  z-index: 1;\n}\n.hexagon:hover {\n  background: var(--colorFocus);\n}`\n\nexport const cssHexagonMovement = css`\n    .inactive {\n        opacity: 0.3;\n        cursor: not-allowed;\n    }\n    .active.start {\n        filter: brightness(50%);\n    }\n    .active.end {\n        filter: brightness(50%);\n    }\n    .active.unreachable {\n        cursor: not-allowed;\n        filter: brightness(50%) hue-rotate(332deg);\n    }\n`","import { html } from 'lit';\nimport { releaseHormone, useReceptor } from 'organismus';\nimport { LitElementWithProps, pureLit, useOnce, useState } from 'pure-lit';\nimport { MoveModeActivate, MoveModeEnd, HexagonUpdated, HexagonUpdatedPayload, ItemSelected, MoveModeData, MoveModeTargetHovered, BattleModeActive, BattleModeDeactivate, MoveModeDeactivate, BattleModeData } from '../../game/world/events';\nimport { Sprite } from '../../game/world/sprite';\nimport { spriteFactory } from '../sprites';\nimport { Asset, SimpleCoords } from '../../game';\nimport * as movement from './Hexagon.movement';\nimport * as battle from './Hexagon.battle';\nimport { cssHexagon, cssHexagonMovement } from './Hexagon.styles';\nimport { SimpleCoordsEquals } from '../../math/position';\n\ntype Props = {\n    background: Sprite | undefined\n    elements: Asset[]\n    row: number\n    col: number\n}\n\nconst getCssClass = (hexagon: SimpleCoords, moveMode: MoveModeData | undefined, battleMode: BattleModeData | undefined) => {\n    return `${movement.getCssClass(hexagon, moveMode)} ${battle.getCssClass(hexagon, battleMode)}`\n}\nconst click = (hexagon: SimpleCoords, moveMode: MoveModeData | undefined, battleMode: BattleModeData | undefined) => {\n    if (moveMode && moveMode.end && SimpleCoordsEquals(moveMode.end, hexagon)) {\n        movement.click(hexagon, moveMode)\n    } else if (battleMode) {\n        battle.click(hexagon, battleMode)\n    }\n}\n\nexport default pureLit('hexagon-element', (el: LitElementWithProps<Props>) => {\n    useOnce(el, () => {\n      el.addEventListener(\"click\", () => releaseHormone(ItemSelected, {item: \"hexagon\", row: el.row, col: el.col}))\n    })\n\n    const {row, col} = el;\n    const { getState: getElements, publish: setElements } = useState<HexagonUpdatedPayload>(el, {elements: el.elements, row, col})\n    const { getState: getMovementMode, publish: setMovementMode } = useState<MoveModeData | undefined>(el, undefined)\n    const { getState: getBattleMode, publish: setBattleMode } = useState<BattleModeData | undefined>(el, undefined)\n    useReceptor(el, HexagonUpdated, (h) => (h?.row.toString() === row.toString() && h?.col.toString() === col.toString()), setElements)\n    useReceptor(el, MoveModeActivate, setMovementMode)\n    useReceptor(el, BattleModeActive, setBattleMode)\n    useReceptor(el, MoveModeEnd, () => setMovementMode(undefined))\n    useReceptor(el, MoveModeDeactivate, () => setMovementMode(undefined))\n    useReceptor(el, BattleModeDeactivate, () => setBattleMode(undefined))\n\n    const update = getElements()\n    \n    return html`<div \n      class=\"hexagon ${getCssClass(el, getMovementMode(), getBattleMode())}\" \n      @mouseover=${() => { if (getMovementMode()) {releaseHormone(MoveModeTargetHovered, {row, col})} }}\n      @click=${() => (click(el, getMovementMode(), getBattleMode()), document.dispatchEvent(new CustomEvent(\"hello-world\", { detail: { hello: \"world\"}})))}\n      style=\"background-image:url(/assets/${el.background?.file}.png); background-position: ${el.background?.x}px ${el.background?.y}px;\">\n      ${spriteFactory(update.elements, el.row, el.col)}</div>`\n}, {\n    styles: [cssHexagon, cssHexagonMovement],\n    defaults: {\n        background: undefined,\n        elements: [],\n        col: 0,\n        row: 0\n    }\n}\n\n)\n","import { SimpleCoords } from \"../../game\";\nimport { MoveModeData, MoveModeEnd } from \"../../game/world/events\";\nimport { SimpleCoordsEquals } from \"../../math/position\";\nimport { releaseHormone } from 'organismus';\n\nexport function getCssClass(hexagon: SimpleCoords, data: MoveModeData | undefined) {\n    if (!data) {\n        return \"\"\n    }\n\n    if (SimpleCoordsEquals(data.start, hexagon)) return \"active start\"\n    if (data.end && ((data.trail?.length ?? 0) < 1) && SimpleCoordsEquals(data.end, hexagon)) return \"active unreachable\"\n    if (data.end && SimpleCoordsEquals(data.end, hexagon)) return \"active end\"\n    if (data.trail && data.trail.some(coord => SimpleCoordsEquals(coord, hexagon))) return \"active trail\"\n    return \"inactive\"\n}\n\nexport function click(hexagon: SimpleCoords, data: MoveModeData | undefined) {\n    if (!data) {\n        return\n    }\n\n    releaseHormone(MoveModeEnd, hexagon)\n}","import { SimpleCoords } from \"../../game\";\nimport { BattleModeData, BattleModeEnd } from \"../../game/world/events\";\nimport { SimpleCoordsEquals } from \"../../math/position\";\nimport { releaseHormone } from 'organismus';\n\nexport function getCssClass(hexagon: SimpleCoords, data: BattleModeData | undefined) {\n    if (!data) {\n        return \"\"\n    }\n\n    if (SimpleCoordsEquals(data.start, hexagon)) return \"active start\"\n    if (data.end && SimpleCoordsEquals(data.end, hexagon)) return \"active end\"\n    if (data.range && data.range.some(coord => SimpleCoordsEquals(coord, hexagon))) return \"active trail\"\n    return \"inactive\"\n}\n\nexport function click(hexagon: SimpleCoords, data: BattleModeData | undefined) {\n    if (!data) {\n        return\n    }\n\n    releaseHormone(BattleModeEnd, hexagon)\n}","import { css, html, LitElement } from \"lit\";\nimport { useReceptor } from \"organismus\";\nimport { pureLit, useState } from \"pure-lit\";\nimport { World, WorldLoaded } from \"../../game\";\nimport { HEXAGON_WIDTH } from \"./consts\";\n\nexport default pureLit(\"world-map\", (el: LitElement) => {\n    const { getState: getWorld, publish: setWorld } = useState<World | undefined>(el, undefined)\n    useReceptor(el, WorldLoaded, setWorld)\n\n    return html`<div id=\"globe\">${\n        getWorld()?.map.map((rows, row) => \n            html`<div class=\"row ${row % 2 === 0 ? \"push\" : \"\"}\" style=\"width: calc(${HEXAGON_WIDTH * rows.length}px + 20rem)\">\n                ${rows.map((tile, col) => \n                    html`<hexagon-element \n                        .background=${tile.terrain.sprite} \n                        .elements=\"${tile.elements}\" \n                        row=\"${row}\" col=\"${col}\">\n                    </hexagon-element>`)}\n            </div>\n            `\n        )\n    }</div>`\n}, {\n    styles: css`\n    :host {\n        display:block;\n    }\n    #globe {\n        padding: 20rem;\n    }\n    .row {\n        margin-bottom: -41px;\n        white-space: nowrap;\n    }\n    .push {\n        margin-left: 60px;\n    }`\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { sprite } from \"../styles\";\n\nexport const name = \"building-mill\"\n\ntype Props = {\n    team?: string\n}\n\nexport default pureLit(name, ({ team }: Props) => {\n    return html`<div style=\"background-image:url('/assets/windmill_complete_${team ?? \"none\"}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        css`\n        div {\n            width: 80%;\n            height: 80%;\n        }\n        `\n    ],\n    defaults: {\n        team: undefined\n    }\n})","import { html, css } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\"\nimport { TurnAccepted } from \"../../game/world/events\"\nimport { inactive, sprite } from \"../styles\"\n\nexport const name = \"building-castle-small\"\n\ntype Props = {\n    team: string\n}\n\nexport default pureLit(name, (el: LitElementWithProps<Props>) => {\n    const { getState, publish } = useState(el, \"\")\n    useReceptor(el, TurnAccepted, publish)\n    return html`<div class=\"${getState() === el.team ? \"active\" : \"inactive\"}\" style=\"background-image:url('/assets/castle_small_${el.team}.png'\"></div>`\n},\n{\n    styles: [\n        sprite,\n        inactive,\n        css`\n        :host {\n            filter: hue-rotate(0deg);\n        }\n        `\n    ],\n    defaults: {\n        team: \"\",\n        row: undefined,\n        col: undefined\n    }\n})","import { Resources } from \"../world\";\nimport { costs as knightCosts } from \"./knights/Knight\";\nimport { costs as wagonCosts } from \"./wagon/Wagon\";\n\nconst resources: Resources = {\n    hay: 0,\n    iron: 0,\n    grain: 0,\n    wood: 0,\n    stone: 0\n}\n\nexport default {\n    wagon: wagonCosts,\n    knight: knightCosts,\n    iron: () => ({...resources, stone: 4, wood: 2, grain: 1 }),\n    castle_medium: () => ({...resources, wood: 500, grain: 500, stone: 500 }),\n    castle_large: () => ({...resources, stone: 1000, iron: 1000, grain: 1000 }),\n}","import { css } from \"lit\";\n\nexport const sidebarBaseCSS = css`\n  :host {\n    display: block;\n    background-image: url(\"/assets/sidebar/bg.png\");\n    background-repeat: no-repeat;\n    padding: 15px;\n    background-size: 100% 100%;\n  }\n  .container {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: auto;\n    column-gap: 10px;\n    row-gap: 15px;\n    margin: 15px 15px 25px 15px;\n  }\n  button {\n        cursor: pointer;\n    }\n    img {\n        width: 100%;\n    }\n    h3 {\n        color: var(--colorMain)\n    }\n  `;","import { css, html } from \"lit\";\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { LitElementWithProps, pureLit, useState } from \"pure-lit\";\nimport { Player, Resources } from \"../../game\";\nimport costs from \"../../game/player/costs\";\nimport {\n  KnightCreated,\n  PlayerUpdate,\n  WagonCreated,\n} from \"../../game/world/events\";\nimport { sidebarBaseCSS } from \"./sidebar.style\";\n\ntype Props = {\n  selected: {\n    payload: { team: string };\n    col: number;\n    row: number;\n  };\n};\n\nconst style = css`\n  building-castle-small {\n    position: relative;\n    display: block;\n    width: 4em;\n    height: 4em;\n  }\n  h3 {\n    text-align: center;\n    margin-top: 0;\n  }\n  resource-counter {\n    display: grid;\n    grid-template-columns: 1fr;\n    font-size: 0.7rem;\n  }\n  .enough {\n    color: var(--colorMain);\n  }\n  .lack {\n    color: var(--colorHighlight);\n  }\n`;\n\nconst costList = (resources: Resources, costs: Resources) => {\n  return html`\n    ${costs.hay > 0\n      ? html`<resource-counter\n          count=\"${costs.hay}\"\n          class=\"${resources.hay >= costs.hay ? \"enough\" : \"lack\"}\"\n        >\n          <resource-hay></resource-hay>\n        </resource-counter>`\n      : html``}\n    ${costs.grain > 0\n      ? html`<resource-counter\n          count=\"${costs.grain}\"\n          class=\"${resources.grain >= costs.grain ? \"enough\" : \"lack\"}\"\n        >\n          <resource-grain></resource-grain>\n        </resource-counter>`\n      : html``}\n    ${costs.wood > 0\n      ? html`<resource-counter\n          count=\"${costs.wood}\"\n          class=\"${resources.wood >= costs.wood ? \"enough\" : \"lack\"}\"\n        >\n          <resource-wood></resource-wood>\n        </resource-counter>`\n      : html``}\n    ${costs.stone > 0\n      ? html`<resource-counter\n          count=\"${costs.stone}\"\n          class=\"${resources.stone >= costs.stone ? \"enough\" : \"lack\"}\"\n        >\n          <resource-stone></resource-stone>\n        </resource-counter>`\n      : html``}\n    ${costs.iron > 0\n      ? html`<resource-counter\n          count=\"${costs.iron}\"\n          class=\"${resources.iron >= costs.iron ? \"enough\" : \"lack\"}\"\n        >\n          <resource-iron></resource-iron>\n        </resource-counter>`\n      : html``}\n  `;\n};\n\nexport default pureLit(\n  \"sidebar-castle\",\n  (el: LitElementWithProps<Props>) => {\n    const {\n      selected: {\n        payload: { team },\n        row,\n        col,\n      },\n    } = el;\n    const { getState: getCurrentPlayer, publish: setCurrentPlayer } = useState<\n      Player | undefined\n    >(el, undefined);\n    useReceptor(el, PlayerUpdate, setCurrentPlayer);\n    const { resources } = getCurrentPlayer() ?? ({ resources: {} } as Player);\n    return html`<building-castle-small team=\"${team}\"></building-castle-small>\n      <h3>Bauen</h3>\n      <div class=\"container\">\n        <button-image\n          height=\"35px\"\n          src=\"/assets/knight_${team}.png\"\n          @click=${async () =>\n            await releaseHormone(KnightCreated, { team, row, col })}\n        >\n          ${costList(resources, costs.knight())}\n        </button-image>\n        <button-image\n          height=\"35px\"\n          src=\"/assets/wagon_${team}.png\"\n          @click=${async () =>\n            await releaseHormone(WagonCreated, { team, row, col })}\n        >\n          ${costList(resources, costs.wagon())}\n        </button-image>\n        <button-image height=\"35px\" src=\"/assets/resources/iron.png\">\n          ${costList(resources, costs.iron())}\n        </button-image>\n        <button-image height=\"35px\" src=\"/assets/castle_medium_${team}.png\">\n          ${costList(resources, costs.castle_medium())}\n        </button-image>\n        <button-image height=\"35px\" src=\"/assets/castle_large_${team}.png\">\n          ${costList(resources, costs.castle_large())}\n        </button-image>\n      </div>`;\n  },\n  {\n    styles: [sidebarBaseCSS, style],\n    defaults: {\n      selected: {\n        payload: {\n          team: \"\",\n        },\n\n        col: 0,\n        row: 0,\n      },\n    },\n  }\n);\n","export const asNumber = (number: Number) => {\n    return parseInt(number.toString(), 10)\n}","import { css, html } from \"lit\";\nimport { releaseHormone } from \"organismus\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\nimport { FigherAsset } from \"../../game\";\nimport { BattleModeActivate, MoveModeActivate } from \"../../game/world/events\";\nimport { asNumber } from \"../../math/number\";\nimport { sidebarBaseCSS } from \"./sidebar.style\";\n\ntype Props = {\n    selected : { \n        payload: FigherAsset\n        col: number\n        row: number\n    }\n}\n\nconst style = css`\n    .container {\n        grid-template-areas: \n            \"knight knight health health health\"\n            \"knight knight stats stats stats\"\n            \"knight knight move attack fortify\";\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n    }\n    #knight {\n        grid-area: knight;\n    }\n    #health {\n        grid-area: health;\n    }\n    #attack {\n        grid-area: attack;\n    }\n    #stats {\n        grid-area: stats;\n    }\n`\nexport default pureLit(\"sidebar-knight\", (_: LitElementWithProps<Props>) => {\n    const { selected: { payload, row, col } } = _;\n    const {health, actions} = payload\n    const start = {\n        row: asNumber(row),\n        col: asNumber(col)\n    }\n    return html`\n    <h3>Ritter</h3>\n    <div class=\"container\">\n        <img id=\"knight\" src=\"/assets/knight_${payload.team}.png\">\n        <loading-bar id=\"health\" width=\"${(health.current / health.max) * 100}%\"></loading-bar>\n        <div id=\"stats\">\n            <strong>Leben</strong> ${health.current} von ${health.max} \n            <strong>Aktionen:</strong> ${actions.current} von ${actions.max}\n        </div>\n        <button ?disabled=${actions.current < 1} id=\"move\" @click=${() => releaseHormone(MoveModeActivate, { asset: { ...payload }, start })}></button>\n        <button ?disabled=${actions.current < 1} id=\"attack\" @click=${() => releaseHormone(BattleModeActivate, { asset: { ...payload }, start })}\"></button>\n        <button ?disabled=${actions.current < 1} id=\"fortify\"></button>\n    </div>`\n},\n    {\n        styles: [\n            sidebarBaseCSS,\n            style\n        ],\n        props: [\n            { \"selected\" : {type: Object}}\n        ]\n    })","import { css, html } from \"lit\";\nimport { releaseHormone } from \"organismus\";\nimport { LitElementWithProps, pureLit } from \"pure-lit\";\nimport { FigherAsset } from \"../../game\";\nimport { MoveModeActivate } from \"../../game/world/events\";\nimport { asNumber } from \"../../math/number\";\n\ntype Props = {\n    selected : { \n        payload: FigherAsset\n        col: number\n        row: number\n    }\n}\n\nconst style = css`\n    :host {\n        display: block;\n        background-image: url('/assets/sidebar/bg.png');\n        background-size: 100% 100%;\n        background-repeat: no-repeat;\n        padding: 15px;\n    }\n    .container {\n        display: grid;\n        grid-template-areas: \n            \"wagon wagon health health health\"\n            \"wagon wagon stats stats stats\"\n            \"wagon wagon move attack fortify\";\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n        column-gap: 10px;\n        row-gap: 15px;\n        margin: 15px;\n    }\n    button {\n        cursor: pointer;\n    }\n    #knight {\n        grid-area: knight;\n    }\n    #health {\n        grid-area: health;\n    }\n    #attack {\n        grid-area: attack;\n    }\n    #stats {\n        grid-area: stats;\n    }\n    img {\n        width: 100%;\n    }\n    h3 {\n        color: var(--colorMain)\n    }\n`\nexport default pureLit(\"sidebar-wagon\", (_: LitElementWithProps<Props>) => {\n    const { selected: { payload, row, col } } = _;\n    const {health, actions} = payload\n    const start = {\n        row: asNumber(row),\n        col: asNumber(col)\n    }\n    return html`\n    <h3>Wagen</h3>\n    <div class=\"container\">\n        <img id=\"wagon\" src=\"/assets/wagon_${payload.team}.png\">\n        <loading-bar id=\"health\" width=\"${(health.current / health.max) * 100}%\"></loading-bar>\n        <div id=\"stats\">\n            <strong>Leben</strong> ${health.current} von ${health.max} \n            <strong>Aktionen:</strong> ${actions.current} von ${actions.max}\n        </div>\n        <button ?disabled=${actions.current < 1} id=\"move\" title=\"Move\" @click=${() => releaseHormone(MoveModeActivate, { asset: { ...payload }, start })}></button>\n        <button ?disabled=${actions.current < 1} id=\"load\" title=\"Load/Unload\"></button>\n    </div>`\n},\n    {\n        styles: [style],\n        props: [\n            { \"selected\" : {type: Object}}\n        ]\n    })","import { css, html } from \"lit\";\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { pureLit, useState, useOnce } from \"pure-lit\";\nimport { ItemSelected, SelectedItem } from \"../../game/world/events\";\n\nimport \"./selectedCastle\"\nimport \"./selectedKnight\"\nimport \"./selectedWagon\"\nimport { Position } from \"../../math/position\";\nimport { buildings, player } from \"..\";\nimport { SidebarLoaded } from \"../../game\";\n\ntype SelectionState = {\n    dirty: boolean\n    position?: Position\n    elements: {item: string, payload?: unknown}[]\n}\n\nconst newState = (element: { row: number, col: number, item: string, payload?: unknown } | undefined) => ({\n    position: element ? new Position(element?.row, element?.col) : undefined,\n    elements: element ? [{item: element.item, payload: element.payload}] : [],\n    dirty: false\n})\n\nexport default pureLit(\"controls-sidebar\", (el) => {\n    const { get: getSelectedElement, set: setSelectedElement } = useState<SelectedItem<unknown> | undefined>(el, undefined)\n    useReceptor(el, ItemSelected, setSelectedElement)\n    const selectedElement = getSelectedElement()\n    const {get, set} = useState<SelectionState>(el, newState(selectedElement))\n    const current = get()\n    if (!current.dirty && selectedElement && new Position(selectedElement.row, selectedElement.col).equals(current.position)) {\n        set({ \n            ...current, \n            elements: [...current.elements, {item: selectedElement.item, payload: selectedElement.payload}],\n            dirty: selectedElement.item === \"hexagon\"\n        })\n    } else {\n        set(newState(selectedElement))\n    }\n\n    useOnce(el, () => {\n        setTimeout(() => {\n            releaseHormone(SidebarLoaded)\n        }, 1)\n    })\n\n    return html`\n        ${get().elements.map(element => {\n            switch (element.item) {\n                case buildings.castleSmall.name:\n                    return html`<sidebar-castle \n                        .selected=\"${{row: get().position?.row, col: get().position?.col, payload: element.payload}}\">\n                    </sidebar-castle>`\n                case player.knight.name:\n                    return html`<sidebar-knight\n                        .selected=\"${{row: get().position?.row, col: get().position?.col, payload: element.payload}}\">\n                    </sidebar-knight>`\n                case player.wagon.name:\n                    return html`<sidebar-wagon\n                        .selected=\"${{row: get().position?.row, col: get().position?.col, payload: element.payload}}\">\n                    </sidebar-wagon>`\n                default:\n                    case buildings.castleSmall.name:\n                    return html``\n            }\n        })}\n    `\n}, {\n    styles: css`:host { \n        position: absolute;\n        display: block;\n        min-width: 200px;\n        width: 20%;\n        right: 20px;\n        top: 20px;\n        z-index: 2;\n    }`\n})","import { html, css } from \"lit\"\nimport { releaseHormone, useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { FigherAsset } from \"../../game\"\nimport { Dice } from \"../../game/player/dices/dice\"\nimport { BattleThrowDice, ModalBattleOpen } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-battle\", (el) => {\n    const { getState, publish } = useState<ModalBattleOpen | undefined>(el, undefined)\n    const { getState: getSelectedDice, publish: setSelectedDice } = useState<Dice | undefined>(el, undefined)\n    useReceptor(el, ModalBattleOpen, publish)\n    return html`\n   <modal-window \n        .open=${getState() ? true : false} \n        preventClose>\n        <h1 slot=\"header\">Kampf beginnt!</h1>\n        <div class=\"body\">\n        ${getState()?.attacker.map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div>\n                        <fighter-info \n                            .player=${player} \n                            row=\"${getState()!.location.row}\" \n                            col=\"${getState()!.location.col}\">\n                        </fighter-info>\n                        <h3>Whle deine Waffe</h3>\n                        <div class=\"dices\">\n                            <dice-selector .dices=\"${player.dices}\" @select=\"${(dice: CustomEvent<Dice>) => setSelectedDice(dice.detail)}\"></dice-selector>\n                        </div>\n                    </div>\n                `\n        })\n        }${getState()?.defender.map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div>\n                        <fighter-info \n                            .player=${player} \n                            row=\"${getState()!.location.row}\" \n                            col=\"${getState()!.location.col}\">\n                        </fighter-info>\n                    </div>\n                `\n        })\n        }\n        </div>\n        <p slot=\"footer\">\n            <button @click=\"${() => releaseHormone(BattleThrowDice, {\n                attacker: {\n                    asset: getState()?.attacker[0],\n                    dices: [getSelectedDice()]\n                },\n                defender: getState()?.defender[0],                \n                location: {row: getState()!.location.row, col: getState()!.location.col},\n            })}\" ?disabled=\"${getSelectedDice() === undefined}\">Wrfeln</button>\n        </p>\n    </modal-window>`\n}, {\n    styles: [\n        css`\n        .body {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            grid-template-rows: auto;\n        }\n        .body > * {\n            display: block;\n        }\n        .player-info {\n            display: grid;\n            grid-template-columns: 1fr 3fr;\n        }\n        .sprite {\n            height: 140px;\n        }\n        .health-bar {\n            background-image: url('/assets/knight/health-bg.png');\n            background-size: contain;\n            background-repeat: no-repeat;\n            height: 15px;\n        }\n        .health-bar .current {\n            background-image: url('/assets/knight/health.png');\n            background-size: contain;\n            background-repeat: no-repeat;\n            height: 15px;\n        }\n        `\n    ]\n})","import { html, css } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { FigherAsset } from \"../../game\"\nimport { ModalDiceResultOpen } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-dice-result\", (el) => {\n    const { getState, publish } = useState<ModalDiceResultOpen | undefined>(el, undefined)\n    useReceptor(el, ModalDiceResultOpen, publish)\n    return html`\n   <modal-window \n        .open=${getState() ? true : false} \n        @close=${() => publish(undefined)}>\n        <h1 slot=\"header\">Gewrfelt!</h1>\n        <div class=\"body\">\n        ${getState()?.attacker.map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div class=\"attacker\">\n                        <fighter-info \n                            .player=${player} \n                            row=\"${getState()!.location.row}\" \n                            col=\"${getState()!.location.col}\">\n                        </fighter-info>\n                    </div>\n                `\n        })\n        }${getState()?.defender.map(_ => {\n            const player = _ as FigherAsset;\n            return html`\n                    <div class=\"defender\">\n                        <fighter-info \n                            .player=${player} \n                            row=\"${getState()!.location.row}\" \n                            col=\"${getState()!.location.col}\">\n                        </fighter-info>\n                    </div>\n                `\n        })\n        }\n        ${getState() ? html`<dice-roll class=\"dice\" result=\"${getState()!.result}\"></dice-roll>` : html``}\n        </div>\n\n        <p slot=\"footer\">\n        </p>\n    </modal-window>`\n}, {\n    styles: [\n        css`\n        .body {\n            display: grid;\n            grid-template-areas: \n                \"attacker defender\"\n                \"dice dice\";\n        }\n        .body > * {\n            display: block;\n        }\n        .attacker {\n            grid-area: attacker;\n        }\n        .defender {\n            grid-area: defender;\n        }\n        .dice {\n            grid-area: dice;\n        }\n        `\n    ]\n})","import { css, html } from \"lit\"\nimport { useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { MillTaken, MillTakeover } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-mill-taken\", (el) => {\n    const { getState, publish } = useState<MillTaken | undefined>(el, undefined)\n    useReceptor(el, MillTakeover, publish)\n    return html`\n    <modal-window \n         .open=${getState() ? true : false} \n         @close=${() => publish(undefined)}>\n         <h1 slot=\"header\">Mhle bernommen!</h1>\n         <div class=\"body\">\n            <div class=\"by\">\n                <fighter-info \n                    .player=${getState()?.by} \n                    .row=\"${getState()?.location.row}\" \n                    .col=\"${getState()?.location.col}\">\n                </fighter-info>\n            </div>\n            <div class=\"mills\">\n                <building-mill .team=\"${getState()?.transfered.to}\" class=\"after\"></building-mill>\n                <building-mill .team=\"${getState()?.transfered.from}\" class=\"before\"></building-mill>\n            </div>\n         </div>\n         <p slot=\"footer\">\n         </p>\n     </modal-window>`\n}, {\n    styles: css`\n    .body {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n    }\n\n    .mills {\n        position: relative;\n        justify-self: center;\n    }\n    .after {\n        z-index: 1;\n    }\n    .before {\n        z-index: 2;\n        animation: fadeOut 5s 1;\n        animation-fill-mode: forwards;\n    }\n    \n    @keyframes fadeOut {\n        0%   {\topacity: 1;\t}\n        100%   {\topacity: 0;\t}\n    }\n    `\n})","import { html, css } from \"lit\"\nimport { releaseHormone, useReceptor } from \"organismus\"\nimport { pureLit, useState } from \"pure-lit\"\nimport { PlayerNoActionsLeft, TurnPlayerComplete } from \"../../game/world/events\"\n\nexport default pureLit(\"modal-no-more-turns\", (el) => {\n    const { getState, publish } = useState<boolean | undefined>(el, undefined)\n    useReceptor(el, PlayerNoActionsLeft, publish)\n    return html`\n   <modal-window \n        .open=${getState() ? true : false} \n        preventClose>\n        <h1 slot=\"header\">Keine Aktionen brig.</h1>\n        <div class=\"body\">\n            Du hast keine Aktionen mehr brig. Willst du weiter geben, oder noch rum schauen?\n        </div>\n        <p slot=\"footer\">\n            <button @click=\"${() => (releaseHormone(TurnPlayerComplete), publish(false))}\">Zug beenden</button>\n            <button @click=\"${() => publish(false)}\">Noch rumschauen</button>\n        </p>\n    </modal-window>`\n}, {\n    styles: [\n        css`\n        .body {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            grid-template-rows: auto;\n        }\n        .body > * {\n            display: block;\n        }\n        .player-info {\n            display: grid;\n            grid-template-columns: 1fr 3fr;\n        }\n        .sprite {\n            height: 140px;\n        }\n        .health-bar {\n            background-image: url('/assets/knight/health-bg.png');\n            background-size: contain;\n            background-repeat: no-repeat;\n            height: 15px;\n        }\n        .health-bar .current {\n            background-image: url('/assets/knight/health.png');\n            background-size: contain;\n            background-repeat: no-repeat;\n            height: 15px;\n        }\n        `\n    ]\n})","import { html } from \"lit\"\nimport { pureLit } from \"pure-lit\"\n\nexport * from \"./Battle\"\nexport * from \"./DiceResult\"\nexport * from \"./MillTaken\"\nexport * from \"./NoMoreTurns\"\n\nexport default pureLit(\"modals-all\", () => {\n    return html`\n    <modal-no-more-turns></modal-no-more-turns>\n    <modal-battle></modal-battle>\n    <modal-dice-result></modal-dice-result>\n    <modal-mill-taken></modal-mill-taken>`\n})","import { css, html } from \"lit\";\nimport { releaseHormone, useReceptor } from \"organismus\";\nimport { pureLit, useState } from \"pure-lit\";\nimport { Asset, isMoveableAsset, Team } from \"../../game\";\nimport { UpdateAllPlayerElements, TurnAccepted, TurnPlayerComplete } from \"../../game/world/events\";\nimport { spriteGridFactory } from \"../sprites\";\nimport { sidebar, sidebarFor } from \"../styles\";\n\nexport default pureLit(\"footer-element\", (el) => {\n    const {getState: getTeam, publish: setTeam} = useState<Team | undefined>(el, undefined)\n    const {getState: getAssets, publish: setAssets} = useState<Asset[]>(el, [])\n    useReceptor(el, TurnAccepted, setTeam)\n    useReceptor(el, UpdateAllPlayerElements, setAssets)\n    return html`<footer class=\"${getTeam()!}\">\n    <div class=\"main \">\n        ${spriteGridFactory(getAssets()\n            .sort((a, b) => a.name.localeCompare(b.name))\n            .filter(asset => !isMoveableAsset(asset) || asset.actions.current > 0), \n            \"width: 10vh; height: 10vh;\")}\n    </div>\n    <div class=\"action\">\n        <button-pure @click=\"${() => releaseHormone(TurnPlayerComplete)}\">\n            <text-block type=\"paragraph\" size=\"x-large\"></text-block> Zug beenden\n        </button-pure>\n    </div>\n</footer>`\n}, {\n    styles: [\n        sidebar,\n        sidebarFor(css`footer .main`),\n        css`\n    footer {\n        min-height: 10vh;\n        max-height: 10vh;\n        display: grid;\n        grid-template-columns: 3fr 1fr;\n        grid-template-rows: auto;\n        grid-template-areas: \n            \"main action\";\n        padding-left: 5vw;\n        padding-right: 5vw;\n    }\n    footer .main {\n        grid-area: main;\n        transition: background-color 2s;\n        min-height: 10vh;\n        max-height: 10vh;\n        overflow-x: auto;\n    }\n    footer.red {\n        background-color: #A95C44;\n    }\n    footer.green {\n        background-color: #178044;\n    }\n    footer .action {\n        grid-area: action;\n        place-self: center;\n    }`]\n})","import { css } from \"lit\";\n\nexport const baseResource = css`\n  :host {\n    display: inline-block;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    width: 3vh;\n    height: 3vh;\n  }\n`;\n","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\n  \"resource-grain\",\n  () => {\n    return html``;\n  },\n  {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/grain.png\");\n        }\n      `,\n      baseResource,\n    ],\n  }\n);\n","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\"resource-stone\", () => {\n    return html``\n}, {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/stone.png\");\n        }\n      `,\n      baseResource,\n    ],\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\"resource-iron\", () => {\n    return html``\n}, {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/iron.png\");\n        }\n      `,\n      baseResource,\n    ],\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\"resource-wood\", () => {\n    return html``\n}, {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/log.png\");\n        }\n      `,\n      baseResource,\n    ],\n})","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\nimport { baseResource } from \"./base\";\n\nexport default pureLit(\n  \"resource-hay\",\n  () => {\n    return html``;\n  },\n  {\n    styles: [\n      css`\n        :host {\n          background-image: url(\"/assets/resources/hay.png\");\n        }\n      `,\n      baseResource,\n    ],\n  }\n);\n","import { css, html } from \"lit\";\nimport { pureLit } from \"pure-lit\";\n\ntype Props = {\n    count: number,\n    collect: number | undefined,\n}\n\nexport default pureLit(\"resource-counter\", ({count, collect}: Props) => {\n    return html`\n        <slot></slot>\n        ${count} ${collect ? html`<span>(+${collect})</span>` : \"\"}\n    `\n}, {\n    styles: [\n        css`\n        :host {\n            font-size: 4vh;\n        }\n        span {\n            font-size: smaller;\n        }\n        `\n    ],\n    defaults : {\n        count: 0,\n        collect: undefined,\n    }\n})","import { html, css } from \"lit\";\nimport { useReceptor } from \"organismus\";\nimport { pureLit, useState } from \"pure-lit\";\nimport { Player, ResourceGeneratingBuilding, ResourceGenerator, RESOURCES, Team } from \"../../game\";\nimport { DistributeResources, PlayerUpdate, TurnAccepted } from \"../../game/world/events\";\n\nimport '../resources'\n\nexport default pureLit(\"header-element\", (el) => {\n    const {get: getCurrentTeam, set: setCurrentTeam} = useState<Team | undefined>(el, undefined)\n    const {get: getCurrentPlayer, set: setCurrentPlayer} = useState<Player | undefined>(el, undefined)\n    const {get: getResources, set: setResources} = useState<DistributeResources | undefined>(el, undefined)\n    useReceptor(el, TurnAccepted, setCurrentTeam)\n    useReceptor(el, PlayerUpdate, setCurrentPlayer)\n    useReceptor(el, DistributeResources, setResources)\n    const player = getCurrentPlayer() ?? { resources: {}} as Player\n    const applyResource = (map: any, resource: string, amount: number) => {\n        map[resource] = (map[resource] || 0) + amount\n        return map\n    }\n    const applyAllResources = (map: any, generator: ResourceGeneratingBuilding) => {\n        for (const resource of RESOURCES) {\n            map = applyResource(map, resource, (generator.resources as any)[resource]?.generatedResource ?? 0)\n        }\n        return map\n    }\n    const resources: ResourceGenerator = getResources()?.resourcesToGenerate.reduce(applyAllResources, {}) ?? {}\n    return html`<header class=\"${getCurrentTeam()!}\">\n        <resource-counter title=\"hay\" count=\"${player.resources.hay}\" collect=${resources.hay ?? 0}>\n            <resource-hay></resource-hay>\n        </resource-counter>\n        <resource-counter title=\"grain\" count=\"${player.resources.grain}\" collect=${resources.grain ?? 0}>\n            <resource-grain></resource-grain>\n        </resource-counter>\n        <resource-counter title=\"stone\" count=\"${player.resources.stone}\" collect=${resources.stone ?? 0}>\n            <resource-stone></resource-stone>\n        </resource-counter>\n        <resource-counter title=\"iron\" count=\"${player.resources.iron}\" collect=${resources.iron ?? 0}>\n            <resource-iron></resource-iron>\n        </resource-counter>\n        <resource-counter title=\"wood\" count=\"${player.resources.wood}\" collect=${resources.wood ?? 0}>\n            <resource-wood></resource-wood>\n        </resource-counter>\n    </header>`\n}, {\n    styles: css`\n    header {\n        min-height: 5vh;\n        max-height: 5vh;\n        background-size: 200% 100%;\n        transition: background-position 2s;\n        background-image: \n            linear-gradient(to right, #178044 0%, white 50%, #A95C44 100%);\n    }\n    .green {\n        background-position: 0% 0%;\n    }\n    .red {\n        background-position: 100% 0%;\n    }`\n})","import { html, css } from \"lit\"\nimport { releaseHormone } from \"organismus\"\nimport { pureLit } from \"pure-lit\"\nimport { load } from \"../game\"\nimport { Abort } from \"../game/world/events\"\nimport { sidebar, sidebarFor } from \"./styles\"\n\nexport * from \"./elements\"\nexport * from \"./player/\"\nexport * from \"./map/\"\nexport * as buildings from \"./buildings/\"\nexport * as player from \"./player/\"\nexport * from \"./sidebar/sidebar\"\nexport * from \"./modals\"\nexport * from \"./footer\"\nexport * from \"./header\"\n\ndocument.querySelector(\"body\")?.addEventListener(\"keyup\", function (e) {\n    if (e.key === \"Escape\") {\n        releaseHormone(Abort, true)\n    }\n})\n\nexport default pureLit(\"the-mill\", () => {\n    load({ rows: 10, cols: 10 })\n    return html`\n    <controls-sidebar>sidebar</controls-sidebar>\n    <map>\n        <header-element>header</header-element>\n        <world-map></world-map>\n        <footer-element>\n        </footer-element>\n        <modals-all></modals-all>\n    </map>\n\n    `\n}, {\n    styles: [\n        sidebar,\n        sidebarFor(css`world-map`),\n        sidebarFor(css`controls-sidebar`),\n        css`\n    header-element {\n        grid-area: header;\n    }\n    world-map {\n        grid-area: main;\n        min-height: 85vh;\n        max-height: 85vh;\n        overflow: auto;\n        scroll-behavior: smooth;\n        background-color: #87CEFA;\n    }\n    \n    footer-element {\n        grid-area: footer;\n    }\n    \n    map {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n        grid-template-rows: auto;\n        grid-template-areas: \n            \"header header header header header\"\n            \"main main main main main\"\n            \"footer footer footer footer footer\";\n        }\n    :host {\n        position: relative;\n        display: block;\n    }\n    `]\n})"],"names":["t","window","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","e","Symbol","n","Map","s","[object Object]","this","_$cssResult$","Error","cssText","styleSheet","get","set","replaceSync","r","o","length","reduce","S","cssRules","trustedTypes","emptyScript","h","reactiveElementPolyfillSupport","i","Boolean","Object","Array","JSON","stringify","Number","parse","l","attribute","type","String","converter","reflect","hasChanged","a","HTMLElement","super","_$Et","isUpdatePending","hasUpdated","_$Ei","push","observedAttributes","finalize","elementProperties","forEach","_$Eh","_$Eu","state","noAccessor","hasOwnProperty","getPropertyDescriptor","defineProperty","requestUpdate","configurable","enumerable","finalized","getPrototypeOf","properties","getOwnPropertyNames","getOwnPropertySymbols","createProperty","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","_$Ep","Promise","enableUpdating","_$AL","_$Em","constructor","_$Eg","renderRoot","isConnected","hostConnected","call","splice","indexOf","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","map","document","createElement","litNonce","setAttribute","textContent","appendChild","createRenderRoot","hostDisconnected","_$AK","toAttribute","removeAttribute","getPropertyOptions","fromAttribute","has","_$EC","_$E_","reject","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$EU","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","_$ES","mode","ReactiveElement","globalThis","reactiveElementVersions","createPolicy","createHTML","Math","random","slice","createComment","d","c","v","f","_","m","g","$","_$litType$","strings","values","p","b","for","w","T","WeakMap","A","createTreeWalker","E","parts","u","lastIndex","exec","test","RegExp","y","startsWith","C","el","currentNode","content","firstChild","remove","append","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","split","index","name","ctor","M","H","I","tagName","data","innerHTML","P","_$Cl","_$Cu","_$litDirective$","_$AO","_$AT","_$AS","V","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","N","nextSibling","L","_$AI","_$AH","_$AA","_$AB","options","_$Cg","startNode","endNode","_$AR","k","iterator","insertBefore","createTextNode","_$AC","_$AP","element","fill","arguments","capture","once","passive","removeEventListener","addEventListener","host","handleEvent","z","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Dt","renderBefore","render","_$litPart$","connectedCallback","setConnected","disconnectedCallback","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","SILENT","ERROR","INFO","DEBUG","TRACE","console","error","trace","log","queue","list","actionDictionary","hormones","callback","keys","filter","includes","every","replace","assign","readOnce","loadIfExists","defaultValue","transformation","value","receptors","async","Function","orchestrate","all","onlyIf","onTriggered","toString","some","parent","key","props","entries","defaults","customElements","define","resolve","catch","global","self","shallowClone","Date","dispatchEvent","withWorkflow","withReducer","withState","decorate","asUpdateableLitElement","count","states","reducers","workflows","updateDefault","inject","next","throw","done","then","apply","useState","j","O","useReducer","CustomEvent","detail","subscribe","when","dispatch","useWorkflow","x","reducer","initialState","args","addActivity","addSideeffect","projections","addCompensation","compensate","after","now","setTimeout","plan","history","withEffect","q","effects","useOnce","useEffect","D","R","on","observe","J","W","range","start","end","from","Cube","costs","other","transpose","cube","to","max","abs","distance","results","min","add","direction","cubeDirections","neighbor","dir","find","equals","undefined","radius","negRadius","col","row","Position","toPosition","toCoords","neigboursMaps","manhattan","euclid","SimpleCoordsEquals","system","neighbour","sqrt","pow","euclidPointDistance","manhattanPointDistance","prevPosition","val","parseInt","generateUUID","getTime","d2","performance","floor","SmallCastle","id","occurences","resources","grain","generatedResource","hay","stone","iron","region","green","array","round","red","RESOURCES","isResourceGeneratingAsset","asset","isPositionedAsset","isMoveableAsset","actions","isFighterAsset","dices","Mill","isDistributedSpriteSet","sprite","buildings","getRandomLocation","rows","cols","rel","number","generateResources","result","building","_a","resource","resourceGenerator","TerrainPresets","gras","file","movementCosts","defense","desert","mud","muddyHills","forest","mountain","randomTerrain","WorldLoaded","defineHormone","StartGame","SidebarLoaded","loadMapAssets","arrayForBuildings","factor","position","size","getBuildingsForMap","loadPlayerAssets","team","nextIndex","getPlayerStartAssets","getNextElement","pop","Heapify","capacity","PrioritiesBackingArrayType","Uint32Array","_keys","_priorities","priority","parentIndex","halfLength","left","childPriority","childKey","childIndex","right","rightPriority","pos","bubbleUp","bubbleDown","join","toStringTag","Abort","defineSingleHormone","PlayerUpdate","RequestSelectCoords","ItemSelected","ItemMoved","KnightCreated","WagonCreated","UpdateAllPlayerElements","CheckPlayerHasActionsLeft","PlayerNoActionsLeft","HexagonUpdated","MoveModeActivate","MoveModeDeactivate","MoveModeTargetHovered","MoveModeEnd","BattleModeActivate","BattleModeActive","BattleModeEnd","BattleModeDeactivate","BattleStarted","BattleThrowDice","BattlePlayerAttacked","MillTakeover","ModalBattleOpen","ModalDiceResultOpen","TurnStarted","TurnAccepted","TurnPlayerComplete","TurnsComplete","ResourcesGenerated","ResourceGenerationComplete","ResourceSummary","DistributeResources","roll","sum","dice","sides","wood","findAllElementsFromTeam","world","findElement","elements","deepQuerySelector","querySelector","querySelectorAll","hexagon","currentTurn","worldAsCube","turns","players","getPlayer","getActivePlayer","hasActionsLeft","current","isOnTurn","hypothalamus","newWorld","rowIndex","colIndex","toCube","terrain","releaseHormone","abort","teams","resourcesToGenerate","before","initialResources","availableResources","resourceGeneratingBuildings","touched","resourceGeneratingBuilding","source","cost","allocateResources","collect","generator","playerAssets","playerCastle","buildings.castleSmall.name","item","payload","scrollIntoView","behavior","block","inline","resourceMap","into","getResourceGeneratingBuildings","assets","TurnComplete","tryPay","knight","player.knight.name","movement","points","health","story","CreateKnight","wagon","player.wagon.name","CreateWagon","currentTeam","playerWithActionsLeft","findNextPlayerWithAction","safeNumber","moveModeState","battleModeState","isBlocked","trail","goal","frontier","cameFrom","costSoFar","visited","foundPath","path","neighbors","newCost","heuristic","startPosition","fromString","shortestPath","actualEnd","location","otherKnights","attacker","defender","mills","buildings.mill.name","millTaken","transfered","by","damage","hash","setLoglevel","LOGLEVEL","css","inactive","sidebar","sidebarFor","pureLit","style","height","html","src","modalCoreCss","modalHeaderCss","trigger","event","open","preventClose","getState","modalOpen","publish","modalSetOpen","width","useReceptor","side","_$Ct","_$Ci","it","directiveName","ft","raw","resultType","doTrigger","triggers","getFilteredTriggers","none","getUpdated","setUpdated","getCurrentTeam","setCurrentTeam","spriteFactory","entry","player","attributes","unsafeHTML","cssHexagon","cssHexagonMovement","getCssClass","moveMode","battleMode","coord","movement.getCssClass","battle.getCssClass","click","movement.click","battle.click","getElements","setElements","getMovementMode","setMovementMode","getBattleMode","setBattleMode","hello","background","getWorld","setWorld","tile","wagonCosts","knightCosts","sidebarBaseCSS","costList","selected","getCurrentPlayer","setCurrentPlayer","asNumber","newState","dirty","getSelectedElement","setSelectedElement","selectedElement","getSelectedDice","setSelectedDice","getTeam","setTeam","getAssets","setAssets","elementStyle","spriteGridFactory","sort","localeCompare","baseResource","getResources","setResources","applyResource","amount","mapAssets","redAssets","load"],"mappings":"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"}